// generated by PharoJS *** DO NOT EDIT *** on 2023-03-28T17:50:43.176315+02:00 by noury
'use strict';
console.time("ES5");
var global=global||this
global.Smalltalk=global.Smalltalk||(function Smalltalk(){});
Object.defineProperty(Object.prototype,"$def",{value:
 function $def(aFunc){
    var args = Array.from(arguments),self=this;
    args[0]=aFunc.name;
    args.forEach(function(arg){
       Object.defineProperty(self,arg,{writable:true,value:aFunc})})}})
Object.defineProperty(Object.prototype,"$$def",{value:
 function $$def(){
   var v=Array.from(arguments),f=v[0];
   v[0]=this
	  v=Array.from(v,function(x){if(!x.classPool)x.classPool={};return x.classPool})
   v.unshift(this.$def.bind(this.prototype),this.$def.bind(this.__proto__));
   f.apply(null,v)}})
var require
global.Smalltalk.require=require
function PjClass(){};
Smalltalk.theClassClass=PjClass;
Smalltalk.$$def(function(i$,c$){
c$(function pj_at_(jsName){return global[jsName]});
c$(function pj_at_ifAbsent_(key,aBlock){return $asNil$(global).pj_at_ifAbsent_(key,aBlock)});
c$(function pj_at_ifAbsentPut_(aKey,aBlock){return $asNil$(global).pj_at_ifAbsentPut_(aKey,aBlock)});
c$(function pj_at_ifPresent_(key,aBlock){return $asNil$(global).pj_at_ifPresent_(key,aBlock)});
c$(function pj_at_put_(jsName,anObject){return global[jsName]=anObject});
c$(function pj_emptyJavascriptObject(){return {}});
c$(function pj_handleDNU_for_(aMessage,anObject){var selector,$_self_$=this;selector=(($asNil$(aMessage).pj_selector()).split(":"))[0];return this.pj_installDnuArgs_selector_js_for_else_($asNil$(aMessage).pj_arguments(),selector,this.pj_makePharoJsSelector_($asNil$(aMessage).pj_selector()),anObject,function(){return $_self_$.pj_error_("Message not understood: "+$asNil$(anObject).pj_className()+">>#"+$asNil$(aMessage).pj_selector())})});
c$(function pj_initNilInJs(){global[(this.pj_nilTestFunctionName())]=this.pj_nilIfUndefined();return this});
c$(function pj_initObject(){Object.__proto__[(this.pj_subclassSelector())]=this.pj_makeSubclass();this.theClassClass.prototype.__proto__=Function.prototype;return this});
c$(function pj_initThrowInJs(){global[(this.pj_throwFunctionName())]=this.pj_throwFunction();return this});
c$(function pj_initializeCore(){this.selectorCache=this.pj_emptyJavascriptObject();this.pj_initNilInJs();this.pj_initThrowInJs();this.pj_initObject();this.pj_messageClass_(this);this.pj_metaclassClass_(this);return this});
c$(function pj_installDnuArgs_selector_js_for_else_(args,selector,jsSelector,anObject,aBlock){var type,func,functionName;if((type=anObject[selector])!=null){if(true==this.pj_isFunction_(type)){functionName=type.name;if(""==functionName){type=2}else{if(true==$asNil$($asNil$(functionName).pj_asCharacter()).pj_61_($asNil$($asNil$(functionName).pj_asCharacter()).pj_capitalized())){type=0}else{type=2}}}else{type=args.length}};if(2>type){if(0==type){func=this.pj_makeGetter_(selector)}else{func=this.pj_makeSetter_(selector)};Object.defineProperty(anObject.__proto__,jsSelector,this.pj_propertySet_(func));return func.apply(anObject,args)}else{type=anObject;while(null!=type){if(true==(true==type.hasOwnProperty(selector)&&"function"==$asNil$(type[selector]).pj_typeof())){func=type[selector];Object.defineProperty(type,jsSelector,this.pj_propertySet_(func));return func.apply(anObject,args)};type=$asNil$(type).pj_instVarNamed_("__proto__")}};return $asNil$(aBlock).pj_value()});
c$(function pj_isBrowserPlatform(){return $asNil$(this.pj_at_("navigator")).pj_isNotNil()});
c$(function pj_isDomPlatform(){return $asNil$(this.pj_at_("document")).pj_isNotNil()});
c$(function pj_isFunction_(type){return "function" == typeof type});
c$(function pj_isNodePlatform(){return $asNil$(this.pj_at_("navigator")).pj_isNil()});
c$(function pj_isPharoJsSelector_(aSelector){var prefixSize;prefixSize=$asNil$(this.pj_pharoJsSelectorPrefix()).pj_size();if($asNil$(aSelector).pj_size()<=prefixSize){return false};return $asNil$(aSelector.substring(0,prefixSize)).pj_61_(this.pj_pharoJsSelectorPrefix())});
c$(function pj_keys_(anObject){var result={};
for (var i in anObject) { if(typeof anObject[i]!="function" && anObject[i]!=null && anObject[i].pj_proxyResponse) result[i]=anObject[i].pj_proxyResponse()}
return {pj_proxyResponse:function(){return {keys:result}}}});
c$(function pj_log_(message){console.log(message);return this});
c$(function pj_makeDNU_(aSelector){var pjCore=this,ss=this.pj_makeSmalltalkSelector_(aSelector);
switch (ss.split(":").length) {
case 1: return function __DNU(){
return this.pj_doesNotUnderstand_(pjCore.pj_selector_arguments_(ss,[]))};
case 2: return function __DNU(arg1) {
return this.pj_doesNotUnderstand_(pjCore.pj_selector_arguments_(ss,[arg1]))};
case 3: return function __DNU(arg1,arg2) {
return this.pj_doesNotUnderstand_(pjCore.pj_selector_arguments_(ss,[arg1,arg2]))};
default: return function __DNU() {
var args=new Array(arguments.length);
for(var i=0;i<arguments.length;++i) args[i]=arguments[i]
return this.pj_doesNotUnderstand_(pjCore.pj_selector_arguments_(ss,args))};
}});
c$(function pj_makeGetter_(selector){return function Getter(){return this[selector]}});
c$(function pj_makePharoJsSelector_(aSelector){var result,sel;if(true==this.pj_isPharoJsSelector_(aSelector)){return aSelector};if(true==this.selectorCache.hasOwnProperty(aSelector)){return this.selectorCache[aSelector]};if((sel=aSelector)!=null){if(true==(true==$asNil$(sel).pj_isLetter()||aSelector[0]=="$")){result=sel.split(":")}else{result=[];(1).pj_to_do_($asNil$(sel).pj_size(),function(idx){return result.push((sel.charCodeAt(idx-1)).toString())});result.push(null)};result=$asNil$(this.pj_pharoJsSelectorPrefix()).pj_44_(result.join("_"))};if(this.selectorCache[result]==null){this.selectorCache[result]=aSelector};if(this.selectorCache[aSelector]==null){this.selectorCache[aSelector]=result};return result});
c$(function pj_makeSetter_(selector){return function Setter(value){return this[selector]=value}});
c$(function pj_makeSmalltalkSelector_(aSelector){var result;if(false==this.pj_isPharoJsSelector_(aSelector)){return aSelector};if(true==this.selectorCache.hasOwnProperty(aSelector)){return this.selectorCache[aSelector]};result=aSelector.split("_");result.shift();if(result[0][0]>"9"){return result.join(":")};result.pop();(0).pj_to_do_(result.length-1,function(index){return result[index]=String.pj_value_(result[index])});result=result.join("");if(this.selectorCache[result]==null){this.selectorCache[result]=aSelector};if(this.selectorCache[aSelector]==null){this.selectorCache[aSelector]=result};return result});
c$(function pj_makeSubclass(){var pjCore=this;
return function(subclassName){
var subclass = (function(){
if(global[subclassName]) 
return global[subclassName];
var newClass = (new Function("return function "+subclassName+"(){}"))();
return global[subclassName] = newClass;
})();
if(subclass.__proto__.__proto__ == this.__proto__){return;}
subclass.subclasses = [];
if(subclass == this) {
this.__proto__ = {__proto__ : pjCore.theClassClass.prototype};
}else{
subclass.__proto__ = {__proto__ : this.__proto__};
subclass.prototype.__proto__ = this.prototype;
this.subclasses.push(subclass);
}
}});
c$(function pj_messageClass_(anObject){this.messageClass=anObject;return this});
c$(function pj_metaclassClass_(anObject){this.metaclassClass=anObject;return this});
c$(function pj_metaclassOf_(aClass){if(this.metaclassClass!==this) return this.metaclassClass.pj_metaclassOf_(aClass);
var theMetaClass={ prototype: aClass.__proto__,__proto__:this.theClassClass.prototype,
pj_name: function(){return aClass.pj_name()+" class"},
pj_theNonMetaClass: function(){return aClass},
pj_theMetaClass: function(){return theMetaClass},
};
return theMetaClass});
c$(function pj_nilIfUndefined(){global.PjUndefinedObject |= {};
return function(arg){if(arg == undefined){
return PjUndefinedObject.uniqueInstance;
}
return arg}});
c$(function pj_nilTestFunctionName(){return "$asNil$"});
c$(function pj_pharoJsSelectorPrefix(){return "pj_"});
c$(function pj_propertySet_(func){return {
enumerable: false,
configurable: false,
writable: true,
value: func}});
c$(function pj_registerDnu_(aSelector){var selector,props;selector=this.pj_makePharoJsSelector_(aSelector);if(false==Object.prototype.hasOwnProperty(selector)){props=this.pj_makeDNU_(aSelector);Object.defineProperty(Object.prototype,selector,this.pj_propertySet_(props))};return selector});
c$(function pj_registerDnuForAll_(anArray){var $_self_$=this;anArray.forEach(function(each){return $_self_$.pj_registerDnu_(each)});return this});
c$(function pj_selector_arguments_(selector,args){if(this.messageClass!==this)
return this.messageClass.pj_selector_arguments_(selector,arguments);
return {
selector: selector,
pj_selector: function(){return this.selector},
arguments: args,
pj_arguments: function(){return this.arguments}
}});
c$(function pj_subclassSelector(){return "pj_subclass_"});
c$(function pj_throwFunction(){return function(arg){throw arg}});
c$(function pj_throwFunctionName(){return "$throw$"});
})
Smalltalk.pj_initializeCore();
Object.pj_subclass_("Object");
Object.$$def(function(i$,c$,cp$){
i$(function pj_45_62_(anObject){return PjAssociation.pj_key_value_(this,anObject)});
i$(function pj_61_(other){return this==other});
i$(function pj_61_61_(other){return this===other});
i$(function pj_add_(assoc){var $_self_$=this;return Smalltalk.pj_installDnuArgs_selector_js_for_else_([assoc],"add","_add_",this,function(){return $_self_$[($asNil$(assoc).pj_key())]=$asNil$(assoc).pj_value()})});
i$(function pj_addAll_(aCollection){var $_self_$=this;$asNil$(aCollection).pj_do_(function(each){return $_self_$.pj_add_(each)});return aCollection});
i$(function pj_allEnumeratableKeys(){var allKeys;allKeys=PjSet.pj_new();this.pj_allEnumeratableKeysDo_(function(each){return $asNil$(allKeys).pj_add_(each)});return allKeys});
i$(function pj_allEnumeratableKeysDo_(aBlock){for (var i in this){aBlock.pj_value_(i)};
return this;});
i$(function pj_allPhxJsonInstvarNames(){return this.pj_keys()});
i$(function pj_as_(aSimilarClass){if(aSimilarClass===this.pj_class()){return this};return $asNil$(aSimilarClass).pj_newFrom_(this)});
i$(function pj_asJSON(){return $asNil$(JSON).pj_stringify_(this.pj_value())});
i$(function pj_asJsObject(){return this});
i$(function pj_asOrderedCollection(){return Array.pj_with_(this)});
i$(function pj_asPhxJsonString(){var writer;writer=$asNil$(this.pj_class()).pj_newPhxJsonWriter();this.pj_writePhxJsonOn_(writer);return $asNil$(writer).pj_string()});
i$(function pj_associationsDo_(aBlock){this.pj_keysAndValuesDo_(function(key,value){return $asNil$(aBlock).pj_value_(PjAssociation.pj_key_value_(key,value))});return this});
i$(function pj_at_(key){return this[key]});
i$(function pj_at_ifAbsent_(key,aBlock){if(true==this.hasOwnProperty(key)){return this[key]};return $asNil$(aBlock).pj_value()});
i$(function pj_at_ifPresent_(key,aBlock){if(false==this.hasOwnProperty(key)){return null};return $asNil$(aBlock).pj_cull_(this[key])});
i$(function pj_at_ifPresent_ifAbsent_(key,aBlock,anotherBlock){if(true==this.hasOwnProperty(key)){return $asNil$(aBlock).pj_cull_(this[key])};return $asNil$(anotherBlock).pj_value()});
i$(function pj_at_put_(key,value){return this[key]=value});
i$(function pj_class(){return this.constructor});
i$(function pj_className(){return $asNil$($asNil$(this.pj_class()).pj_name()).pj_asString()});
i$(function pj_copy(){return $asNil$(this.pj_shallowCopy()).pj_postCopy()});
i$(function pj_do_(aBlock){return this.pj_valuesDo_(aBlock)});
i$(function pj_doesNotUnderstand_(aMessage){return Smalltalk.pj_handleDNU_for_(aMessage,this)});
i$(function pj_error_(aString){return $asNil$(Error.pj_new()).pj_signal_(aString)});
i$(function pj_flag_(aSymbol){return this});
i$(function pj_halt(){debugger});
i$(function pj_hash(){return this.pj_identityHash()});
i$(function pj_identityHash(){var $1;if(($1=this.pj_instVarNamed_("_js_hash"))==null){return this.pj_instVarNamed_putHidden_("_js_hash",$asNil$(this.pj_class()).pj_nextIdentityHash());}else{return $1}});
i$(function pj_ifEmpty_(aBlock){if(true==this.pj_isEmpty()){return $asNil$(aBlock).pj_value()}else{return this}});
i$(function pj_ifEmpty_ifNotEmpty_(emptyBlock,notEmptyBlock){if(true==this.pj_isEmpty()){return $asNil$(emptyBlock).pj_value()}else{return $asNil$(notEmptyBlock).pj_cull_(this)}});
i$(function pj_ifNil_(nilBlock){return this});
i$(function pj_ifNil_ifNotNil_(nilBlock,ifNotNilBlock){return $asNil$(ifNotNilBlock).pj_cull_(this)});
i$(function pj_ifNotEmpty_(aBlock){if(true==this.pj_isEmpty()){return this}else{return $asNil$(aBlock).pj_cull_(this)}});
i$(function pj_ifNotEmpty_ifEmpty_(notEmptyBlock,emptyBlock){if(true==this.pj_isEmpty()){return $asNil$(emptyBlock).pj_value()}else{return $asNil$(notEmptyBlock).pj_cull_(this)}});
i$(function pj_ifNotNil_(ifNotNilBlock){return $asNil$(ifNotNilBlock).pj_cull_(this)});
i$(function pj_ifNotNil_ifNil_(ifNotNilBlock,nilBlock){return $asNil$(ifNotNilBlock).pj_cull_(this)});
i$(function pj_includesKey_(key){return this.hasOwnProperty(key)});
i$(function pj_initialize(){return this});
i$(function pj_instVarNamed_(aString){return this[aString]});
i$(function pj_instVarNamed_put_(aString,anObject){return this[aString]=anObject});
i$(function pj_instVarNamed_putHidden_(aString,anObject){try{Object.defineProperty(this,aString,{value:anObject,writable:true})}catch(e){}
return anObject});
i$(function pj_isArray(){return false});
i$(function pj_isBehavior(){return false});
i$(function pj_isBlock(){return false});
i$(function pj_isCharacter(){return false});
i$(function pj_isClass(){return false});
i$(function pj_isCollection(){return false});
i$(function pj_isEmpty(){var $_err_$={};try{this.pj_keysDo_(function(){throw $_err_$=false});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_isEmptyOrNil(){return false});
i$(function pj_isFloat(){return false});
i$(function pj_isInteger(){return false});
i$(function pj_isJSPrimitiveType(){return false});
i$(function pj_isKindOf_(aClass){if(this.pj_class()===aClass){return true}else{return $asNil$(this.pj_class()).pj_inheritsFrom_(aClass)}});
i$(function pj_isLiteral(){return false});
i$(function pj_isMemberOf_(aClass){return this.pj_class()===aClass});
i$(function pj_isNil(){return false});
i$(function pj_isNotNil(){return true});
i$(function pj_isNumber(){return false});
i$(function pj_isPjProxyOrNil(){return false});
i$(function pj_isSelfEvaluating(){return this.pj_isLiteral()});
i$(function pj_isStream(){return false});
i$(function pj_isString(){return false});
i$(function pj_isSymbol(){return false});
i$(function pj_keys(){var result;result=Array.pj_new();this.pj_keysDo_(function(key){return $asNil$(result).pj_addLast_(key)});return result});
i$(function pj_keysAndValuesDo_(aBlock){for (var i in this){if(this.hasOwnProperty(i))aBlock.pj_value_value_(i,this[i])};
return this;});
i$(function pj_keysDo_(aBlock){for (var i in this){if(this.hasOwnProperty(i))aBlock.pj_value_(i)};
return this;});
i$(function pj_notNil(){return true});
i$(function pj_perform_(selector){return $asNil$(this[(Smalltalk.pj_registerDnu_(selector))]).pj_call_(this)});
i$(function pj_perform_with_(selector,arg){return $asNil$(this[(Smalltalk.pj_registerDnu_(selector))]).pj_call_with_(this,arg)});
i$(function pj_perform_with_with_(selector,arg1,arg2){return $asNil$(this[(Smalltalk.pj_registerDnu_(selector))]).pj_call_with_with_(this,arg1,arg2)});
i$(function pj_perform_with_with_with_(selector,arg1,arg2,arg3){return $asNil$(this[(Smalltalk.pj_registerDnu_(selector))]).pj_call_with_with_with_(this,arg1,arg2,arg3)});
i$(function pj_perform_withArguments_(selector,argArray){return $asNil$(this[(Smalltalk.pj_registerDnu_(selector))]).pj_apply_with_(this,argArray)});
i$(function pj_perform_withArguments_inSuperclass_(selector,argArray,lookupClass){return $asNil$(($asNil$(lookupClass).pj_prototype())[(Smalltalk.pj_registerDnu_(selector))]).pj_apply_with_(this,argArray)});
i$(function pj_postCopy(){return this});
i$(function pj_printOn_(aStream){var title,$1;title=$asNil$(this.pj_class()).pj_name();$1=$asNil$(aStream);$1.pj_nextPutAll_(true==$asNil$($asNil$(title).pj_first()).pj_isVowel()?"an ":"a ");$1.pj_nextPutAll_(title);return this});
i$(function pj_printString(){var $_self_$=this;return String.pj_streamContents_(function(stream){return $_self_$.pj_printOn_(stream)})});
i$(function pj_proxyResponse(){var assoc,p;assoc=PjProxyManager.pj_ensureObjectRegistered_(this);p=PjProxyInfo.pj_new();$asNil$(p).pj_oid_($asNil$(assoc).pj_key());$asNil$(p).pj_remove_(this.pj_instVarNamed_("$PjProxyRemove"));$asNil$(p).pj_globalName_($asNil$(assoc).pj_value());return p});
i$(function pj_release(){return this});
i$(function pj_removeKey_(key){var result=this[key];delete this[key];return result});
i$(function pj_respondsTo_(aSymbol){return $asNil$(this.pj_class()).pj_canUnderstand_(aSymbol)});
i$(function pj_serializationArray(){return [this.pj_className(),this.pj_serializationContents()]});
i$(function pj_serializationContents(){var serializable;serializable=Array.pj_new();this.pj_keysAndValuesDo_(function(key,value){$asNil$(serializable).pj_add_(key);return $asNil$(serializable).pj_add_($asNil$(value).pj_serializationArray())});return serializable});
i$(function pj_serialize(){return $asNil$(this.pj_serializationArray()).pj_asJSON()});
i$(function pj_setTimeout_afterMilliseconds_(aBlock,anInteger){global.setTimeout(aBlock, anInteger)});
i$(function pj_shallowCopy(){var copy;copy=$asNil$(this.pj_class()).pj_basicNew();this.pj_keysAndValuesDo_(function(key,value){return $asNil$(copy).pj_instVarNamed_put_(key,value)});return copy});
i$(function pj_shouldBePrintedAsLiteral(){return this.pj_isLiteral()});
i$(function pj_size(){var count;count=0;this.pj_keysDo_(function(value){return count=count+1});return count});
i$(function pj_species(){return this.pj_class()});
i$(function pj_typeof(){return typeof this});
i$(function pj_typeof_(anObject){return typeof anObject});
i$(function pj_value(){var $_self_$=this;return Smalltalk.pj_installDnuArgs_selector_js_for_else_([],"value",$asNil$(Smalltalk.pj_pharoJsSelectorPrefix()).pj_44_("value"),this,function(){return $_self_$})});
i$(function pj_valuesDo_(aBlock){for (var i in this){if(this.hasOwnProperty(i))aBlock.pj_value_(this[i])};
return this;});
i$(function pj_writePhxJsonObjectOn_(w){var $_self_$=this;return $asNil$(w).pj_doBetweenCurlyBraces_(function(){$asNil$(w).pj_writeKeyName_andValue_("class",$asNil$($_self_$.pj_class()).pj_phxJsonClassName());$asNil$(w).pj_comma();return $asNil$(w).pj_writeKeyName_andValue_("instance",function(){return $_self_$.pj_writePhxJsonRepresentationOn_(w)})})});
i$(function pj_writePhxJsonOn_(w){var $_self_$=this;$asNil$(w).pj_writeReferenceFor_or_(this,function(){return $_self_$.pj_writePhxJsonObjectOn_(w)});return this});
i$(function pj_writePhxJsonRepresentationOn_(w){var $_self_$=this;$asNil$(w).pj_doBetweenCurlyBraces_(function(){return $asNil$($asNil$($_self_$.pj_allPhxJsonInstvarNames()).pj_asSortedCollection()).pj_do_separatedBy_(function(key){return $asNil$(w).pj_writeKeyName_andValue_(key,function(){return $asNil$($_self_$.pj_instVarNamed_(key)).pj_writePhxJsonOn_(w)})},function(){return $asNil$(w).pj_comma()})});return this});
i$(function pj_yourself(){return this});
i$(function pj_126_61_(other){return $asNil$((this==other)).pj_not()});
i$(function pj_126_126_(other){return $asNil$((this===other)).pj_not()});
c$(function pj_addDnuSupportFor_(selector){if(Object.prototype.hasOwnProperty(selector)){return;}
Object.prototype.selector =  function(){
throw "Does not understand message " + selector;};});
c$(function pj_instantiateWithPhxJsonReader_instanceJsonObject_(reader,jsonObject){var obj;obj=this.pj_new();$asNil$(reader).pj_addKnownObject_(obj);$asNil$(jsonObject).pj_keysAndValuesDo_(function(k,v){return $asNil$(obj).pj_instVarNamed_put_(k,$asNil$(reader).pj_readFromJsObjectOrDictionary_(v))});return obj});
c$(function pj_newFrom_(aDict){var newDictionary,$_self_$=this;newDictionary=this.pj_new_($asNil$(aDict).pj_size());$asNil$(aDict).pj_associationsDo_(function(x){if(true==$asNil$(newDictionary).pj_includesKey_($asNil$(x).pj_key())){return $_self_$.pj_error_("Duplicate key: "+$asNil$($asNil$(x).pj_key()).pj_printString())}else{return $asNil$(newDictionary).pj_add_(x)}});return newDictionary});
c$(function pj_newFromMaterialized_(serializationArray){var restored,ivIndex;restored=this.pj_new();ivIndex=1;while(ivIndex<=$asNil$(serializationArray).pj_size()){$asNil$(restored).pj_instVarNamed_put_($asNil$(serializationArray).pj_at_(ivIndex),$asNil$($asNil$(serializationArray).pj_at_(ivIndex+1)).pj_materialize());ivIndex=ivIndex+2}return restored});
c$(function pj_newFromPairs_(anArray){var newDictionary;newDictionary=this.pj_new_($asNil$($asNil$(anArray).pj_size()).pj_47_(2));(1).pj_to_by_do_($asNil$(anArray).pj_size()-1,2,function(i){return $asNil$(newDictionary).pj_at_put_($asNil$(anArray).pj_at_(i),$asNil$(anArray).pj_at_(i+1))});return newDictionary});
c$(function pj_newPhxJsonWriter(){return PhxJsonWriter.pj_new()});
c$(function pj_nextIdentityHash(){var $1;return this.nextIdentityHash=$asNil$((($1=this.nextIdentityHash)==null?12345:$1)).pj_hashMultiply()});
c$(function pj_phxJsonClassName(){return this.pj_name()});
});
Object.pj_subclass_("PjDomController");
PjDomController.$$def(function(i$,c$,cp$){
i$(function pj_addElement_(tagString){return this.pj_addElement_to_(tagString,this.pj_body())});
i$(function pj_addElement_style_(tagString,cssStyleAssociations){return this.pj_addElement_to_style_(tagString,this.pj_body(),cssStyleAssociations)});
i$(function pj_addElement_to_(tagString,parentNode){var newElement;newElement=this.pj_createElement_(tagString);$asNil$(parentNode).pj_appendChild_(newElement);return newElement});
i$(function pj_addElement_to_style_(tagString,parentNode,cssStyleAssociations){var newElement;newElement=this.pj_createElement_style_(tagString,cssStyleAssociations);$asNil$(parentNode).pj_appendChild_(newElement);return newElement});
i$(function pj_attribute_at_(attributeName,elementId){return this.pj_attribute_ofElement_(attributeName,this.pj_elementAt_(elementId))});
i$(function pj_attribute_at_set_(attributeName,elementId,attributeValue){this.pj_attribute_ofElement_set_(attributeName,this.pj_elementAt_(elementId),attributeValue);return this});
i$(function pj_attribute_ofElement_(attributeName,domElement){return $asNil$(domElement).pj_getAttribute_(attributeName)});
i$(function pj_attribute_ofElement_set_(attributeName,domElement,attributeValue){$asNil$(domElement).pj_setAttribute_to_(attributeName,attributeValue);return this});
i$(function pj_body(){return $asNil$(this.pj_document()).pj_body()});
i$(function pj_createElement_(tagString){return $asNil$(this.pj_document()).pj_createElement_(tagString)});
i$(function pj_createElement_style_(tagString,cssStyleAssociations){var newElement;newElement=$asNil$(this.pj_document()).pj_createElement_(tagString);this.pj_setElement_style_(newElement,cssStyleAssociations);return newElement});
i$(function pj_cssClassesAddAll_element_(newClasses,domElement){this.pj_cssClassesReplaceAll_byAll_element_([],newClasses,domElement);return this});
i$(function pj_cssClassesElement_(domElement){return " ".pj_split_(this.pj_cssClassesStringElement_(domElement))});
i$(function pj_cssClassesElement_set_(domElement,cssClasses){var classString;classString="";$asNil$(cssClasses).pj_do_(function(each){return classString=$asNil$($asNil$(classString).pj_44_(" ")).pj_44_(each)});this.pj_cssClassesStringElement_set_(domElement,classString);return this});
i$(function pj_cssClassesRemoveAll_element_(oldCssClasses,domElement){this.pj_cssClassesReplaceAll_byAll_element_(oldCssClasses,[],domElement);return this});
i$(function pj_cssClassesReplaceAll_byAll_element_(oldCssClasses,newClasses,domElement){var cssClasses;cssClasses=this.pj_cssClassesElement_(domElement);$asNil$(oldCssClasses).pj_do_(function(each){return $asNil$(cssClasses).pj_remove_ifAbsent_(each,null)});$asNil$(cssClasses).pj_addAll_(newClasses);this.pj_cssClassesElement_set_(domElement,cssClasses);return this});
i$(function pj_cssClassesString_(elementId){return this.pj_cssClassesStringElement_(this.pj_elementAt_(elementId))});
i$(function pj_cssClassesString_set_(elementId,attributeValue){return this.pj_attribute_at_set_("class",elementId,attributeValue)});
i$(function pj_cssClassesStringElement_(domElement){var $1;if(($1=this.pj_attribute_ofElement_("class",domElement))==null){return "";}else{return $1}});
i$(function pj_cssClassesStringElement_set_(domElement,newClassesString){this.pj_attribute_ofElement_set_("class",domElement,newClassesString);return this});
i$(function pj_document(){return document});
i$(function pj_document(){return document});
i$(function pj_elementAt_(elementId){return $asNil$(this.pj_document()).pj_getElementById_(elementId)});
i$(function pj_elementAt_in_(childId,container){return $asNil$(container).pj_querySelector_("#"+childId)});
i$(function pj_hide_(domElement){$asNil$($asNil$(domElement).pj_style()).pj_display_("none");return this});
i$(function pj_hideElementAt_in_(domElementId,container){this.pj_show_elementAt_in_(false,domElementId,container);return this});
i$(function pj_innerHtmlAt_(elementId){return $asNil$(this.pj_elementAt_(elementId)).pj_innerHTML()});
i$(function pj_innerHtmlAt_set_(elementId,aString){$asNil$(this.pj_elementAt_(elementId)).pj_innerHTML_(aString);return this});
i$(function pj_onChange_do_(elementId,aBlock){this.pj_onChange_in_do_(elementId,this.pj_body(),aBlock);return this});
i$(function pj_onChange_in_do_(elementId,container,aBlock){var element;element=this.pj_elementAt_in_(elementId,container);this.pj_onChangeElement_do_(element,aBlock);return this});
i$(function pj_onChangeElement_do_(element,aBlock){$asNil$(element).pj_addEventListener_block_("change",function(){return $asNil$(aBlock).pj_cull_cull_($asNil$(element).pj_value(),element)});return this});
i$(function pj_onClick_do_(elementId,aBlock){this.pj_onClick_in_do_(elementId,this.pj_body(),aBlock);return this});
i$(function pj_onClick_in_do_(elementId,container,aBlock){var element;element=this.pj_elementAt_in_(elementId,container);this.pj_onClickElement_do_(element,aBlock);return this});
i$(function pj_onClickElement_do_(element,aBlock){$asNil$(element).pj_addEventListener_block_("click",function(){return $asNil$(aBlock).pj_cull_(element)});return this});
i$(function pj_onEvent_for_in_do_(eventId,elementId,container,aBlock){var element;element=this.pj_elementAt_in_(elementId,container);$asNil$(element).pj_addEventListener_block_(eventId,aBlock);return this});
i$(function pj_onKeyUp_do_(elementId,aBlock){this.pj_onKeyUp_in_do_(elementId,this.pj_body(),aBlock);return this});
i$(function pj_onKeyUp_in_do_(elementId,container,aBlock){var element;element=this.pj_elementAt_in_(elementId,container);this.pj_onKeyUpElement_do_(element,aBlock);return this});
i$(function pj_onKeyUpElement_do_(element,aBlock){$asNil$(element).pj_addEventListener_block_("keyup",function(){return $asNil$(aBlock).pj_cull_cull_($asNil$(element).pj_value(),element)});return this});
i$(function pj_setElement_style_(domElement,cssStyleAssociations){var style;style=$asNil$(domElement).pj_style();$asNil$($asNil$(cssStyleAssociations).pj_asDictionary()).pj_keysAndValuesDo_(function(key,value){return $asNil$(style).pj_at_put_(key,value)});return this});
i$(function pj_show_(domElement){$asNil$($asNil$(domElement).pj_style()).pj_display_("");return this});
i$(function pj_show_element_(aBoolean,domElement){if(true==aBoolean){return this.pj_show_(domElement)};this.pj_hide_(domElement);return this});
i$(function pj_show_elementAt_in_(aBoolean,domElementId,container){var element;element=this.pj_elementAt_in_(domElementId,container);this.pj_show_element_(aBoolean,element);return this});
i$(function pj_showElementAt_in_(domElementId,container){this.pj_show_elementAt_in_(true,domElementId,container);return this});
c$(function pj_addElement_(tagString){return this.pj_addElement_to_(tagString,this.pj_body())});
c$(function pj_addElement_style_(tagString,cssStyleAssociations){return this.pj_addElement_to_style_(tagString,this.pj_body(),cssStyleAssociations)});
c$(function pj_addElement_to_(tagString,parentNode){var newElement;newElement=this.pj_createElement_(tagString);$asNil$(parentNode).pj_appendChild_(newElement);return newElement});
c$(function pj_addElement_to_style_(tagString,parentNode,cssStyleAssociations){var newElement;newElement=this.pj_createElement_style_(tagString,cssStyleAssociations);$asNil$(parentNode).pj_appendChild_(newElement);return newElement});
c$(function pj_attribute_at_(attributeName,elementId){return this.pj_attribute_ofElement_(attributeName,this.pj_elementAt_(elementId))});
c$(function pj_attribute_at_set_(attributeName,elementId,attributeValue){this.pj_attribute_ofElement_set_(attributeName,this.pj_elementAt_(elementId),attributeValue);return this});
c$(function pj_attribute_ofElement_(attributeName,domElement){return $asNil$(domElement).pj_getAttribute_(attributeName)});
c$(function pj_attribute_ofElement_set_(attributeName,domElement,attributeValue){$asNil$(domElement).pj_setAttribute_to_(attributeName,attributeValue);return this});
c$(function pj_body(){return $asNil$(this.pj_document()).pj_body()});
c$(function pj_createElement_(tagString){return $asNil$(this.pj_document()).pj_createElement_(tagString)});
c$(function pj_createElement_style_(tagString,cssStyleAssociations){var newElement;newElement=$asNil$(this.pj_document()).pj_createElement_(tagString);this.pj_setElement_style_(newElement,cssStyleAssociations);return newElement});
c$(function pj_cssClassesAddAll_element_(newClasses,domElement){this.pj_cssClassesReplaceAll_byAll_element_([],newClasses,domElement);return this});
c$(function pj_cssClassesElement_(domElement){return " ".pj_split_(this.pj_cssClassesStringElement_(domElement))});
c$(function pj_cssClassesElement_set_(domElement,cssClasses){var classString;classString="";$asNil$(cssClasses).pj_do_(function(each){return classString=$asNil$($asNil$(classString).pj_44_(" ")).pj_44_(each)});this.pj_cssClassesStringElement_set_(domElement,classString);return this});
c$(function pj_cssClassesRemoveAll_element_(oldCssClasses,domElement){this.pj_cssClassesReplaceAll_byAll_element_(oldCssClasses,[],domElement);return this});
c$(function pj_cssClassesReplaceAll_byAll_element_(oldCssClasses,newClasses,domElement){var cssClasses;cssClasses=this.pj_cssClassesElement_(domElement);$asNil$(oldCssClasses).pj_do_(function(each){return $asNil$(cssClasses).pj_remove_ifAbsent_(each,null)});$asNil$(cssClasses).pj_addAll_(newClasses);this.pj_cssClassesElement_set_(domElement,cssClasses);return this});
c$(function pj_cssClassesString_(elementId){return this.pj_cssClassesStringElement_(this.pj_elementAt_(elementId))});
c$(function pj_cssClassesString_set_(elementId,attributeValue){return this.pj_attribute_at_set_("class",elementId,attributeValue)});
c$(function pj_cssClassesStringElement_(domElement){var $1;if(($1=this.pj_attribute_ofElement_("class",domElement))==null){return "";}else{return $1}});
c$(function pj_cssClassesStringElement_set_(domElement,newClassesString){this.pj_attribute_ofElement_set_("class",domElement,newClassesString);return this});
c$(function pj_document(){return document});
c$(function pj_document(){return document});
c$(function pj_elementAt_(elementId){return $asNil$(this.pj_document()).pj_getElementById_(elementId)});
c$(function pj_elementAt_in_(childId,container){return $asNil$(container).pj_querySelector_("#"+childId)});
c$(function pj_hide_(domElement){$asNil$($asNil$(domElement).pj_style()).pj_display_("none");return this});
c$(function pj_hideElementAt_in_(domElementId,container){this.pj_show_elementAt_in_(false,domElementId,container);return this});
c$(function pj_innerHtmlAt_(elementId){return $asNil$(this.pj_elementAt_(elementId)).pj_innerHTML()});
c$(function pj_innerHtmlAt_set_(elementId,aString){$asNil$(this.pj_elementAt_(elementId)).pj_innerHTML_(aString);return this});
c$(function pj_onChange_do_(elementId,aBlock){this.pj_onChange_in_do_(elementId,this.pj_body(),aBlock);return this});
c$(function pj_onChange_in_do_(elementId,container,aBlock){var element;element=this.pj_elementAt_in_(elementId,container);this.pj_onChangeElement_do_(element,aBlock);return this});
c$(function pj_onChangeElement_do_(element,aBlock){$asNil$(element).pj_addEventListener_block_("change",function(){return $asNil$(aBlock).pj_cull_cull_($asNil$(element).pj_value(),element)});return this});
c$(function pj_onClick_do_(elementId,aBlock){this.pj_onClick_in_do_(elementId,this.pj_body(),aBlock);return this});
c$(function pj_onClick_in_do_(elementId,container,aBlock){var element;element=this.pj_elementAt_in_(elementId,container);this.pj_onClickElement_do_(element,aBlock);return this});
c$(function pj_onClickElement_do_(element,aBlock){$asNil$(element).pj_addEventListener_block_("click",function(){return $asNil$(aBlock).pj_cull_(element)});return this});
c$(function pj_onEvent_for_in_do_(eventId,elementId,container,aBlock){var element;element=this.pj_elementAt_in_(elementId,container);$asNil$(element).pj_addEventListener_block_(eventId,aBlock);return this});
c$(function pj_onKeyUp_do_(elementId,aBlock){this.pj_onKeyUp_in_do_(elementId,this.pj_body(),aBlock);return this});
c$(function pj_onKeyUp_in_do_(elementId,container,aBlock){var element;element=this.pj_elementAt_in_(elementId,container);this.pj_onKeyUpElement_do_(element,aBlock);return this});
c$(function pj_onKeyUpElement_do_(element,aBlock){$asNil$(element).pj_addEventListener_block_("keyup",function(){return $asNil$(aBlock).pj_cull_cull_($asNil$(element).pj_value(),element)});return this});
c$(function pj_setElement_style_(domElement,cssStyleAssociations){var style;style=$asNil$(domElement).pj_style();$asNil$($asNil$(cssStyleAssociations).pj_asDictionary()).pj_keysAndValuesDo_(function(key,value){return $asNil$(style).pj_at_put_(key,value)});return this});
c$(function pj_show_(domElement){$asNil$($asNil$(domElement).pj_style()).pj_display_("");return this});
c$(function pj_show_element_(aBoolean,domElement){if(true==aBoolean){return this.pj_show_(domElement)};this.pj_hide_(domElement);return this});
c$(function pj_show_elementAt_in_(aBoolean,domElementId,container){var element;element=this.pj_elementAt_in_(domElementId,container);this.pj_show_element_(aBoolean,element);return this});
c$(function pj_showElementAt_in_(domElementId,container){this.pj_show_elementAt_in_(true,domElementId,container);return this});
});
Object.pj_subclass_("Array");
Array.$$def(function(i$,c$,cp$){
i$(function pj_44_(other){var $1;return ($1=$asNil$($asNil$(this.pj_class()).pj_new()),$1.pj_addAll_(this),$1.pj_addAll_(other),$1.pj_yourself())});
i$(function pj_61_(anArray){var $_err_$={};try{if(this===anArray){return true};if(false==$asNil$(anArray).pj_isKindOf_(Array)){return false};if(false==$asNil$(this.pj_size()).pj_61_($asNil$(anArray).pj_size())){return false};this.pj_with_do_(anArray,function(myElement,otherElement){if(true==$asNil$(myElement).pj_61_(otherElement)){return null}else{throw $_err_$=false}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_add_(x){return this.pj_addLast_(x)});
i$(function pj_addAll_(aCollection){var $_self_$=this;$asNil$(aCollection).pj_do_(function(each){return $_self_$.pj_add_(each)});return aCollection});
i$(function pj_addAllLast_(aCollection){var $_self_$=this;$asNil$(aCollection).pj_do_(function(each){return $_self_$.pj_addLast_(each)});return aCollection});
i$(function pj_addFirst_(x){this.unshift(x);return x});
i$(function pj_addLast_(x){this.push(x);return x});
i$(function pj_allButFirst(){return this.pj_allButFirst_(1)});
i$(function pj_allButFirst_(n){return this.pj_copyFrom_to_(n+1,this.pj_size())});
i$(function pj_allButLast(){return this.pj_allButLast_(1)});
i$(function pj_allButLast_(n){return this.pj_copyFrom_to_(1,$asNil$(this.pj_size()).pj_45_(n))});
i$(function pj_allSatisfy_(aBlock){var $_err_$={};try{this.pj_do_(function(each){if(true==$asNil$(aBlock).pj_value_(each)){return null}else{throw $_err_$=false}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_anySatisfy_(aBlock){var $_err_$={};try{this.pj_do_(function(each){if(true==$asNil$(aBlock).pj_value_(each)){throw $_err_$=true}else{return null}});return false}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_appendTo_(aCollection){return $asNil$(aCollection).pj_addAllLast_(this)});
i$(function pj_asArray(){return Array.pj_from_(this)});
i$(function pj_asDictionary(){return this.pj_as_(PjDictionary)});
i$(function pj_asJsObject(){var jsObject;if(true==this.pj_isEmpty()){return this};if(false==$asNil$(this.pj_first()).pj_isKindOf_(PjAssociation)){return this.pj_collect_(function(each){return $asNil$(each).pj_asJsObject()})};jsObject=Object.pj_new();this.pj_do_(function(association){return $asNil$(jsObject).pj_at_put_($asNil$(association).pj_key(),$asNil$($asNil$(association).pj_value()).pj_asJsObject())});return jsObject});
i$(function pj_asOrderedCollection(){return this.pj_as_(Array)});
i$(function pj_asSet(){return PjSet.pj_withAll_(this)});
i$(function pj_asSortedCollection(){var $1;return ($1=$asNil$(PjSortedCollection.pj_new()),$1.pj_addAll_(this),$1.pj_yourself())});
i$(function pj_asString(){return $asNil$(String.pj_new_(this.pj_size())).pj_replaceFrom_to_with_(1,this.pj_size(),this)});
i$(function pj_associationsDo_(aBlock){this.pj_do_(aBlock);return this});
i$(function pj_at_(i){return this[i-1]});
i$(function pj_at_ifAbsent_(index,aBlock){if(true==(index>0&&index>this.pj_size())){return $asNil$(aBlock).pj_value()};return this.pj_at_(index)});
i$(function pj_at_put_(i,x){return this[i-1]=x});
i$(function pj_atRandom(){var randomIndex = Math.floor((Math.random() * this.pj_size()) + 1);
return this.pj_at_(randomIndex);});
i$(function pj_collect_(aBlock){var result=[];for(var i=0,max=this.length;i<max;++i)result.push(typeof aBlock=="string"?$asNil$(this[i]).pj_perform_(aBlock):aBlock(this[i]));return result});
i$(function pj_copyFrom_to_(start,stop){var newSize;newSize=$asNil$(stop).pj_45_(start)+1;return $asNil$($asNil$(this.pj_species()).pj_new_(newSize)).pj_replaceFrom_to_with_startingAt_(1,newSize,this,start)});
i$(function pj_copyReplaceFrom_to_with_(start,stop,replacementCollection){var newSequenceableCollection,newSize,endReplacement;newSize=$asNil$($asNil$(this.pj_size()).pj_45_($asNil$(stop).pj_45_(start)+1)).pj_43_($asNil$(replacementCollection).pj_size());endReplacement=$asNil$((start-1)).pj_43_($asNil$(replacementCollection).pj_size());newSequenceableCollection=$asNil$(this.pj_species()).pj_new_(newSize);if(start>1){$asNil$(newSequenceableCollection).pj_replaceFrom_to_with_startingAt_(1,start-1,this,1)};if(start<=endReplacement){$asNil$(newSequenceableCollection).pj_replaceFrom_to_with_startingAt_(start,endReplacement,replacementCollection,1)};if(endReplacement<newSize){$asNil$(newSequenceableCollection).pj_replaceFrom_to_with_startingAt_(endReplacement+1,newSize,this,stop+1)};return newSequenceableCollection});
i$(function pj_copyWith_(newElement){var newIC;newIC=$asNil$(this.pj_species()).pj_new_(this.pj_size()+1);$asNil$(newIC).pj_replaceFrom_to_with_startingAt_(1,this.pj_size(),this,1);$asNil$(newIC).pj_at_put_($asNil$(newIC).pj_size(),newElement);return newIC});
i$(function pj_copyWithFirst_(newElement){var newIC;newIC=$asNil$(this.pj_species()).pj_ofSize_(this.pj_size()+1);$asNil$(newIC).pj_replaceFrom_to_with_startingAt_(2,this.pj_size()+1,this,1);$asNil$(newIC).pj_at_put_(1,newElement);return newIC});
i$(function pj_copyWithoutIndex_(index){var copy;copy=$asNil$(this.pj_species()).pj_ofSize_(this.pj_size()-1);$asNil$(copy).pj_replaceFrom_to_with_startingAt_(1,index-1,this,1);$asNil$(copy).pj_replaceFrom_to_with_startingAt_(index,$asNil$(copy).pj_size(),this,index+1);return copy});
i$(function pj_detect_ifFound_(aBlock,foundBlock){this.pj_detect_ifFound_ifNone_(aBlock,foundBlock,function(){return null});return this});
i$(function pj_detect_ifFound_ifNone_(aBlock,foundBlock,exceptionBlock){var $_err_$={};try{this.pj_do_(function(each){if(true==$asNil$(aBlock).pj_value_(each)){throw $_err_$=$asNil$(foundBlock).pj_cull_(each)}else{return null}});return $asNil$(exceptionBlock).pj_value()}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_detect_ifNone_(aBlock,exceptionBlock){return this.pj_detect_ifFound_ifNone_(aBlock,function(element){return element},exceptionBlock)});
i$(function pj_do_(aBlock){for(var i=0,max=this.length;i<max;++i)aBlock(this[i]);return this});
i$(function pj_do_separatedBy_(elementBlock,separatorBlock){for(var i=0,max=this.length;i<max;++i){if(i)separatorBlock();elementBlock(this[i])};return this});
i$(function pj_doWithIndex_(elementAndIndexBlock){return this.pj_withIndexDo_(elementAndIndexBlock)});
i$(function pj_eighth(){return this[7]});
i$(function pj_fifth(){return this[4]});
i$(function pj_first(){return this[0]});
i$(function pj_first_(n){return this.slice(0,n)});
i$(function pj_fourth(){return this[3]});
i$(function pj_from_to_put_(startIndex,endIndex,anObject){var written,toWrite,thisWrite;if(startIndex>endIndex){return this};this.pj_at_put_(startIndex,anObject);written=1;toWrite=$asNil$(endIndex).pj_45_(startIndex)+1;while(written<toWrite){thisWrite=$asNil$(written).pj_min_($asNil$(toWrite).pj_45_(written));this.pj_replaceFrom_to_with_startingAt_($asNil$(startIndex).pj_43_(written),$asNil$($asNil$(startIndex).pj_43_(written)).pj_43_(thisWrite)-1,this,startIndex);written=$asNil$(written).pj_43_(thisWrite)}return anObject});
i$(function pj_grownBy_(length){var newCollection,size;size=this.pj_size();newCollection=$asNil$(this.pj_species()).pj_ofSize_($asNil$(size).pj_43_(length));$asNil$(newCollection).pj_replaceFrom_to_with_startingAt_(1,size,this,1);return newCollection});
i$(function pj_ifEmpty_(aBlock){if(true==this.pj_isEmpty()){return $asNil$(aBlock).pj_value()};return this});
i$(function pj_includes_(x){if (x.pj_isJSPrimitiveType()) {
if (this.includes(x)) return true;
for(var i=this.length-1;i>=0;--i) if (x==this[i]) return true;
return false}
for(var i=this.length-1;i>=0;--i) if (x.pj_61_(this[i])) return true;
return false});
i$(function pj_includesAll_(aCollection){var $_self_$=this;var $_err_$={};try{$asNil$(aCollection).pj_do_(function(elem){if(true==$_self_$.pj_includes_(elem)){return null}else{throw $_err_$=false}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_indexOf_(x){return this.indexOf(x)+1});
i$(function pj_indexOf_startingAt_(x,n){return this.indexOf(x,n-1)+1});
i$(function pj_inject_into_(thisValue,binaryBlock){var nextValue;nextValue=thisValue;this.pj_do_(function(each){return nextValue=$asNil$(binaryBlock).pj_value_value_(nextValue,each)});return nextValue});
i$(function pj_insert_before_(anObject,spot){this.splice(spot-1, 0, anObject);return anObject});
i$(function pj_isArray(){return true});
i$(function pj_isCollection(){return true});
i$(function pj_isEmpty(){return this.pj_size()==0});
i$(function pj_isEmptyOrNil(){return this.pj_isEmpty()});
i$(function pj_isLiteral(){if(this.pj_class()===Array){return this.pj_allSatisfy_(function(each){return $asNil$(each).pj_isLiteral()})}else{return false}});
i$(function pj_isSelfEvaluating(){if(true==this.pj_allSatisfy_(function(each){return $asNil$(each).pj_isSelfEvaluating()})){return this.pj_class()===Array}else{return false}});
i$(function pj_join_(aCollection){var result,$_self_$=this;result=$asNil$(this.pj_class()).pj_new();$asNil$(aCollection).pj_do_separatedBy_(function(each){return $asNil$(each).pj_appendTo_(result)},function(){return $_self_$.pj_appendTo_(result)});return result});
i$(function pj_last(){return this[this.length-1]});
i$(function pj_last_(n){return this.slice(this.length-n)});
i$(function pj_materialize(){return PjMaterializer.pj_materializeFromArray_(this)});
i$(function pj_ninth(){return this[8]});
i$(function pj_noneSatisfy_(aBlock){var $_err_$={};try{this.pj_do_(function(item){if(true==$asNil$(aBlock).pj_value_(item)){throw $_err_$=false}else{return null}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_notEmpty(){return this.length!=0});
i$(function pj_printAsLiteralFormOn_(aStream){$asNil$(aStream).pj_nextPut_("#");this.pj_printElementsOn_(aStream);return this});
i$(function pj_printAsSelfEvaluatingFormOn_(aStream){$asNil$(aStream).pj_nextPut_("{");this.pj_do_separatedBy_(function(el){return $asNil$(el).pj_printOn_(aStream)},function(){return $asNil$(aStream).pj_nextPutAll_(". ")});$asNil$(aStream).pj_nextPut_("}");return this});
i$(function pj_printElementsOn_(aStream){$asNil$(aStream).pj_nextPut_("(");this.pj_do_separatedBy_(function(element){return $asNil$(aStream).pj_print_(element)},function(){return $asNil$(aStream).pj_space()});$asNil$(aStream).pj_nextPut_(")");return this});
i$(function pj_printNameOn_(aStream){Object.prototype.pj_printOn_.call(this,aStream);return this});
i$(function pj_printOn_(aStream){if(true==this.pj_shouldBePrintedAsLiteral()){this.pj_printAsLiteralFormOn_(aStream);return this};if(true==this.pj_isSelfEvaluating()){this.pj_printAsSelfEvaluatingFormOn_(aStream);return this};this.pj_printNameOn_(aStream);this.pj_printElementsOn_(aStream);return this});
i$(function pj_putOn_(aStream){this.pj_do_(function(each){return $asNil$(each).pj_putOn_(aStream)});return this});
i$(function pj_readStream(){return PjArrayStream.pj_on_(this)});
i$(function pj_reject_(aBlock){return this.pj_select_(function(element){return $asNil$(aBlock).pj_value_(element)===false})});
i$(function pj_remove_(oldObject){var $_self_$=this;return this.pj_remove_ifAbsent_(oldObject,function(){return $_self_$.pj_errorNotFound_(oldObject)})});
i$(function pj_remove_ifAbsent_(oldObject,absentBlock){var index;index=this.pj_findIndex_(function(each){return $asNil$(oldObject).pj_61_(each)});if(index>=0){return this.pj_removeAt_(index+1)};return $asNil$(absentBlock).pj_value()});
i$(function pj_removeAll(){var $2,$1;for(var $1=1,$2=this.pj_size();$1<=$2;++$1){this.pj_removeFirst()}return this});
i$(function pj_removeAll_(aCollection){var $_self_$=this;if(aCollection===this){return this.pj_removeAll()};$asNil$(aCollection).pj_do_(function(each){return $_self_$.pj_remove_(each)});return aCollection});
i$(function pj_removeAt_(aNumber){var result=this[aNumber-1];this.splice(aNumber - 1,1);return result});
i$(function pj_removeFirst(){return this.shift()});
i$(function pj_removeLast(){return this.pop()});
i$(function pj_replaceFrom_to_with_(start,stop,replacement){if(false==$asNil$($asNil$(replacement).pj_size()).pj_61_($asNil$(stop).pj_45_(start)+1)){this.pj_error_("Size of replacement doesnt match")};return this.pj_replaceFrom_to_with_startingAt_(start,stop,replacement,1)});
i$(function pj_replaceFrom_to_with_startingAt_(start,stop,replacement,repStart){for(var mine=stop-1,other=mine+repStart-start;
mine>=start-1;
--other,--mine
)this[mine]=replacement[other];return this});
i$(function pj_reverseDo_(aBlock){var $_self_$=this;$asNil$(this.pj_size()).pj_to_by_do_(1,-1,function(index){return $asNil$(aBlock).pj_value_($_self_$.pj_at_(index))});return this});
i$(function pj_reversed(){return $asNil$(this.pj_asArray()).pj_reverse()});
i$(function pj_second(){return this[1]});
i$(function pj_select_(aBlock){var result=[];for(var i=0,max=this.length;i<max;++i){if(true==(typeof aBlock=="string"?$asNil$(this[i]).pj_perform_(aBlock):aBlock(this[i])))result.push(this[i])}return result});
i$(function pj_serializationContents(){var serializableElements;serializableElements=Array.pj_new();this.pj_do_(function(each){return $asNil$(serializableElements).pj_add_($asNil$(each).pj_serializationArray())});return serializableElements});
i$(function pj_seventh(){return this[6]});
i$(function pj_shouldBePrintedAsLiteral(){if(this.pj_class()===Array){return this.pj_allSatisfy_(function(each){return $asNil$(each).pj_shouldBePrintedAsLiteral()})}else{return false}});
i$(function pj_sixth(){return this[5]});
i$(function pj_size(){return this.length});
i$(function pj_third(){return this[2]});
i$(function pj_with_do_(otherCollection,aBlock){for(var i=0,max=this.length;i<max;++i)aBlock(this[i],otherCollection[i]);return this});
i$(function pj_withIndexDo_(aBlock){for(var i=0,max=this.length;i<max;++i)aBlock(this[i],i+1);return this});
i$(function pj_writePhxJsonRepresentationOn_(w){var $_self_$=this;$asNil$(w).pj_doBetweenSquareBrackets_(function(){return $_self_$.pj_do_separatedBy_(function(each){return $asNil$(each).pj_writePhxJsonOn_(w)},function(){return $asNil$(w).pj_comma()})});return this});
i$(function pj_writeStream(){return PjArrayStream.pj_new()});
c$(function pj_instantiateWithPhxJsonReader_instanceJsonObject_(reader,jsonObject){var resultCollection,elements,$1;resultCollection=this.pj_new_($asNil$(jsonObject).pj_size());$asNil$(reader).pj_addKnownObject_(resultCollection);elements=$asNil$(jsonObject).pj_collect_(function(each){return $asNil$(reader).pj_readFromJsObjectOrDictionary_(each)});return ($1=$asNil$(resultCollection),$1.pj_addAll_(elements),$1.pj_yourself())});
c$(function pj_javascriptInitialize(){$asNil$(Smalltalk).pj_at_put_("OrderedCollection",Array);return this});
c$(function pj_new_(ignored){return this.pj_new()});
c$(function pj_newFrom_(aCollection){var newCollection;newCollection=this.pj_new_($asNil$(aCollection).pj_size());$asNil$(newCollection).pj_addAll_(aCollection);return newCollection});
c$(function pj_newFromMaterialized_(aJsonArray){var materializedArray;materializedArray=this.pj_new();$asNil$(aJsonArray).pj_do_(function(each){return $asNil$(materializedArray).pj_add_($asNil$(each).pj_materialize())});return materializedArray});
c$(function pj_streamContents_(aBlock){var stream;stream=PjArrayStream.pj_new();$asNil$(aBlock).pj_value_(stream);return $asNil$(stream).pj_contents()});
c$(function pj_with_(anObject){return [anObject]});
c$(function pj_with_with_(firstObject,secondObject){return [firstObject,secondObject]});
c$(function pj_with_with_with_(firstObject,secondObject,thirdObject){var newCollection;newCollection=this.pj_new_(3);$asNil$(newCollection).pj_at_put_(1,firstObject);$asNil$(newCollection).pj_at_put_(2,secondObject);$asNil$(newCollection).pj_at_put_(3,thirdObject);return newCollection});
c$(function pj_with_with_with_with_(firstObject,secondObject,thirdObject,fourthObject){var newCollection;newCollection=this.pj_new_(4);$asNil$(newCollection).pj_at_put_(1,firstObject);$asNil$(newCollection).pj_at_put_(2,secondObject);$asNil$(newCollection).pj_at_put_(3,thirdObject);$asNil$(newCollection).pj_at_put_(4,fourthObject);return newCollection});
c$(function pj_withAll_(aCollection){var $1;return ($1=$asNil$(this.pj_new_($asNil$(aCollection).pj_size())),$1.pj_addAll_(aCollection),$1.pj_yourself())});
});
Object.pj_subclass_("Boolean");
Boolean.$$def(function(i$,c$,cp$){
i$(function pj_38_(aBoolean){if(true==this){return aBoolean}else{return false}});
i$(function pj_61_(other){return this==Boolean(other)});
i$(function pj_61_61_(other){return this==other});
i$(function pj_61_61_62_(aBlock){if(true==this.pj_not()){return true}else{return $asNil$(aBlock).pj_value()}});
i$(function pj_and_(aBlock){if(this==true){return aBlock();}else{return false;}});
i$(function pj_asBit(){return this + 0});
i$(function pj_asJsObject(){return this == true});
i$(function pj_asString(){return this + ""});
i$(function pj_eqv_(aBoolean){return this===aBoolean});
i$(function pj_identityHash(){if(this == true){
return 506888448;}
return 726420480});
i$(function pj_ifFalse_(aBlock){return this.pj_ifTrue_ifFalse_(function(){return null},aBlock)});
i$(function pj_ifFalse_ifTrue_(falseBlock,trueBlock){return this.pj_ifTrue_ifFalse_(trueBlock,falseBlock)});
i$(function pj_ifTrue_(aBlock){return this.pj_ifTrue_ifFalse_(aBlock,function(){return null})});
i$(function pj_ifTrue_ifFalse_(trueBlock,falseBlock){if(this==true){return typeof trueBlock=="function"?trueBlock():trueBlock}else{return typeof falseBlock=="function"?falseBlock():falseBlock}});
i$(function pj_isJSPrimitiveType(){return true});
i$(function pj_isLiteral(){return true});
i$(function pj_not(){if(true==this){return false}else{return true}});
i$(function pj_or_(aBlock){if(this==true){return true}else{return aBlock()}});
i$(function pj_printOn_(aStream){$asNil$(aStream).pj_nextPutAll_(this.pj_asString());return this});
i$(function pj_proxyResponse(){return true==this});
i$(function pj_serializationContents(){return this});
i$(function pj_value(){return true==this});
i$(function pj_writePhxJsonOn_(w){$asNil$(w).pj_60_60_(this);return this});
i$(function pj_xor_(aBoolean){if(true==this){return $asNil$($asNil$(aBoolean).pj_value()).pj_not()}else{return $asNil$(aBoolean).pj_value()}});
i$(function pj_124_(aBoolean){if(true==this){return true}else{return aBoolean}});
i$(function pj_126_126_(other){return this!=other});
c$(function pj_newFromMaterialized_(materializedObject){return materializedObject});
});
Object.pj_subclass_("PjCollection");
PjCollection.$$def(function(i$,c$,cp$){
i$(function pj_61_(aMagnitude){return this.pj_subclassResponsibility()});
i$(function pj_61_(aMagnitude){return this.pj_subclassResponsibility()});
i$(function pj_addAll_(aCollection){var $_self_$=this;$asNil$(aCollection).pj_do_(function(each){return $_self_$.pj_add_(each)});return aCollection});
i$(function pj_allSatisfy_(aBlock){var $_err_$={};try{this.pj_do_(function(each){if(true==$asNil$(aBlock).pj_value_(each)){return null}else{throw $_err_$=false}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_anySatisfy_(aBlock){var $_err_$={};try{this.pj_do_(function(each){if(true==$asNil$(aBlock).pj_value_(each)){throw $_err_$=true}else{return null}});return false}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_asDictionary(){return this.pj_as_(PjDictionary)});
i$(function pj_asOrderedCollection(){return this.pj_as_(Array)});
i$(function pj_asSet(){return PjSet.pj_withAll_(this)});
i$(function pj_associationsDo_(aBlock){this.pj_do_(aBlock);return this});
i$(function pj_atRandom(){var randomIndex = Math.floor((Math.random() * this.pj_size()) + 1);
return this.pj_at_(randomIndex);});
i$(function pj_detect_ifFound_(aBlock,foundBlock){this.pj_detect_ifFound_ifNone_(aBlock,foundBlock,function(){return null});return this});
i$(function pj_detect_ifFound_ifNone_(aBlock,foundBlock,exceptionBlock){var $_err_$={};try{this.pj_do_(function(each){if(true==$asNil$(aBlock).pj_value_(each)){throw $_err_$=$asNil$(foundBlock).pj_cull_(each)}else{return null}});return $asNil$(exceptionBlock).pj_value()}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_detect_ifNone_(aBlock,exceptionBlock){return this.pj_detect_ifFound_ifNone_(aBlock,function(element){return element},exceptionBlock)});
i$(function pj_includesAll_(aCollection){var $_self_$=this;var $_err_$={};try{$asNil$(aCollection).pj_do_(function(elem){if(true==$_self_$.pj_includes_(elem)){return null}else{throw $_err_$=false}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_inject_into_(thisValue,binaryBlock){var nextValue;nextValue=thisValue;this.pj_do_(function(each){return nextValue=$asNil$(binaryBlock).pj_value_value_(nextValue,each)});return nextValue});
i$(function pj_isCollection(){return true});
i$(function pj_isEmptyOrNil(){return this.pj_isEmpty()});
i$(function pj_noneSatisfy_(aBlock){var $_err_$={};try{this.pj_do_(function(item){if(true==$asNil$(aBlock).pj_value_(item)){throw $_err_$=false}else{return null}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_reject_(aBlock){return this.pj_select_(function(element){return $asNil$(aBlock).pj_value_(element)===false})});
i$(function pj_remove_(oldObject){var $_self_$=this;return this.pj_remove_ifAbsent_(oldObject,function(){return $_self_$.pj_errorNotFound_(oldObject)})});
i$(function pj_removeAll_(aCollection){var $_self_$=this;if(aCollection===this){return this.pj_removeAll()};$asNil$(aCollection).pj_do_(function(each){return $_self_$.pj_remove_(each)});return aCollection});
i$(function pj_writePhxJsonRepresentationOn_(w){var $_self_$=this;$asNil$(w).pj_doBetweenSquareBrackets_(function(){return $_self_$.pj_do_separatedBy_(function(each){return $asNil$(each).pj_writePhxJsonOn_(w)},function(){return $asNil$(w).pj_comma()})});return this});
c$(function pj_new_(ignored){return this.pj_new()});
c$(function pj_newFrom_(aCollection){var newCollection;newCollection=this.pj_new_($asNil$(aCollection).pj_size());$asNil$(newCollection).pj_addAll_(aCollection);return newCollection});
c$(function pj_withAll_(aCollection){var $1;return ($1=$asNil$(this.pj_new_($asNil$(aCollection).pj_size())),$1.pj_addAll_(aCollection),$1.pj_yourself())});
});
Object.pj_subclass_("Error");
Error.$$def(function(i$,c$,cp$){
i$(function pj_defaultDescription(){var $_self_$=this;return String.pj_streamContents_(function(stream){var mt;$asNil$(stream).pj_60_60_($asNil$($_self_$.pj_class()).pj_name());if(true==$asNil$((mt=$_self_$.pj_messageText())).pj_isEmptyOrNil()){return null}else{return $asNil$($asNil$(stream).pj_60_60_(": ")).pj_60_60_(mt)}})});
i$(function pj_description(){return this.pj_defaultDescription()});
i$(function pj_messageText(){return this.message});
i$(function pj_messageText_(anObject){this.message=anObject;return this});
i$(function pj_signal(){throw this});
i$(function pj_signal_(aString){this.pj_messageText_(aString);return this.pj_signal()});
c$(function pj_javascriptInitialize(){this.pj_instVarNamed_put_("stackTraceLimit",100);return this});
c$(function pj_signal(){return $asNil$(this.pj_new()).pj_signal()});
c$(function pj_signal_(aString){return $asNil$(this.pj_new()).pj_signal_(aString)});
});
Object.pj_subclass_("Function");
Function.$$def(function(i$,c$,cp$){
i$(function pj_assert(){if(false==this.pj_value()){AssertionFailure.pj_signal_("Assertion failed")};return this});
i$(function pj_basicNew(){return new this()});
i$(function pj_basicNew_(arg){return new this(arg)});
i$(function pj_basicNew_with_(arg1,arg2){return new this(arg1, arg2)});
i$(function pj_basicNew_with_with_(arg1,arg2,arg3){return new this(arg1, arg2, arg3)});
i$(function pj_basicNew_with_with_with_(arg1,arg2,arg3,arg4){return new this(arg1, arg2, arg3, arg4)});
i$(function pj_basicNew_with_with_with_with_(arg1,arg2,arg3,arg4,arg5){return new this(arg1, arg2, arg3, arg4, arg5)});
i$(function pj_canUnderstand_(selector){var jsSelector,selct;jsSelector=Smalltalk.pj_makePharoJsSelector_(selector);if((selct=(this.pj_prototype())[jsSelector])==null){return false;}else{return "__DNU"!=selct.name}});
i$(function pj_close(){Smalltalk.pj_log_("unoptimized close may not capture semantics");return this});
i$(function pj_cull_(arg){return this.pj_value_(arg)});
i$(function pj_cull_cull_(arg1,arg2){return this.pj_value_value_(arg1,arg2)});
i$(function pj_cull_cull_cull_(arg1,arg2,arg3){return this.pj_value_value_value_(arg1,arg2,arg3)});
i$(function pj_cull_cull_cull_cul_(arg1,arg2,arg3,arg4){return this.pj_value_value_value_value_(arg1,arg2,arg3,arg4)});
i$(function pj_ensure_(aBlock){try{
return this()
}finally{aBlock()}});
i$(function pj_ifCurtailed_(curtailBlock){var result,curtailed,$_self_$=this;curtailed=true;(function(){result=$_self_$.pj_value();return curtailed=false}).pj_ensure_(function(){if(true==curtailed){return $asNil$(curtailBlock).pj_value()}else{return null}});return result});
i$(function pj_inheritsFrom_(aClass){var aSuperclass;aSuperclass=this.pj_superclass();while(aSuperclass!==null){if(aSuperclass===aClass){return true};aSuperclass=$asNil$(aSuperclass).pj_superclass()}return false});
i$(function pj_isBlock(){return true});
i$(function pj_new(){var $1;return ($1=$asNil$(this.pj_basicNew()),$1.pj_initialize(),$1.pj_yourself())});
i$(function pj_new_(arg){var $1;return ($1=$asNil$(this.pj_basicNew_(arg)),$1.pj_initialize(),$1.pj_yourself())});
i$(function pj_new_with_(arg1,arg2){var $1;return ($1=$asNil$(this.pj_basicNew_with_(arg1,arg2)),$1.pj_initialize(),$1.pj_yourself())});
i$(function pj_new_with_with_(arg1,arg2,arg3){var $1;return ($1=$asNil$(this.pj_basicNew_with_with_(arg1,arg2,arg3)),$1.pj_initialize(),$1.pj_yourself())});
i$(function pj_new_with_with_with_(arg1,arg2,arg3,arg4){var $1;return ($1=$asNil$(this.pj_basicNew_with_with_with_(arg1,arg2,arg3,arg4)),$1.pj_initialize(),$1.pj_yourself())});
i$(function pj_new_with_with_with_with_(arg1,arg2,arg3,arg4,arg5){var $1;return ($1=$asNil$(this.pj_basicNew_with_with_with_with_(arg1,arg2,arg3,arg4,arg5)),$1.pj_initialize(),$1.pj_yourself())});
i$(function pj_on_do_(exception,handlerAction){try{
return this()
}catch(ex){
if(ex.pj_isKindOf_(exception)){return handlerAction(ex)}
throw ex
}});
i$(function pj_printOn_(aStream){$asNil$(aStream).pj_nextPutAll_("a Block");return this});
i$(function pj_superclass(){if(this===Object){return null};return $asNil$(this.prototype.__proto__).pj_class()});
i$(function pj_value(){return this();});
i$(function pj_value_(arg){return this(arg);});
i$(function pj_value_value_(arg1,arg2){return this(arg1, arg2);});
i$(function pj_value_value_value_(arg1,arg2,arg3){return this(arg1, arg2, arg3);});
i$(function pj_value_value_value_value_(arg1,arg2,arg3,arg4){return this(arg1, arg2, arg3, arg4);});
i$(function pj_valueWithArguments_(anArray){return this.apply(this,anArray)});
i$(function pj_valueWithEnoughArguments_(anArray){return this.apply(this,anArray)});
i$(function pj_valueWithPossibleArgs_(args){return this.apply(null,args);});
i$(function pj_whileFalse(){this.pj_whileFalse_(function(){return null});return this});
i$(function pj_whileFalse_(loopBlock){while(false==this()){loopBlock();}});
i$(function pj_whileTrue(){this.pj_whileTrue_(function(){return null});return this});
i$(function pj_whileTrue_(loopBlock){while(true==this()){loopBlock();}});
c$(function pj_forceSubclass_(aFunction){aFunction.__proto__=this.prototype;return this});
});
Object.pj_subclass_("Point");
Point.$$def(function(i$,c$,cp$){
i$(function pj_42_(arg){if(true==$asNil$(arg).pj_isPoint()){return $asNil$($asNil$(this.x).pj_42_($asNil$(arg).pj_x())).pj_64_($asNil$(this.y).pj_42_($asNil$(arg).pj_y()))};return $asNil$(arg).pj_adaptToPoint_andSend_(this,"*")});
i$(function pj_43_(arg){if(true==$asNil$(arg).pj_isPoint()){return $asNil$($asNil$(this.x).pj_43_($asNil$(arg).pj_x())).pj_64_($asNil$(this.y).pj_43_($asNil$(arg).pj_y()))};return $asNil$(arg).pj_adaptToPoint_andSend_(this,"+")});
i$(function pj_45_(arg){if(true==$asNil$(arg).pj_isPoint()){return $asNil$($asNil$(this.x).pj_45_($asNil$(arg).pj_x())).pj_64_($asNil$(this.y).pj_45_($asNil$(arg).pj_y()))};return $asNil$(arg).pj_adaptToPoint_andSend_(this,"-")});
i$(function pj_47_(arg){if(true==$asNil$(arg).pj_isPoint()){return $asNil$($asNil$(this.x).pj_47_($asNil$(arg).pj_x())).pj_64_($asNil$(this.y).pj_47_($asNil$(arg).pj_y()))};return $asNil$(arg).pj_adaptToPoint_andSend_(this,"/")});
i$(function pj_47_47_(arg){if(true==$asNil$(arg).pj_isPoint()){return $asNil$($asNil$(this.x).pj_47_47_($asNil$(arg).pj_x())).pj_64_($asNil$(this.y).pj_47_47_($asNil$(arg).pj_y()))};return $asNil$(arg).pj_adaptToPoint_andSend_(this,"//")});
i$(function pj_60_(aPoint){if(this.x<$asNil$(aPoint).pj_x()){return this.y<$asNil$(aPoint).pj_y()}else{return false}});
i$(function pj_60_61_(aPoint){if(this.x<=$asNil$(aPoint).pj_x()){return this.y<=$asNil$(aPoint).pj_y()}else{return false}});
i$(function pj_61_(aPoint){if(true==$asNil$(this.pj_species()).pj_61_($asNil$(aPoint).pj_species())){if(true==$asNil$(this.x).pj_61_($asNil$(aPoint).pj_x())){return $asNil$(this.y).pj_61_($asNil$(aPoint).pj_y())}else{return false}}else{return false}});
i$(function pj_62_(aPoint){if(this.x>$asNil$(aPoint).pj_x()){return this.y>$asNil$(aPoint).pj_y()}else{return false}});
i$(function pj_62_61_(aPoint){if(this.x>=$asNil$(aPoint).pj_x()){return this.y>=$asNil$(aPoint).pj_y()}else{return false}});
i$(function pj_92_92_(arg){if(true==$asNil$(arg).pj_isPoint()){return $asNil$($asNil$(this.x).pj_92_92_($asNil$(arg).pj_x())).pj_64_($asNil$(this.y).pj_92_92_($asNil$(arg).pj_y()))};return $asNil$(arg).pj_adaptToPoint_andSend_(this,"\\\\")});
i$(function pj_abs(){return $asNil$($asNil$(this.x).pj_abs()).pj_64_($asNil$(this.y).pj_abs())});
i$(function pj_adaptToCollection_andSend_(rcvr,selector){var $_self_$=this;return $asNil$(rcvr).pj_collect_(function(element){return $asNil$(element).pj_perform_with_(selector,$_self_$)})});
i$(function pj_adaptToNumber_andSend_(rcvr,selector){return $asNil$($asNil$(rcvr).pj_64_(rcvr)).pj_perform_with_(selector,this)});
i$(function pj_adhereTo_(aRectangle){if(true==$asNil$(aRectangle).pj_containsPoint_(this)){return this};return $asNil$($asNil$($asNil$(this.x).pj_max_($asNil$(aRectangle).pj_left())).pj_min_($asNil$(aRectangle).pj_right())).pj_64_($asNil$($asNil$(this.y).pj_max_($asNil$(aRectangle).pj_top())).pj_min_($asNil$(aRectangle).pj_bottom()))});
i$(function pj_angle(){return $asNil$(this.pj_y()).pj_arcTan_(this.pj_x())});
i$(function pj_angleWith_(aPoint){var ar,ap;ar=this.pj_angle();ap=$asNil$(aPoint).pj_angle();if(ap>=ar){return $asNil$(ap).pj_45_(ar)}else{return $asNil$($asNil$((Number.pj_pi()*2)).pj_45_(ar)).pj_43_(ap)}});
i$(function pj_asFloatPoint(){if(true==this.pj_isFloatPoint()){return this};return $asNil$($asNil$(this.x).pj_asFloat()).pj_64_($asNil$(this.y).pj_asFloat())});
i$(function pj_asGPoint(){return $asNil$(this.x).pj_44_(this.y)});
i$(function pj_asGVector(){return GVector.pj_coordinates_(G2DCoordinates.pj_x_y_(this.x,this.y))});
i$(function pj_asIntegerPoint(){if(true==this.pj_isIntegerPoint()){return this};return $asNil$($asNil$(this.x).pj_asInteger()).pj_64_($asNil$(this.y).pj_asInteger())});
i$(function pj_asMargin(){return PjMargin.pj_fromPoint_(this)});
i$(function pj_asNonFractionalPoint(){if(true==(true==$asNil$(this.x).pj_isFraction()||$asNil$(this.y).pj_isFraction())){return $asNil$($asNil$(this.x).pj_asFloat()).pj_64_($asNil$(this.y).pj_asFloat())}});
i$(function pj_asPoint(){return this});
i$(function pj_bearingToPoint_(anotherPoint){var deltaX,deltaY;deltaX=$asNil$($asNil$(anotherPoint).pj_x()).pj_45_(this.x);deltaY=$asNil$($asNil$(anotherPoint).pj_y()).pj_45_(this.y);if($asNil$(deltaX).pj_abs()<0.001){if(deltaY>0){return 180}else{return 0}};return $asNil$($asNil$((deltaX>=0?90:270)).pj_45_($asNil$($asNil$($asNil$($asNil$(deltaY).pj_47_(deltaX)).pj_arcTan()).pj_negated()).pj_radiansToDegrees())).pj_rounded()});
i$(function pj_bitShiftPoint_(bits){this.x=$asNil$(this.x).pj_bitShift_(bits);this.y=$asNil$(this.y).pj_bitShift_(bits);return this});
i$(function pj_ceiling(){if(true==this.pj_isIntegerPoint()){return this};return $asNil$($asNil$(this.x).pj_ceiling()).pj_64_($asNil$(this.y).pj_ceiling())});
i$(function pj_closeTo_(aPoint){if(true==$asNil$(this.x).pj_closeTo_($asNil$(aPoint).pj_x())){return $asNil$(this.y).pj_closeTo_($asNil$(aPoint).pj_y())}else{return false}});
i$(function pj_closeTo_precision_(aPoint,aPrecision){if(true==$asNil$(this.x).pj_closeTo_precision_($asNil$(aPoint).pj_x(),aPrecision)){return $asNil$(this.y).pj_closeTo_precision_($asNil$(aPoint).pj_y(),aPrecision)}else{return false}});
i$(function pj_corner_(aPoint){return PjRectangle.pj_origin_corner_(this,aPoint)});
i$(function pj_crossProduct_(aPoint){return $asNil$($asNil$(this.x).pj_42_($asNil$(aPoint).pj_y())).pj_45_($asNil$(this.y).pj_42_($asNil$(aPoint).pj_x()))});
i$(function pj_deepCopy(){return $asNil$($asNil$(this.x).pj_deepCopy()).pj_64_($asNil$(this.y).pj_deepCopy())});
i$(function pj_degrees(){var tan,theta;if(this.x==0){if(this.y>=0){return 90.0}else{return 270.0}}else{tan=$asNil$($asNil$(this.y).pj_asFloat()).pj_47_($asNil$(this.x).pj_asFloat());theta=$asNil$(tan).pj_arcTan();if(this.x>=0){if(this.y>=0){return $asNil$(theta).pj_radiansToDegrees()}else{return 360.0+$asNil$(theta).pj_radiansToDegrees()}}else{return 180.0+$asNil$(theta).pj_radiansToDegrees()}}});
i$(function pj_directionToLineFrom_to_(p1,p2){return $asNil$($asNil$($asNil$($asNil$(p2).pj_x()).pj_45_($asNil$(p1).pj_x())).pj_42_($asNil$(this.pj_y()).pj_45_($asNil$(p1).pj_y()))).pj_45_($asNil$($asNil$(this.pj_x()).pj_45_($asNil$(p1).pj_x())).pj_42_($asNil$($asNil$(p2).pj_y()).pj_45_($asNil$(p1).pj_y())))});
i$(function pj_dist_(aPoint){this.pj_deprecated_on_in_transformWith_("Use #distanceTo: instead.","9 February 2021","Pharo9","`@receiver dist: `@arg".pj_45_62_("`@receiver distanceTo: `@arg"));return this.pj_distanceTo_(aPoint)});
i$(function pj_distanceTo_(aPoint){var dx,dy;dx=$asNil$($asNil$(aPoint).pj_x()).pj_45_(this.x);dy=$asNil$($asNil$(aPoint).pj_y()).pj_45_(this.y);return $asNil$($asNil$($asNil$(dx).pj_42_(dx)).pj_43_($asNil$(dy).pj_42_(dy))).pj_sqrt()});
i$(function pj_dotProduct_(aPoint){return $asNil$($asNil$(this.x).pj_42_($asNil$(aPoint).pj_x())).pj_43_($asNil$(this.y).pj_42_($asNil$(aPoint).pj_y()))});
i$(function pj_eightNeighbors(){return [this.pj_43_((1).pj_64_(0)),this.pj_43_((1).pj_64_(1)),this.pj_43_((0).pj_64_(1)),this.pj_43_((-1).pj_64_(1)),this.pj_43_((-1).pj_64_(0)),this.pj_43_((-1).pj_64_(-1)),this.pj_43_((0).pj_64_(-1)),this.pj_43_((1).pj_64_(-1))]});
i$(function pj_extent_(aPoint){return PjRectangle.pj_origin_extent_(this,aPoint)});
i$(function pj_flipBy_centerAt_(direction,c){if(direction==="vertical"){return $asNil$(this.x).pj_64_($asNil$(($asNil$(c).pj_y()*2)).pj_45_(this.y))};if(direction==="horizontal"){return $asNil$($asNil$(($asNil$(c).pj_x()*2)).pj_45_(this.x)).pj_64_(this.y)};this.pj_error_("unrecognizable direction");return this});
i$(function pj_floor(){if(true==this.pj_isIntegerPoint()){return this};return $asNil$($asNil$(this.x).pj_floor()).pj_64_($asNil$(this.y).pj_floor())});
i$(function pj_fourDirections(){return Array.pj_with_with_with_with_(this.pj_leftRotated(),this.pj_negated(),this.pj_rightRotated(),this)});
i$(function pj_fourNeighbors(){return Array.pj_with_with_with_with_(this.pj_43_((1).pj_64_(0)),this.pj_43_((0).pj_64_(1)),this.pj_43_((-1).pj_64_(0)),this.pj_43_((0).pj_64_(-1)))});
i$(function pj_fromSton_(stonReader){var $_self_$=this;$asNil$(stonReader).pj_parseListDo_(function(each,index){if(index==1){$_self_$.x=each};if(index==2){return $_self_$.y=each}else{return null}});return this});
i$(function pj_fuelAccept_(aGeneralMapper){return $asNil$(aGeneralMapper).pj_visitPoint_(this)});
i$(function pj_grid_(aPoint){var newX,newY;newX=$asNil$($asNil$(this.x).pj_43_($asNil$($asNil$(aPoint).pj_x()).pj_47_47_(2))).pj_truncateTo_($asNil$(aPoint).pj_x());newY=$asNil$($asNil$(this.y).pj_43_($asNil$($asNil$(aPoint).pj_y()).pj_47_47_(2))).pj_truncateTo_($asNil$(aPoint).pj_y());return $asNil$(newX).pj_64_(newY)});
i$(function pj_guarded(){return this.pj_max_((1).pj_64_(1))});
i$(function pj_hash(){return $asNil$($asNil$($asNil$($asNil$(this.x).pj_hash()).pj_hashMultiply()).pj_43_($asNil$(this.y).pj_hash())).pj_hashMultiply()});
i$(function pj_insideTriangle_with_with_(p1,p2,p3){var p0,b0,b1,b2,b3;p0=this;b0=$asNil$($asNil$($asNil$($asNil$(p2).pj_x()).pj_45_($asNil$(p1).pj_x())).pj_42_($asNil$($asNil$(p3).pj_y()).pj_45_($asNil$(p1).pj_y()))).pj_45_($asNil$($asNil$($asNil$(p3).pj_x()).pj_45_($asNil$(p1).pj_x())).pj_42_($asNil$($asNil$(p2).pj_y()).pj_45_($asNil$(p1).pj_y())));if(true==$asNil$(b0).pj_isZero()){return false};b0=1.0.pj_47_(b0);b1=$asNil$($asNil$($asNil$($asNil$($asNil$(p2).pj_x()).pj_45_($asNil$(p0).pj_x())).pj_42_($asNil$($asNil$(p3).pj_y()).pj_45_($asNil$(p0).pj_y()))).pj_45_($asNil$($asNil$($asNil$(p3).pj_x()).pj_45_($asNil$(p0).pj_x())).pj_42_($asNil$($asNil$(p2).pj_y()).pj_45_($asNil$(p0).pj_y())))).pj_42_(b0);b2=$asNil$($asNil$($asNil$($asNil$($asNil$(p3).pj_x()).pj_45_($asNil$(p0).pj_x())).pj_42_($asNil$($asNil$(p1).pj_y()).pj_45_($asNil$(p0).pj_y()))).pj_45_($asNil$($asNil$($asNil$(p1).pj_x()).pj_45_($asNil$(p0).pj_x())).pj_42_($asNil$($asNil$(p3).pj_y()).pj_45_($asNil$(p0).pj_y())))).pj_42_(b0);b3=$asNil$($asNil$($asNil$($asNil$($asNil$(p1).pj_x()).pj_45_($asNil$(p0).pj_x())).pj_42_($asNil$($asNil$(p2).pj_y()).pj_45_($asNil$(p0).pj_y()))).pj_45_($asNil$($asNil$($asNil$(p2).pj_x()).pj_45_($asNil$(p0).pj_x())).pj_42_($asNil$($asNil$(p1).pj_y()).pj_45_($asNil$(p0).pj_y())))).pj_42_(b0);if(b1<0.0){return false};if(b2<0.0){return false};if(b3<0.0){return false};return true});
i$(function pj_interpolateTo_at_(end,amountDone){return $asNil$(this.pj_42_(1-amountDone)).pj_43_($asNil$(end).pj_42_(amountDone))});
i$(function pj_isFloatPoint(){if(true==$asNil$(this.x).pj_isFloat()){return $asNil$(this.y).pj_isFloat()}else{return false}});
i$(function pj_isInsideCircle_with_with_(a,b,c){return $asNil$($asNil$($asNil$($asNil$($asNil$(a).pj_dotProduct_(a)).pj_42_($asNil$(b).pj_triangleArea_with_(c,this))).pj_45_($asNil$($asNil$(b).pj_dotProduct_(b)).pj_42_($asNil$(a).pj_triangleArea_with_(c,this)))).pj_43_($asNil$($asNil$(c).pj_dotProduct_(c)).pj_42_($asNil$(a).pj_triangleArea_with_(b,this)))).pj_45_($asNil$(this.pj_dotProduct_(this)).pj_42_($asNil$(a).pj_triangleArea_with_(b,c)))>0.0});
i$(function pj_isIntegerPoint(){if(true==$asNil$(this.x).pj_isInteger()){return $asNil$(this.y).pj_isInteger()}else{return false}});
i$(function pj_isPoint(){return true});
i$(function pj_isSelfEvaluating(){return this.pj_class()===Point});
i$(function pj_isZero(){if(true==$asNil$(this.x).pj_isZero()){return $asNil$(this.y).pj_isZero()}else{return false}});
i$(function pj_leftRotated(){return $asNil$(this.y).pj_64_($asNil$(this.x).pj_negated())});
i$(function pj_max(){return $asNil$(this.pj_x()).pj_max_(this.pj_y())});
i$(function pj_max_(aPoint){return $asNil$($asNil$(this.x).pj_max_($asNil$(aPoint).pj_x())).pj_64_($asNil$(this.y).pj_max_($asNil$(aPoint).pj_y()))});
i$(function pj_min(){return $asNil$(this.pj_x()).pj_min_(this.pj_y())});
i$(function pj_min_(aPoint){return $asNil$($asNil$(this.x).pj_min_($asNil$(aPoint).pj_x())).pj_64_($asNil$(this.y).pj_min_($asNil$(aPoint).pj_y()))});
i$(function pj_min_max_(aMin,aMax){return $asNil$(this.pj_min_(aMin)).pj_max_(aMax)});
i$(function pj_nearestPointAlongLineFrom_to_(p1,p2){var x21,y21,t,x1,y1;if(true==$asNil$($asNil$(p1).pj_x()).pj_61_($asNil$(p2).pj_x())){return $asNil$($asNil$(p1).pj_x()).pj_64_(this.y)};if(true==$asNil$($asNil$(p1).pj_y()).pj_61_($asNil$(p2).pj_y())){return $asNil$(this.x).pj_64_($asNil$(p1).pj_y())};x1=$asNil$($asNil$(p1).pj_x()).pj_asFloat();y1=$asNil$($asNil$(p1).pj_y()).pj_asFloat();x21=$asNil$($asNil$($asNil$(p2).pj_x()).pj_asFloat()).pj_45_(x1);y21=$asNil$($asNil$($asNil$(p2).pj_y()).pj_asFloat()).pj_45_(y1);t=$asNil$($asNil$($asNil$($asNil$($asNil$(this.y).pj_asFloat()).pj_45_(y1)).pj_47_(x21)).pj_43_($asNil$($asNil$($asNil$(this.x).pj_asFloat()).pj_45_(x1)).pj_47_(y21))).pj_47_($asNil$($asNil$(x21).pj_47_(y21)).pj_43_($asNil$(y21).pj_47_(x21)));return $asNil$($asNil$(x1).pj_43_($asNil$(t).pj_42_(x21))).pj_64_($asNil$(y1).pj_43_($asNil$(t).pj_42_(y21)))});
i$(function pj_nearestPointOnLineFrom_to_(p1,p2){return $asNil$(this.pj_nearestPointAlongLineFrom_to_(p1,p2)).pj_adhereTo_($asNil$(p1).pj_rectangle_(p2))});
i$(function pj_negated(){return $asNil$((0-this.x)).pj_64_(0-this.y)});
i$(function pj_normal(){var n,d;n=$asNil$($asNil$(this.y).pj_negated()).pj_64_(this.x);if((d=$asNil$($asNil$($asNil$(n).pj_x()).pj_42_($asNil$(n).pj_x())).pj_43_($asNil$($asNil$(n).pj_y()).pj_42_($asNil$(n).pj_y())))==0){return (-1).pj_64_(0)};return $asNil$(n).pj_47_($asNil$(d).pj_sqrt())});
i$(function pj_normalized(){var r;r=$asNil$($asNil$($asNil$(this.x).pj_42_(this.x)).pj_43_($asNil$(this.y).pj_42_(this.y))).pj_sqrt();return $asNil$($asNil$(this.x).pj_47_(r)).pj_64_($asNil$(this.y).pj_47_(r))});
i$(function pj_octantOf_(otherPoint){var quad,moreHoriz;if(true==(true==$asNil$(this.x).pj_61_($asNil$(otherPoint).pj_x())&&this.y>$asNil$(otherPoint).pj_y())){return 6};if(true==(true==$asNil$(this.y).pj_61_($asNil$(otherPoint).pj_y())&&this.x<$asNil$(otherPoint).pj_x())){return 8};quad=this.pj_quadrantOf_(otherPoint);moreHoriz=$asNil$($asNil$(this.x).pj_45_($asNil$(otherPoint).pj_x())).pj_abs()>=$asNil$($asNil$(this.y).pj_45_($asNil$(otherPoint).pj_y())).pj_abs();if(true==$asNil$($asNil$(quad).pj_even()).pj_eqv_(moreHoriz)){return quad*2}else{return quad*2-1}});
i$(function pj_onLineFrom_to_(p1,p2){return this.pj_onLineFrom_to_within_(p1,p2,2)});
i$(function pj_onLineFrom_to_within_(p1,p2,epsilon){if($asNil$(p1).pj_x()<$asNil$(p2).pj_x()){if(true==(this.x<$asNil$($asNil$(p1).pj_x()).pj_45_(epsilon)||this.x>$asNil$($asNil$(p2).pj_x()).pj_43_(epsilon))){return false}}else{if(true==(this.x<$asNil$($asNil$(p2).pj_x()).pj_45_(epsilon)||this.x>$asNil$($asNil$(p1).pj_x()).pj_43_(epsilon))){return false}};if($asNil$(p1).pj_y()<$asNil$(p2).pj_y()){if(true==(this.y<$asNil$($asNil$(p1).pj_y()).pj_45_(epsilon)||this.y>$asNil$($asNil$(p2).pj_y()).pj_43_(epsilon))){return false}}else{if(true==(this.y<$asNil$($asNil$(p2).pj_y()).pj_45_(epsilon)||this.y>$asNil$($asNil$(p1).pj_y()).pj_43_(epsilon))){return false}};return this.pj_distanceTo_(this.pj_nearestPointAlongLineFrom_to_(p1,p2))<=epsilon});
i$(function pj_printOn_(aStream){$asNil$(aStream).pj_nextPut_("(");$asNil$(this.x).pj_printOn_(aStream);$asNil$(aStream).pj_nextPut_("@");if(true==(true==$asNil$(this.y).pj_notNil()&&$asNil$(this.y).pj_negative())){$asNil$(aStream).pj_space()};$asNil$(this.y).pj_printOn_(aStream);$asNil$(aStream).pj_nextPut_(")");return this});
i$(function pj_quadrantOf_(otherPoint){if(this.x<=$asNil$(otherPoint).pj_x()){if(this.y<$asNil$(otherPoint).pj_y()){return 1}else{return 4}}else{if(this.y<=$asNil$(otherPoint).pj_y()){return 2}else{return 3}}});
i$(function pj_r(){return $asNil$(this.pj_dotProduct_(this)).pj_sqrt()});
i$(function pj_reciprocal(){return $asNil$($asNil$(this.x).pj_reciprocal()).pj_64_($asNil$(this.y).pj_reciprocal())});
i$(function pj_rectangle_(aPoint){return PjRectangle.pj_point_point_(this,aPoint)});
i$(function pj_reflectedAbout_(aPoint){return $asNil$($asNil$(this.pj_45_(aPoint)).pj_negated()).pj_43_(aPoint)});
i$(function pj_rightRotated(){return $asNil$($asNil$(this.y).pj_negated()).pj_64_(this.x)});
i$(function pj_rotateBy_about_(angle,center){var p,r,theta;p=this.pj_45_(center);r=$asNil$(p).pj_r();theta=$asNil$($asNil$(angle).pj_asFloat()).pj_45_($asNil$(p).pj_theta());return $asNil$($asNil$($asNil$($asNil$(center).pj_x()).pj_asFloat()).pj_43_($asNil$(r).pj_42_($asNil$(theta).pj_cos()))).pj_64_($asNil$($asNil$($asNil$(center).pj_y()).pj_asFloat()).pj_45_($asNil$(r).pj_42_($asNil$(theta).pj_sin())))});
i$(function pj_rotateBy_centerAt_(direction,c){var offset;offset=this.pj_45_(c);if(direction==="right"){return $asNil$($asNil$($asNil$($asNil$(offset).pj_y()).pj_negated()).pj_64_($asNil$(offset).pj_x())).pj_43_(c)};if(direction==="left"){return $asNil$($asNil$($asNil$(offset).pj_y()).pj_64_($asNil$($asNil$(offset).pj_x()).pj_negated())).pj_43_(c)};if(direction==="pi"){return $asNil$(c).pj_45_(offset)};this.pj_error_("unrecognizable direction");return this});
i$(function pj_roundDownTo_(grid){var gridPoint;gridPoint=$asNil$(grid).pj_asPoint();return $asNil$($asNil$(this.x).pj_roundDownTo_($asNil$(gridPoint).pj_x())).pj_64_($asNil$(this.y).pj_roundDownTo_($asNil$(gridPoint).pj_y()))});
i$(function pj_roundTo_(grid){var gridPoint;gridPoint=$asNil$(grid).pj_asPoint();return $asNil$($asNil$(this.x).pj_roundTo_($asNil$(gridPoint).pj_x())).pj_64_($asNil$(this.y).pj_roundTo_($asNil$(gridPoint).pj_y()))});
i$(function pj_roundUpTo_(grid){var gridPoint;gridPoint=$asNil$(grid).pj_asPoint();return $asNil$($asNil$(this.x).pj_roundUpTo_($asNil$(gridPoint).pj_x())).pj_64_($asNil$(this.y).pj_roundUpTo_($asNil$(gridPoint).pj_y()))});
i$(function pj_rounded(){if(true==this.pj_isIntegerPoint()){return this};return $asNil$($asNil$(this.x).pj_rounded()).pj_64_($asNil$(this.y).pj_rounded())});
i$(function pj_scaleBy_(factorPoint){return $asNil$($asNil$($asNil$(factorPoint).pj_x()).pj_42_(this.x)).pj_64_($asNil$($asNil$(factorPoint).pj_y()).pj_42_(this.y))});
i$(function pj_scaleFrom_to_(rect1,rect2){return $asNil$($asNil$(rect2).pj_topLeft()).pj_43_($asNil$($asNil$($asNil$($asNil$(this.x).pj_45_($asNil$(rect1).pj_left())).pj_42_($asNil$(rect2).pj_width())).pj_47_47_($asNil$(rect1).pj_width())).pj_64_($asNil$($asNil$($asNil$(this.y).pj_45_($asNil$(rect1).pj_top())).pj_42_($asNil$(rect2).pj_height())).pj_47_47_($asNil$(rect1).pj_height())))});
i$(function pj_scaleTo_(anExtent){var factor,sX,sY;factor=3.0.pj_reciprocal();sX=$asNil$($asNil$(anExtent).pj_x()).pj_47_($asNil$(this.pj_x()).pj_asFloat());sY=$asNil$($asNil$(anExtent).pj_y()).pj_47_($asNil$(this.pj_y()).pj_asFloat());if(true==$asNil$(sX).pj_61_(sY)){return $asNil$(sX).pj_64_(sY)};if(sX<sY){return $asNil$(sX).pj_64_($asNil$(sX).pj_max_($asNil$(sY).pj_42_(factor)))}else{return $asNil$($asNil$(sY).pj_max_($asNil$(sX).pj_42_(factor))).pj_64_(sY)}});
i$(function pj_scaledByDisplayScaleFactor(){return this.pj_42_($asNil$(this.pj_currentWorld()).pj_displayScaleFactor())});
i$(function pj_setR_degrees_(rho,degrees){var radians;radians=$asNil$($asNil$(degrees).pj_asFloat()).pj_degreesToRadians();this.x=$asNil$($asNil$(rho).pj_asFloat()).pj_42_($asNil$(radians).pj_cos());this.y=$asNil$($asNil$(rho).pj_asFloat()).pj_42_($asNil$(radians).pj_sin());return this});
i$(function pj_setX_setY_(xValue,yValue){this.x=xValue;this.y=yValue;return this});
i$(function pj_sideOf_(otherPoint){var side;side=$asNil$(this.pj_crossProduct_(otherPoint)).pj_sign();return ["right","center","left"].pj_at_(side+2)});
i$(function pj_sign(){return $asNil$($asNil$(this.x).pj_sign()).pj_64_($asNil$(this.y).pj_sign())});
i$(function pj_sortsBefore_(otherPoint){if(true==$asNil$(this.y).pj_61_($asNil$(otherPoint).pj_y())){return this.x<=$asNil$(otherPoint).pj_x()}else{return this.y<=$asNil$(otherPoint).pj_y()}});
i$(function pj_squaredDistanceTo_(aPoint){var delta;delta=$asNil$(aPoint).pj_45_(this);return $asNil$(delta).pj_dotProduct_(delta)});
i$(function pj_stonOn_(stonWriter){var $_self_$=this;$asNil$(stonWriter).pj_writeObject_streamShortList_(this,function(array){var $1;return ($1=$asNil$(array),$1.pj_add_($_self_$.x),$1.pj_add_($_self_$.y))});return this});
i$(function pj_storeOn_(aStream){$asNil$(aStream).pj_nextPut_("(");this.pj_printOn_(aStream);$asNil$(aStream).pj_nextPut_(")");return this});
i$(function pj_theta(){var tan,theta;if(this.x==0){if(this.y>=0){return 1.570796326794897}else{return 4.71238898038469}}else{tan=$asNil$($asNil$(this.y).pj_asFloat()).pj_47_($asNil$(this.x).pj_asFloat());theta=$asNil$(tan).pj_arcTan();if(this.x>=0){if(this.y>=0){return theta}else{return 6.283185307179586+theta}}else{return 3.141592653589793+theta}}});
i$(function pj_to_intersects_to_(end1,start2,end2){var start1,sideStart,sideEnd;start1=this;if(true==(true==(true==(true==$asNil$(start1).pj_61_(start2)||$asNil$(end1).pj_61_(end2))||$asNil$(start1).pj_61_(end2))||$asNil$(start2).pj_61_(end1))){return true};sideStart=$asNil$(start1).pj_to_sideOf_(end1,start2);sideEnd=$asNil$(start1).pj_to_sideOf_(end1,end2);if(true==$asNil$(sideStart).pj_61_(sideEnd)){return false};sideStart=$asNil$(start2).pj_to_sideOf_(end2,start1);sideEnd=$asNil$(start2).pj_to_sideOf_(end2,end1);if(true==$asNil$(sideStart).pj_61_(sideEnd)){return false};return true});
i$(function pj_to_sideOf_(end,otherPoint){return $asNil$($asNil$(end).pj_45_(this)).pj_sideOf_($asNil$(otherPoint).pj_45_(this))});
i$(function pj_translateBy_(delta){return $asNil$($asNil$($asNil$(delta).pj_x()).pj_43_(this.x)).pj_64_($asNil$($asNil$(delta).pj_y()).pj_43_(this.y))});
i$(function pj_transposed(){return $asNil$(this.y).pj_64_(this.x)});
i$(function pj_triangleArea_with_(b,c){return $asNil$($asNil$($asNil$($asNil$(b).pj_x()).pj_45_(this.pj_x())).pj_42_($asNil$($asNil$(c).pj_y()).pj_45_(this.pj_y()))).pj_45_($asNil$($asNil$($asNil$(b).pj_y()).pj_45_(this.pj_y())).pj_42_($asNil$($asNil$(c).pj_x()).pj_45_(this.pj_x())))});
i$(function pj_truncateTo_(grid){var gridPoint;gridPoint=$asNil$(grid).pj_asPoint();return $asNil$($asNil$(this.x).pj_truncateTo_($asNil$(gridPoint).pj_x())).pj_64_($asNil$(this.y).pj_truncateTo_($asNil$(gridPoint).pj_y()))});
i$(function pj_truncated(){if(true==this.pj_isIntegerPoint()){return this};return $asNil$($asNil$(this.x).pj_truncated()).pj_64_($asNil$(this.y).pj_truncated())});
i$(function pj_veryDeepCopyWith_(deepCopier){return this});
i$(function pj_x(){return this.x});
i$(function pj_y(){return this.y});
c$(function pj_approvedSelectorsForMethodFinder(){return this.pj_selectors()});
c$(function pj_r_degrees_(rho,degrees){return $asNil$(this.pj_basicNew()).pj_setR_degrees_(rho,degrees)});
c$(function pj_r_theta_(radius,angle){return $asNil$($asNil$(radius).pj_42_($asNil$(angle).pj_cos())).pj_64_($asNil$(radius).pj_42_($asNil$(angle).pj_sin()))});
c$(function pj_settingInputWidgetForNode_(aSettingNode){return $asNil$(aSettingNode).pj_inputWidgetForPoint()});
c$(function pj_x_y_(xInteger,yInteger){return $asNil$(this.pj_basicNew()).pj_setX_setY_(xInteger,yInteger)});
});
Object.pj_subclass_("PjMagnitude");
PjMagnitude.$$def(function(i$,c$,cp$){
i$(function pj_60_(aMagnitude){return this.pj_subclassResponsibility()});
i$(function pj_60_(aMagnitude){return this.pj_subclassResponsibility()});
i$(function pj_60_61_(aMagnitude){return $asNil$((this>aMagnitude)).pj_not()});
i$(function pj_61_(aMagnitude){return this.pj_subclassResponsibility()});
i$(function pj_61_(aMagnitude){return this.pj_subclassResponsibility()});
i$(function pj_62_(aMagnitude){return aMagnitude<this});
i$(function pj_62_61_(aMagnitude){return aMagnitude<=this});
i$(function pj_between_and_(min,max){if(this>=min){return this<=max}else{return false}});
i$(function pj_compareWith_ifLesser_ifEqual_ifGreater_(anotherMagnitude,lesserBlock,equalBlock,greaterBlock){var $_self_$=this;return $asNil$((this<anotherMagnitude)).pj_ifTrue_ifFalse_(lesserBlock,function(){return $asNil$(($_self_$==anotherMagnitude)).pj_ifTrue_ifFalse_(equalBlock,greaterBlock)})});
i$(function pj_max_(aMagnitude){if(this>aMagnitude){return this}else{return aMagnitude}});
i$(function pj_min_(aMagnitude){if(this<aMagnitude){return this}else{return aMagnitude}});
i$(function pj_min_max_(maxValue,minValue){return $asNil$(this.pj_min_(maxValue)).pj_max_(minValue)});
});
Object.pj_subclass_("PjMargin");
PjMargin.$$def(function(i$,c$,cp$){
});
Object.pj_subclass_("Number");
Number.$$def(function(i$,c$,cp$,$Float){
i$(function pj_37_(anObject){return Math.sign(anObject)*(Math.abs(this) % anObject)});
i$(function pj_42_(anObject){return this * anObject;});
i$(function pj_43_(anObject){return this + anObject;});
i$(function pj_45_(anObject){return this - anObject;});
i$(function pj_47_(anObject){if(anObject==0) return ZeroDivide.pj_signal();return this / anObject;});
i$(function pj_47_47_(anObject){return $asNil$(Math).pj_floor_(this.pj_47_(anObject))});
i$(function pj_60_(other){return this < other});
i$(function pj_60_(other){return this < other});
i$(function pj_60_61_(aMagnitude){return $asNil$((this>aMagnitude)).pj_not()});
i$(function pj_61_(other){return this == other});
i$(function pj_61_(other){return this == other});
i$(function pj_61_61_(other){return this == other});
i$(function pj_62_(aMagnitude){return aMagnitude<this});
i$(function pj_62_61_(aMagnitude){return aMagnitude<=this});
i$(function pj_64_(y){return Point.pj_x_y_(this,y)});
i$(function pj_92_92_(anObject){return this.pj_37_(anObject)});
i$(function pj_abs(){return Math.abs(this);});
i$(function pj_arcCos(){return Math.acos(this);});
i$(function pj_arcSin(){return Math.asin(this);});
i$(function pj_arcTan(){return Math.atan(this);});
i$(function pj_arcTan_(denominator){return Math.atan2(this,denominator);});
i$(function pj_asCharacter(){return String.pj_value_(this)});
i$(function pj_asFloat(){return +this});
i$(function pj_asInteger(){return this.pj_truncated()});
i$(function pj_asJsObject(){return this.valueOf()});
i$(function pj_asNumber(){return this});
i$(function pj_asString(){return this + ""});
i$(function pj_basicIdentityHash(){return this});
i$(function pj_between_and_(min,max){if(this>=min){return this<=max}else{return false}});
i$(function pj_bitAnd_(arg){return this&arg});
i$(function pj_bitInvert(){return ~this});
i$(function pj_bitOr_(arg){return this|arg});
i$(function pj_bitShift_(shiftCount){if (shiftCount<0) return this>>(-shiftCount);return this<<shiftCount});
i$(function pj_bitXor_(arg){return this^arg});
i$(function pj_ch(){return this + "ch"});
i$(function pj_cm(){return this + "cm"});
i$(function pj_compareWith_ifLesser_ifEqual_ifGreater_(anotherMagnitude,lesserBlock,equalBlock,greaterBlock){var $_self_$=this;return $asNil$((this<anotherMagnitude)).pj_ifTrue_ifFalse_(lesserBlock,function(){return $asNil$(($_self_$==anotherMagnitude)).pj_ifTrue_ifFalse_(equalBlock,greaterBlock)})});
i$(function pj_cos(){return Math.cos(this);});
i$(function pj_day(){return this.pj_days()});
i$(function pj_days(){return PjDuration.pj_days_(this)});
i$(function pj_degreesToRadians(){return this.pj_42_(cp$.RadiansPerDegree)});
i$(function pj_em(){return this + "em"});
i$(function pj_even(){return this%2==0});
i$(function pj_ex(){return this + "ex"});
i$(function pj_exp(){return Math.exp(this);});
i$(function pj_floorLog_(radix){return $asNil$(this.pj_log_(radix)).pj_floor()});
i$(function pj_fractionPart(){return this.pj_45_(this.pj_integerPart())});
i$(function pj_hash(){return this.pj_hashMultiply()});
i$(function pj_hashMultiply(){var low;low=this.pj_bitAnd_(16383);return $asNil$($asNil$((9741*low)).pj_43_($asNil$($asNil$((9741*this.pj_bitShift_(-14))).pj_43_(101*low)).pj_bitAnd_(16383)*16384)).pj_bitAnd_(268435455)});
i$(function pj_highBit(){if(this<0){return this.pj_error_("highBit is not defined for negative integers")};return this.pj_highBitOfPositiveReceiver()});
i$(function pj_highBitOfPositiveReceiver(){var shifted,bitNo;shifted=this;bitNo=0;while(65536<shifted){shifted=$asNil$(shifted).pj_bitShift_(-16);bitNo=bitNo+16}if(256<shifted){shifted=$asNil$(shifted).pj_bitShift_(-8);bitNo=bitNo+8};if(16<shifted){shifted=$asNil$(shifted).pj_bitShift_(-4);bitNo=bitNo+4};if(4<shifted){shifted=$asNil$(shifted).pj_bitShift_(-2);bitNo=bitNo+2};if(2<shifted){shifted=$asNil$(shifted).pj_bitShift_(-1);bitNo=bitNo+1};return $asNil$(shifted).pj_43_(bitNo)});
i$(function pj_hour(){return this.pj_hours()});
i$(function pj_hours(){return PjDuration.pj_hours_(this)});
i$(function pj_identityHash(){return this.pj_hashMultiply()});
i$(function pj_in(){return this + "in"});
i$(function pj_integerPart(){return this.pj_truncated()});
i$(function pj_isFloat(){return $asNil$(this.pj_isInteger()).pj_not()});
i$(function pj_isInfinite(){if(this==$Float.Infinity){return true}else{return this==$Float.NegativeInfinity}});
i$(function pj_isInteger(){return (this|0)==this});
i$(function pj_isJSPrimitiveType(){return true});
i$(function pj_isLiteral(){return true});
i$(function pj_isNaN(){return isNaN(this)});
i$(function pj_isNumber(){return true});
i$(function pj_isPowerOfTwo(){if(this!=0){return this.pj_bitAnd_(this-1)==0}else{return false}});
i$(function pj_isSelfEvaluating(){return true});
i$(function pj_isZero(){return this==0});
i$(function pj_ln(){return Math.log(this);});
i$(function pj_log(){return Math.log10(this);});
i$(function pj_log_(aNumber){return $asNil$(this.pj_ln()).pj_47_($asNil$(aNumber).pj_ln())});
i$(function pj_lowBit(){var n,result;n=this;if(n==0){return 0};result=1;while($asNil$(n).pj_bitAnd_(255)==0){result=result+8;n=$asNil$(n).pj_bitShift_(-8)}while($asNil$(n).pj_bitAnd_(1)==0){result=result+1;n=$asNil$(n).pj_bitShift_(-1)}return result});
i$(function pj_max_(aMagnitude){if(this>aMagnitude){return this}else{return aMagnitude}});
i$(function pj_milliSecond(){return this.pj_milliSeconds()});
i$(function pj_milliSeconds(){return PjDuration.pj_milliSeconds_(this)});
i$(function pj_min_(aMagnitude){if(this<aMagnitude){return this}else{return aMagnitude}});
i$(function pj_min_max_(maxValue,minValue){return $asNil$(this.pj_min_(maxValue)).pj_max_(minValue)});
i$(function pj_minute(){return this.pj_minutes()});
i$(function pj_minutes(){return PjDuration.pj_minutes_(this)});
i$(function pj_mm(){return this + "mm"});
i$(function pj_month(){return this.pj_months()});
i$(function pj_months(){return PjDuration.pj_months_(this)});
i$(function pj_negated(){return 0-this});
i$(function pj_negative(){return this<0});
i$(function pj_odd(){return this.pj_even()===false});
i$(function pj_pc(){return this + "pc"});
i$(function pj_percnt(){return this + "%"});
i$(function pj_positive(){return this>=0});
i$(function pj_printOn_(aStream){if(true==this.pj_isNaN()){return $asNil$(aStream).pj_nextPutAll_("Float nan")};if(true==this.pj_isInfinite()){return $asNil$(aStream).pj_nextPutAll_("Float infinity")};$asNil$(aStream).pj_nextPutAll_(this.toString());return this});
i$(function pj_proxyResponse(){return 0+this});
i$(function pj_pt(){return this + "pt"});
i$(function pj_px(){return this + "px"});
i$(function pj_quo_(aNumber){return $asNil$(this.pj_47_(aNumber)).pj_truncated()});
i$(function pj_radiansToDegrees(){return this.pj_47_(cp$.RadiansPerDegree)});
i$(function pj_raisedTo_(aNumber){if(true==$asNil$(aNumber).pj_isInteger()){return this.pj_raisedToInteger_(aNumber)};if(true==$asNil$(aNumber).pj_isFraction()){return this.pj_raisedToFraction_(aNumber)};if(this<0){return ArithmeticError.pj_signal_("Negative numbers can't be raised to float powers.")};if(0==aNumber){return $asNil$(this.pj_class()).pj_one()};if(1==aNumber){return this};if(0==this){if(aNumber<0){return $asNil$(ZeroDivide.pj_dividend_(1)).pj_signal()}else{return this}};return $asNil$($asNil$(aNumber).pj_42_(this.pj_ln())).pj_exp()});
i$(function pj_raisedToInteger_(anInteger){var bitProbe,result;if(true==$asNil$(anInteger).pj_negative()){return $asNil$(this.pj_raisedToInteger_($asNil$(anInteger).pj_negated())).pj_reciprocal()};bitProbe=(1).pj_bitShift_($asNil$(anInteger).pj_highBit()-1);result=$asNil$(this.pj_class()).pj_one();while(true==(($asNil$(anInteger).pj_bitAnd_(bitProbe)==0?null:(result=$asNil$(result).pj_42_(this))),(bitProbe=$asNil$(bitProbe).pj_bitShift_(-1)),bitProbe>0)){result=$asNil$(result).pj_42_(result)}return result});
i$(function pj_reciprocal(){return (1).pj_47_(this)});
i$(function pj_rem(){return this + "rem"});
i$(function pj_rem_(aNumber){return this.pj_45_($asNil$(this.pj_quo_(aNumber)).pj_42_(aNumber))});
i$(function pj_rounded(){if($asNil$(this.pj_fractionPart()).pj_abs()<0.5){return this.pj_truncated()}else{return $asNil$(this.pj_truncated()).pj_43_($asNil$(this.pj_sign()).pj_rounded())}});
i$(function pj_second(){return this.pj_seconds()});
i$(function pj_seconds(){return PjDuration.pj_seconds_(this)});
i$(function pj_serializationContents(){return this});
i$(function pj_sign(){return Math.sign(this);});
i$(function pj_sin(){return Math.sin(this);});
i$(function pj_sqrt(){return Math.sqrt(this);});
i$(function pj_squared(){return this.pj_42_(this)});
i$(function pj_strictlyPositive(){return this>0});
i$(function pj_tan(){return Math.tan(this);});
i$(function pj_timesRepeat_(aBlock){(1).pj_to_do_(this,aBlock);return this});
i$(function pj_to_(end){var interval;interval=Array.pj_new();this.pj_to_by_do_(end,1,function(each){return $asNil$(interval).pj_add_(each)});return interval});
i$(function pj_to_by_do_(end,step,aBlock){for(var i=this; i <= end; i += step){aBlock(i);}});
i$(function pj_to_do_(end,aBlock){this.pj_to_by_do_(end,1,aBlock);return this});
i$(function pj_truncated(){if (this>=0)return Math.floor(this);return Math.ceil(this)});
i$(function pj_value(){return 0+this});
i$(function pj_vh(){return this + "vh"});
i$(function pj_vmax(){return this + "vmax"});
i$(function pj_vmin(){return this + "vmin"});
i$(function pj_vw(){return this + "vw"});
i$(function pj_week(){return this.pj_weeks()});
i$(function pj_weeks(){return PjDuration.pj_weeks_(this)});
i$(function pj_writePhxJsonOn_(w){$asNil$(w).pj_60_60_(this.pj_asString());return this});
i$(function pj_year(){return this.pj_years()});
i$(function pj_years(){return PjDuration.pj_years_(this)});
i$(function pj_124_(anObject){return this | anObject;});
i$(function pj_126_61_(other){return this != other});
c$(function pj_denormalized(){return true});
c$(function pj_e(){return $Float.E});
c$(function pj_emax(){return 1023});
c$(function pj_emin(){return -1022});
c$(function pj_epsilon(){return 1.0.pj_timesTwoPower_(1-this.pj_precision())});
c$(function pj_fmax(){return $Float.MaxVal});
c$(function pj_fmin(){if(true==this.pj_denormalized()){return this.pj_fminDenormalized()}else{return this.pj_fminNormalized()}});
c$(function pj_fminDenormalized(){return 1.0.pj_timesTwoPower_($Float.MinValLogBase2)});
c$(function pj_fminNormalized(){return 1.0.pj_timesTwoPower_(-1022)});
c$(function pj_halfPi(){return $Float.Halfpi});
c$(function pj_infinity(){return $Float.Infinity});
c$(function pj_javascriptInitialize(){cp$.Pi=$asNil$(Math).pj_instVarNamed_("PI");cp$.Halfpi=$asNil$(cp$.Pi).pj_47_(2.0);cp$.Twopi=cp$.Pi*2.0;cp$.ThreePi=cp$.Pi*3.0;cp$.RadiansPerDegree=$asNil$(cp$.Pi).pj_47_(180.0);cp$.Ln2=$asNil$(Math).pj_instVarNamed_("LN2");cp$.Ln10=$asNil$(Math).pj_instVarNamed_("LN10");cp$.Sqrt2=$asNil$(Math).pj_instVarNamed_("SQRT2");cp$.E=$asNil$(Math).pj_instVarNamed_("E");cp$.Epsilon=1.0e-12;cp$.MaxVal=Number.pj_instVarNamed_("MAX_VALUE");cp$.MaxValLn=709.782712893384;cp$.MinValLogBase2=-1074;cp$.Infinity=Number.pj_instVarNamed_("POSITIVE_INFINITY");cp$.NegativeInfinity=Number.pj_instVarNamed_("NEGATIVE_INFINITY");cp$.NaN=Number.pj_instVarNamed_("NaN");cp$.NegativeZero=1.0.pj_47_(cp$.NegativeInfinity);return this});
c$(function pj_maxExactInteger(){return (1).pj_bitShift_(this.pj_precision())});
c$(function pj_nan(){return $Float.NaN});
c$(function pj_negativeInfinity(){return $Float.NegativeInfinity});
c$(function pj_negativeZero(){return $Float.NegativeZero});
c$(function pj_newFromMaterialized_(materializedObject){return materializedObject});
c$(function pj_one(){return 1.0});
c$(function pj_one(){return 1});
c$(function pj_pi(){return $Float.Pi});
c$(function pj_precision(){return 53});
c$(function pj_radix(){return 2});
c$(function pj_threePi(){return $Float.ThreePi});
c$(function pj_twoPi(){return $Float.Twopi});
c$(function pj_zero(){return 0.0});
cp$.E=cp$.Epsilon=cp$.Halfpi=cp$.Infinity=cp$.Ln10=cp$.Ln2=cp$.MaxVal=cp$.MaxValLn=cp$.MinValLogBase2=cp$.NaN=null;
cp$.NegativeInfinity=cp$.NegativeZero=cp$.Pi=cp$.RadiansPerDegree=cp$.Sqrt2=cp$.ThreePi=cp$.Twopi=null;
},Number);
Object.pj_subclass_("PjReadWriteStream");
PjReadWriteStream.$$def(function(i$,c$,cp$){
i$(function pj_60_60_(anObject){if($asNil$(anObject).pj_class()===$asNil$(this.collection).pj_class()){this.pj_nextPutAll_(anObject)}else{$asNil$(anObject).pj_putOn_(this)};return this});
i$(function pj_atEnd(){if(this.position>=this.readLimit){this.pj_contents()};return this.position>=this.readLimit});
i$(function pj_back(){if(this.pj_position()==0){this.pj_positionError()};this.pj_skip_(-1);return this.pj_peek()});
i$(function pj_contents(){if(1<$asNil$(this.array).pj_size()){this.pj_load_(this.pj_join())};return this.collection});
i$(function pj_emptyCollection(){this.pj_subclassResponsibility();return this});
i$(function pj_initialize(){Object.prototype.pj_initialize.call(this);this.array=Array.pj_with_(this.collection=this.pj_emptyCollection());this.readLimit=0;this.position=0;return this});
i$(function pj_isEmpty(){if(true==this.pj_atEnd()){return this.position==0}else{return false}});
i$(function pj_join(){return this.pj_subclassResponsibility()});
i$(function pj_load_(temp){this.array=Array.pj_with_(temp);this.collection=temp;this.readLimit=$asNil$(temp).pj_size();return temp});
i$(function pj_match_(subCollection){var pattern;pattern=$asNil$(subCollection).pj_readStream();while(false==(true==this.pj_atEnd()||$asNil$(pattern).pj_atEnd())){this.pj_skip_($asNil$($asNil$(pattern).pj_position()).pj_negated());$asNil$(pattern).pj_setToStart();if(false==this.pj_skipTo_($asNil$(pattern).pj_next())){return false};while(true==(true==$asNil$($asNil$(pattern).pj_atEnd()).pj_not()&&$asNil$(this.pj_next()).pj_61_($asNil$(pattern).pj_peek()))){$asNil$(pattern).pj_next()}}return $asNil$(pattern).pj_atEnd()});
i$(function pj_next(){if(true==this.pj_atEnd()){return null};return $asNil$(this.collection).pj_at_(this.position=this.position+1)});
i$(function pj_next_(anInteger){var newArray,$_self_$=this;newArray=$asNil$($asNil$(this.collection).pj_species()).pj_new_(anInteger);(1).pj_to_do_(anInteger,function(index){return $asNil$(newArray).pj_at_put_(index,$_self_$.pj_next())});return newArray});
i$(function pj_nextDelimited_(terminator){var out,ch;out=$asNil$(String.pj_new_(1000)).pj_writeStream();if(true==this.pj_atEnd()){return ""};if(this.pj_next()!==terminator){this.pj_skip_(-1)};while((ch=this.pj_next())!==null){if(ch===terminator){if(this.pj_peek()===terminator){this.pj_next()}else{return $asNil$(out).pj_contents()}};$asNil$(out).pj_nextPut_(ch)}return $asNil$(out).pj_contents()});
i$(function pj_nextPut_(aCharacter){return this.pj_subclassResponsibility()});
i$(function pj_nextPutAll_(aCollection){$asNil$(this.array).pj_addLast_(aCollection);return aCollection});
i$(function pj_on_(temp){this.pj_load_(temp);this.pj_reset();return this});
i$(function pj_peek(){var nextObject;if(true==this.pj_atEnd()){return null};nextObject=this.pj_next();this.position=this.position-1;return nextObject});
i$(function pj_peekBack(){var element;element=this.pj_back();this.pj_skip_(1);return element});
i$(function pj_peekFor_(anObject){var nextObject;if(true==this.pj_atEnd()){return false};nextObject=this.pj_next();if(true==$asNil$(anObject).pj_61_(nextObject)){return true};this.position=this.position-1;return false});
i$(function pj_position(){return this.position});
i$(function pj_position_(anInteger){if(true==$asNil$(anInteger).pj_between_and_(0,this.readLimit)){this.position=anInteger}else{this.pj_positionError()};return this});
i$(function pj_positionError(){this.pj_error_("Attempt to set the position of a PositionableStream out of bounds");return this});
i$(function pj_print_(anObject){$asNil$(anObject).pj_printOn_(this);return this});
i$(function pj_reset(){this.position=0;return this});
i$(function pj_resetContents(){this.position=0;this.readLimit=0;return this});
i$(function pj_setFrom_to_(newStart,newStop){this.position=newStart-1;this.readLimit=newStop;return this});
i$(function pj_setToEnd(){this.position=this.readLimit;return this});
i$(function pj_skip_(n){this.position=$asNil$(this.position).pj_43_(n);return this});
i$(function pj_space(){this.pj_nextPut_(String.pj_space());return this});
i$(function pj_tab(){this.pj_nextPut_(String.pj_tab());return this});
i$(function pj_upTo_(anObject){var newStream,element;newStream=$asNil$($asNil$($asNil$(this.collection).pj_species()).pj_new_(100)).pj_writeStream();while(false==(true==this.pj_atEnd()||$asNil$((element=this.pj_next())).pj_61_(anObject))){$asNil$(newStream).pj_nextPut_(element)}return $asNil$(newStream).pj_contents()});
});
Object.pj_subclass_("PjRectangle");
PjRectangle.$$def(function(i$,c$,cp$){
i$(function pj_containsPoint_(aPoint){if(this.origin<=aPoint){return aPoint<this.corner}else{return false}});
i$(function pj_setPoint_point_(pt1,pt2){this.origin=$asNil$($asNil$($asNil$(pt1).pj_x()).pj_min_($asNil$(pt2).pj_x())).pj_64_($asNil$($asNil$(pt1).pj_y()).pj_min_($asNil$(pt2).pj_y()));this.corner=$asNil$($asNil$($asNil$(pt1).pj_x()).pj_max_($asNil$(pt2).pj_x())).pj_64_($asNil$($asNil$(pt1).pj_y()).pj_max_($asNil$(pt2).pj_y()));return this});
c$(function pj_origin_corner_(originPoint,cornerPoint){return $asNil$(this.pj_basicNew()).pj_setPoint_point_(originPoint,cornerPoint)});
});
Object.pj_subclass_("PjMaterializer");
PjMaterializer.$$def(function(i$,c$,cp$){
c$(function pj_materializeFrom_(anObject){return $asNil$(anObject).pj_materialize()});
c$(function pj_materializeFromArray_(array){var $class;$class=$asNil$(global).pj_instVarNamed_($asNil$(array).pj_first());return $asNil$($class).pj_newFromMaterialized_($asNil$(array).pj_second())});
c$(function pj_materializeFromString_(aString){var array;array=$asNil$(JSON).pj_parse_(aString);return this.pj_materializeFromArray_(array)});
});
Object.pj_subclass_("String");
String.$$def(function(i$,c$,cp$){
i$(function pj_44_(other){return this+other});
i$(function pj_44_(other){return this+other});
i$(function pj_60_(other){return this<other});
i$(function pj_60_61_(other){return this<=other});
i$(function pj_61_(other){return this==other});
i$(function pj_61_(other){return this==other});
i$(function pj_62_(other){return this>other});
i$(function pj_62_61_(other){return this>=other});
i$(function pj_addAll_(aCollection){var $_self_$=this;$asNil$(aCollection).pj_do_(function(each){return $_self_$.pj_add_(each)});return aCollection});
i$(function pj_addAllLast_(aCollection){var $_self_$=this;$asNil$(aCollection).pj_do_(function(each){return $_self_$.pj_addLast_(each)});return aCollection});
i$(function pj_allButFirst(){return this.substring(1)});
i$(function pj_allButFirst_(n){return this.substring(n)});
i$(function pj_allButLast(){return this.substring(0,this.pj_size()-1)});
i$(function pj_allButLast_(n){return this.substring(0,$asNil$(this.pj_size()).pj_45_(n))});
i$(function pj_allSatisfy_(aBlock){var $_err_$={};try{this.pj_do_(function(each){if(true==$asNil$(aBlock).pj_value_(each)){return null}else{throw $_err_$=false}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_anySatisfy_(aBlock){var $_err_$={};try{this.pj_do_(function(each){if(true==$asNil$(aBlock).pj_value_(each)){throw $_err_$=true}else{return null}});return false}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_appendTo_(aCollection){return $asNil$(aCollection).pj_addAllLast_(this)});
i$(function pj_asArray(){return Array.pj_from_(this)});
i$(function pj_asCharacter(){return this.charAt(0)});
i$(function pj_asDictionary(){return this.pj_as_(PjDictionary)});
i$(function pj_asElementId(){return $asNil$(document).pj_getElementById_(this)});
i$(function pj_asElementSelector(){return $asNil$(document).pj_querySelector_(this)});
i$(function pj_asInteger(){return parseInt(this)});
i$(function pj_asJsObject(){return this.valueOf()});
i$(function pj_asJsObject(){return this.valueOf()});
i$(function pj_asLowercase(){return this.toLowerCase()});
i$(function pj_asNumber(){return parseFloat(this)});
i$(function pj_asOrderedCollection(){return this.pj_as_(Array)});
i$(function pj_asRegex(){return new RegExp(this)});
i$(function pj_asSet(){return PjSet.pj_withAll_(this)});
i$(function pj_asSortedCollection(){var $1;return ($1=$asNil$(PjSortedCollection.pj_new()),$1.pj_addAll_(this),$1.pj_yourself())});
i$(function pj_asString(){return ""+this});
i$(function pj_asSymbol(){return ""+this});
i$(function pj_asUppercase(){return this.toUpperCase()});
i$(function pj_asciiValue(){return this.charCodeAt(0)});
i$(function pj_associationsDo_(aBlock){this.pj_do_(aBlock);return this});
i$(function pj_at_(index){return this[index - 1];});
i$(function pj_at_(index){return this[index - 1];});
i$(function pj_at_ifAbsent_(index,aBlock){if(true==(index>0&&index>this.pj_size())){return $asNil$(aBlock).pj_value()};return this.pj_at_(index)});
i$(function pj_at_put_(index,anObject){throw new Error("cannot mutate strings");});
i$(function pj_atRandom(){var randomIndex = Math.floor((Math.random() * this.pj_size()) + 1);
return this.pj_at_(randomIndex);});
i$(function pj_basicAt_(aNumber){return this.charCodeAt(aNumber-1)});
i$(function pj_beginsWith_(prefix){return $asNil$(this.substring(0,$asNil$(prefix).pj_size())).pj_61_(prefix)});
i$(function pj_capitalized(){if(true==this.pj_isEmpty()){return this};return $asNil$((this.charAt(0)).toUpperCase()).pj_44_(this.substring(1))});
i$(function pj_charCode(){return this.pj_basicAt_(1)});
i$(function pj_codePoint(){return this.charCodeAt(0)});
i$(function pj_collect_(aBlock){var arr;arr=this.split("");(1).pj_to_do_(this.pj_size(),function(idx){return $asNil$(arr).pj_at_put_(idx,$asNil$(aBlock).pj_value_($asNil$(arr).pj_at_(idx)))});return arr.join("")});
i$(function pj_collect_(aBlock){var arr;arr=this.split("");(1).pj_to_do_(this.pj_size(),function(idx){return $asNil$(arr).pj_at_put_(idx,$asNil$(aBlock).pj_value_($asNil$(arr).pj_at_(idx)))});return arr.join("")});
i$(function pj_copyFrom_(start){return this.substring(start-1)});
i$(function pj_copyFrom_to_(start,stop){return this.substring(start-1,stop)});
i$(function pj_copyReplaceFrom_to_with_(start,stop,replacementCollection){var newSequenceableCollection,newSize,endReplacement;newSize=$asNil$($asNil$(this.pj_size()).pj_45_($asNil$(stop).pj_45_(start)+1)).pj_43_($asNil$(replacementCollection).pj_size());endReplacement=$asNil$((start-1)).pj_43_($asNil$(replacementCollection).pj_size());newSequenceableCollection=$asNil$(this.pj_species()).pj_new_(newSize);if(start>1){$asNil$(newSequenceableCollection).pj_replaceFrom_to_with_startingAt_(1,start-1,this,1)};if(start<=endReplacement){$asNil$(newSequenceableCollection).pj_replaceFrom_to_with_startingAt_(start,endReplacement,replacementCollection,1)};if(endReplacement<newSize){$asNil$(newSequenceableCollection).pj_replaceFrom_to_with_startingAt_(endReplacement+1,newSize,this,stop+1)};return newSequenceableCollection});
i$(function pj_copyWith_(newElement){var newIC;newIC=$asNil$(this.pj_species()).pj_new_(this.pj_size()+1);$asNil$(newIC).pj_replaceFrom_to_with_startingAt_(1,this.pj_size(),this,1);$asNil$(newIC).pj_at_put_($asNil$(newIC).pj_size(),newElement);return newIC});
i$(function pj_copyWithFirst_(newElement){var newIC;newIC=$asNil$(this.pj_species()).pj_ofSize_(this.pj_size()+1);$asNil$(newIC).pj_replaceFrom_to_with_startingAt_(2,this.pj_size()+1,this,1);$asNil$(newIC).pj_at_put_(1,newElement);return newIC});
i$(function pj_copyWithoutIndex_(index){var copy;copy=$asNil$(this.pj_species()).pj_ofSize_(this.pj_size()-1);$asNil$(copy).pj_replaceFrom_to_with_startingAt_(1,index-1,this,1);$asNil$(copy).pj_replaceFrom_to_with_startingAt_(index,$asNil$(copy).pj_size(),this,index+1);return copy});
i$(function pj_cull_(anObject){return $asNil$(anObject).pj_perform_(this)});
i$(function pj_detect_ifFound_(aBlock,foundBlock){this.pj_detect_ifFound_ifNone_(aBlock,foundBlock,function(){return null});return this});
i$(function pj_detect_ifFound_ifNone_(aBlock,foundBlock,exceptionBlock){var $_err_$={};try{this.pj_do_(function(each){if(true==$asNil$(aBlock).pj_value_(each)){throw $_err_$=$asNil$(foundBlock).pj_cull_(each)}else{return null}});return $asNil$(exceptionBlock).pj_value()}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_detect_ifNone_(aBlock,exceptionBlock){return this.pj_detect_ifFound_ifNone_(aBlock,function(element){return element},exceptionBlock)});
i$(function pj_do_(aBlock){for(var i=0,max=this.length;i<max;++i)aBlock(this[i]);return this});
i$(function pj_do_separatedBy_(elementBlock,separatorBlock){for(var i=0,max=this.length;i<max;++i){if(i)separatorBlock();elementBlock(this[i])};return this});
i$(function pj_doWithIndex_(elementAndIndexBlock){return this.pj_withIndexDo_(elementAndIndexBlock)});
i$(function pj_eighth(){return this[7]});
i$(function pj_endsWith_(suffix){return $asNil$(this.substring($asNil$(this.pj_size()).pj_45_($asNil$(suffix).pj_size()))).pj_61_(suffix)});
i$(function pj_fifth(){return this[4]});
i$(function pj_findString_startingAt_(substring,start){return this});
i$(function pj_findTokens_(delimiters){var tokens,keyStart,keyStop,separators;tokens=Array.pj_new();separators=true==$asNil$(delimiters).pj_isCharacter()?Array.pj_with_(delimiters):delimiters;keyStop=1;while(keyStop<=this.pj_size()){keyStart=this.pj_skipDelimiters_startingAt_(separators,keyStop);keyStop=this.pj_findDelimiters_startingAt_(separators,keyStart);if(keyStart<keyStop){$asNil$(tokens).pj_add_(this.pj_copyFrom_to_(keyStart,keyStop-1))}}return tokens});
i$(function pj_first(){return this.pj_at_(1)});
i$(function pj_first(){return this.pj_at_(1)});
i$(function pj_first_(n){return this.substring(0,n)});
i$(function pj_first_(n){return this.substring(0,n)});
i$(function pj_fourth(){return this[3]});
i$(function pj_from_to_put_(startIndex,endIndex,anObject){var written,toWrite,thisWrite;if(startIndex>endIndex){return this};this.pj_at_put_(startIndex,anObject);written=1;toWrite=$asNil$(endIndex).pj_45_(startIndex)+1;while(written<toWrite){thisWrite=$asNil$(written).pj_min_($asNil$(toWrite).pj_45_(written));this.pj_replaceFrom_to_with_startingAt_($asNil$(startIndex).pj_43_(written),$asNil$($asNil$(startIndex).pj_43_(written)).pj_43_(thisWrite)-1,this,startIndex);written=$asNil$(written).pj_43_(thisWrite)}return anObject});
i$(function pj_grownBy_(length){var newCollection,size;size=this.pj_size();newCollection=$asNil$(this.pj_species()).pj_ofSize_($asNil$(size).pj_43_(length));$asNil$(newCollection).pj_replaceFrom_to_with_startingAt_(1,size,this,1);return newCollection});
i$(function pj_hash(){return $asNil$(this.pj_class()).pj_stringHash_initialHash_(this,0)});
i$(function pj_ifEmpty_(aBlock){if(true==this.pj_isEmpty()){return $asNil$(aBlock).pj_value()};return this});
i$(function pj_ifEmpty_(aBlock){if(true==this.pj_isEmpty()){return $asNil$(aBlock).pj_value()};return this});
i$(function pj_includes_(x){if (x.pj_isJSPrimitiveType()) {
if (this.includes(x)) return true;
for(var i=this.length-1;i>=0;--i) if (x==this[i]) return true;
return false}
for(var i=this.length-1;i>=0;--i) if (x.pj_61_(this[i])) return true;
return false});
i$(function pj_includesAll_(aCollection){var $_self_$=this;var $_err_$={};try{$asNil$(aCollection).pj_do_(function(elem){if(true==$_self_$.pj_includes_(elem)){return null}else{throw $_err_$=false}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_indexOf_(x){return this.indexOf(x)+1});
i$(function pj_indexOf_startingAt_(x,n){return this.indexOf(x,n-1)+1});
i$(function pj_inject_into_(thisValue,binaryBlock){var nextValue;nextValue=thisValue;this.pj_do_(function(each){return nextValue=$asNil$(binaryBlock).pj_value_value_(nextValue,each)});return nextValue});
i$(function pj_insert_before_(anObject,spot){this.splice(spot-1, 0, anObject);return anObject});
i$(function pj_isAlphaNumeric(){var $char;$char=this.charAt(0);if(true==$asNil$($char).pj_isLetter()){return true}else{return $asNil$($char).pj_isDigit()}});
i$(function pj_isArray(){return true});
i$(function pj_isCharacter(){return true});
i$(function pj_isCollection(){return true});
i$(function pj_isDigit(){return $asNil$(this.charCodeAt(0)).pj_between_and_(48,57)});
i$(function pj_isEmpty(){return this==""});
i$(function pj_isEmpty(){return this==""});
i$(function pj_isEmptyOrNil(){return this.pj_isEmpty()});
i$(function pj_isJSPrimitiveType(){return true});
i$(function pj_isLetter(){return $asNil$(this.pj_letterCharCodes()).pj_includes_(this.charCodeAt(0))});
i$(function pj_isLiteral(){if(this.pj_class()===Array){return this.pj_allSatisfy_(function(each){return $asNil$(each).pj_isLiteral()})}else{return false}});
i$(function pj_isLiteral(){return true});
i$(function pj_isSelfEvaluating(){return true});
i$(function pj_isSeparator(){var $in;if(($in=$asNil$(this.charCodeAt(0)).pj_asInteger())===32){return true}else{if($in===13){return true}else{if($in===9){return true}else{if($in===10){return true}else{return $in===12}}}}});
i$(function pj_isString(){return true});
i$(function pj_isVowel(){return "AEIOU".pj_includes_(this.pj_asUppercase())});
i$(function pj_join_(anArray){return anArray.join(this)});
i$(function pj_last(){return this.pj_at_(this.pj_size())});
i$(function pj_last(){return this.pj_at_(this.pj_size())});
i$(function pj_last_(n){return this.slice(this.length-n)});
i$(function pj_lastIndexOf_(x){return this.lastIndexOf(x)+1});
i$(function pj_letterCharCodes(){return [65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,170,181,186,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,248,249,250,251,252,253,254,255]});
i$(function pj_lineIndicesDo_(aBlock){var cr,lf,start,sz,nextLF,nextCR;start=1;sz=this.pj_size();cr=String.pj_cr();nextCR=this.pj_indexOf_startingAt_(cr,1);lf=String.pj_lf();nextLF=this.pj_indexOf_startingAt_(lf,1);while(start<=sz){if(true==(nextLF==0&&nextCR==0)){$asNil$(aBlock).pj_value_value_value_(start,sz,sz);return this};if(true==(nextCR==0||0<nextLF&&nextLF<nextCR)){$asNil$(aBlock).pj_value_value_value_(start,nextLF-1,nextLF);start=1+nextLF;nextLF=this.pj_indexOf_startingAt_(lf,start)}else{if(true==$asNil$((1+nextCR)).pj_61_(nextLF)){$asNil$(aBlock).pj_value_value_value_(start,nextCR-1,nextLF);start=1+nextLF;nextCR=this.pj_indexOf_startingAt_(cr,start);nextLF=this.pj_indexOf_startingAt_(lf,start)}else{$asNil$(aBlock).pj_value_value_value_(start,nextCR-1,nextCR);start=1+nextCR;nextCR=this.pj_indexOf_startingAt_(cr,start)}}}return this});
i$(function pj_linesDo_(aBlock){var $_self_$=this;this.pj_lineIndicesDo_(function(start,endWithoutDelimiters,end){return $asNil$(aBlock).pj_value_($_self_$.pj_copyFrom_to_(start,endWithoutDelimiters))});return this});
i$(function pj_materialize(){return PjMaterializer.pj_materializeFromString_(this)});
i$(function pj_ninth(){return this[8]});
i$(function pj_noneSatisfy_(aBlock){var $_err_$={};try{this.pj_do_(function(item){if(true==$asNil$(aBlock).pj_value_(item)){throw $_err_$=false}else{return null}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_notEmpty(){return this!=""});
i$(function pj_notEmpty(){return this!=""});
i$(function pj_printAsLiteralFormOn_(aStream){$asNil$(aStream).pj_nextPut_("#");this.pj_printElementsOn_(aStream);return this});
i$(function pj_printAsSelfEvaluatingFormOn_(aStream){$asNil$(aStream).pj_nextPut_("{");this.pj_do_separatedBy_(function(el){return $asNil$(el).pj_printOn_(aStream)},function(){return $asNil$(aStream).pj_nextPutAll_(". ")});$asNil$(aStream).pj_nextPut_("}");return this});
i$(function pj_printElementsOn_(aStream){$asNil$(aStream).pj_nextPut_("(");this.pj_do_separatedBy_(function(element){return $asNil$(aStream).pj_print_(element)},function(){return $asNil$(aStream).pj_space()});$asNil$(aStream).pj_nextPut_(")");return this});
i$(function pj_printNameOn_(aStream){Object.prototype.pj_printOn_.call(this,aStream);return this});
i$(function pj_printOn_(aStream){this.pj_storeOn_(aStream);return this});
i$(function pj_proxyResponse(){return ""+this});
i$(function pj_putOn_(aStream){this.pj_do_(function(each){return $asNil$(each).pj_putOn_(aStream)});return this});
i$(function pj_readStream(){return PjStringStream.pj_on_(this)});
i$(function pj_reject_(aBlock){return this.pj_select_(function(element){return $asNil$(aBlock).pj_value_(element)===false})});
i$(function pj_remove_(oldObject){var $_self_$=this;return this.pj_remove_ifAbsent_(oldObject,function(){return $_self_$.pj_errorNotFound_(oldObject)})});
i$(function pj_removeAll_(aCollection){var $_self_$=this;if(aCollection===this){return this.pj_removeAll()};$asNil$(aCollection).pj_do_(function(each){return $_self_$.pj_remove_(each)});return aCollection});
i$(function pj_replaceFrom_to_with_(start,stop,replacement){if(false==$asNil$($asNil$(replacement).pj_size()).pj_61_($asNil$(stop).pj_45_(start)+1)){this.pj_error_("Size of replacement doesnt match")};return this.pj_replaceFrom_to_with_startingAt_(start,stop,replacement,1)});
i$(function pj_replaceFrom_to_with_startingAt_(start,stop,replacement,repStart){var repl=[],isString=typeof replacement=="string";
for(var mine=stop-1,other=mine+repStart-start;
mine>=start-1;
--other,--mine
)repl[other]=isString?replacement[other]:String.fromCharCode(replacement[other]);
return this.substring(0,start-1)+repl.join("")+this.substr(stop)});
i$(function pj_reverseDo_(aBlock){var $_self_$=this;$asNil$(this.pj_size()).pj_to_by_do_(1,-1,function(index){return $asNil$(aBlock).pj_value_($_self_$.pj_at_(index))});return this});
i$(function pj_reversed(){return "".pj_join_($asNil$(this.pj_asArray()).pj_reverse())});
i$(function pj_reversed(){return "".pj_join_($asNil$(this.pj_asArray()).pj_reverse())});
i$(function pj_second(){return this[1]});
i$(function pj_select_(aBlock){var result=[];for(var i=0,max=this.length;i<max;++i){if(true==(typeof aBlock=="string"?$asNil$(this[i]).pj_perform_(aBlock):aBlock(this[i])))result.push(this[i])}return result});
i$(function pj_serializationContents(){return this});
i$(function pj_serializationContents(){return this});
i$(function pj_seventh(){return this[6]});
i$(function pj_shouldBePrintedAsLiteral(){return true});
i$(function pj_sixth(){return this[5]});
i$(function pj_size(){return this.length});
i$(function pj_size(){return this.length});
i$(function pj_split_(anArray){return anArray.split(this)});
i$(function pj_storeOn_(aStream){var x,$_self_$=this;$asNil$(aStream).pj_nextPut_("'");(1).pj_to_do_(this.pj_size(),function(i){$asNil$(aStream).pj_nextPut_(x=$_self_$.pj_at_(i));if(x=="'"){return $asNil$(aStream).pj_nextPut_(x)}else{return null}});$asNil$(aStream).pj_nextPut_("'");return this});
i$(function pj_third(){return this[2]});
i$(function pj_to_(other){return $asNil$($asNil$(this.pj_asciiValue()).pj_to_($asNil$(other).pj_asciiValue())).pj_collect_(function(ascii){return String.pj_value_(ascii)})});
i$(function pj_value(){return ""+this});
i$(function pj_value_(anObject){return $asNil$(anObject).pj_perform_(this)});
i$(function pj_with_do_(otherCollection,aBlock){for(var i=0,max=this.length;i<max;++i)aBlock(this[i],otherCollection[i]);return this});
i$(function pj_withIndexDo_(aBlock){for(var i=0,max=this.length;i<max;++i)aBlock(this[i],i+1);return this});
i$(function pj_writePhxJsonOn_(w){$asNil$(w).pj_60_60_(this.pj_asJSON());return this});
i$(function pj_writeStream(){return PjStringStream.pj_new()});
i$(function pj_126_61_(other){return this!=other});
c$(function pj_cr(){return this.pj_value_(13)});
c$(function pj_defaultSize(){return 10});
c$(function pj_escape(){return this.pj_value_(27)});
c$(function pj_fromByteArray_(aByteArray){return $asNil$(aByteArray).pj_asString()});
c$(function pj_instantiateWithPhxJsonReader_instanceJsonObject_(reader,jsonObject){var resultCollection,elements,$1;resultCollection=this.pj_new_($asNil$(jsonObject).pj_size());$asNil$(reader).pj_addKnownObject_(resultCollection);elements=$asNil$(jsonObject).pj_collect_(function(each){return $asNil$(reader).pj_readFromJsObjectOrDictionary_(each)});return ($1=$asNil$(resultCollection),$1.pj_addAll_(elements),$1.pj_yourself())});
c$(function pj_lf(){return this.pj_value_(10)});
c$(function pj_linefeed(){return this.pj_value_(10)});
c$(function pj_new(){return ""});
c$(function pj_new_(ignored){return this.pj_new()});
c$(function pj_newFrom_(aCollection){var newCollection;newCollection=this.pj_new_($asNil$(aCollection).pj_size());$asNil$(newCollection).pj_addAll_(aCollection);return newCollection});
c$(function pj_newFromMaterialized_(materializedObject){return materializedObject});
c$(function pj_newFromMaterialized_(materializedObject){return materializedObject});
c$(function pj_space(){return this.pj_value_(32)});
c$(function pj_streamContents_(aBlock){var stream;stream=PjStringStream.pj_new();$asNil$(aBlock).pj_value_(stream);return $asNil$(stream).pj_contents()});
c$(function pj_stringHash_initialHash_(aString,speciesHash){var stringSize,hash,low;stringSize=$asNil$(aString).pj_size();hash=$asNil$(speciesHash).pj_bitAnd_(268435455);(1).pj_to_do_(stringSize,function(pos){hash=$asNil$(hash).pj_43_($asNil$(aString).pj_basicAt_(pos));low=$asNil$(hash).pj_bitAnd_(16383);return hash=$asNil$($asNil$((9741*low)).pj_43_($asNil$($asNil$((9741*$asNil$(hash).pj_47_47_(16384))).pj_43_(101*low)).pj_bitAnd_(16383)*16384)).pj_bitAnd_(268435455)});return hash});
c$(function pj_tab(){return this.pj_value_(9)});
c$(function pj_value_(anInteger){return String.fromCharCode(anInteger)});
c$(function pj_with_(anObject){var newCollection;newCollection=this.pj_new_(1);$asNil$(newCollection).pj_at_put_(1,anObject);return newCollection});
c$(function pj_with_with_(firstObject,secondObject){var newCollection;newCollection=this.pj_new_(2);$asNil$(newCollection).pj_at_put_(1,firstObject);$asNil$(newCollection).pj_at_put_(2,secondObject);return newCollection});
c$(function pj_with_with_with_(firstObject,secondObject,thirdObject){var newCollection;newCollection=this.pj_new_(3);$asNil$(newCollection).pj_at_put_(1,firstObject);$asNil$(newCollection).pj_at_put_(2,secondObject);$asNil$(newCollection).pj_at_put_(3,thirdObject);return newCollection});
c$(function pj_with_with_with_with_(firstObject,secondObject,thirdObject,fourthObject){var newCollection;newCollection=this.pj_new_(4);$asNil$(newCollection).pj_at_put_(1,firstObject);$asNil$(newCollection).pj_at_put_(2,secondObject);$asNil$(newCollection).pj_at_put_(3,thirdObject);$asNil$(newCollection).pj_at_put_(4,fourthObject);return newCollection});
c$(function pj_withAll_(aCollection){var $1;return ($1=$asNil$(this.pj_new_($asNil$(aCollection).pj_size())),$1.pj_addAll_(aCollection),$1.pj_yourself())});
});
Object.pj_subclass_("PjUndefinedObject");
PjUndefinedObject.$$def(function(i$,c$,cp$){
i$(function pj_61_(other){return null==other});
i$(function pj_asJSON(){return "null"});
i$(function pj_identityHash(){return 273231616});
i$(function pj_ifNil_(aBlock){return $asNil$(aBlock).pj_value()});
i$(function pj_ifNil_ifNotNil_(nilBlock,ifNotNilBlock){return $asNil$(nilBlock).pj_value()});
i$(function pj_ifNotNil_(aBlock){return this});
i$(function pj_ifNotNil_ifNil_(ifNotNilBlock,nilBlock){return $asNil$(nilBlock).pj_value()});
i$(function pj_isEmptyOrNil(){return true});
i$(function pj_isJSPrimitiveType(){return true});
i$(function pj_isLiteral(){return true});
i$(function pj_isNil(){return true});
i$(function pj_isNotNil(){return false});
i$(function pj_notNil(){return false});
i$(function pj_printOn_(aStream){$asNil$(aStream).pj_nextPutAll_("nil");return this});
i$(function pj_proxyResponse(){return this});
i$(function pj_serializationContents(){return this});
i$(function pj_value(){return null});
i$(function pj_writePhxJsonOn_(w){$asNil$(w).pj_60_60_("null");return this});
c$(function pj_javascriptInitialize(){var $1;this.uniqueInstance=this.pj_basicNew();$1=$asNil$(Object);$1.freeze(this.uniqueInstance);$1.freeze(this);return this});
c$(function pj_new(){return Smalltalk.pj_signal_("cannot create instances of UndefinedObject")});
c$(function pj_newFromMaterialized_(anObject){return null});
});
Object.pj_subclass_("GeometryObject");
GeometryObject.$$def(function(i$,c$,cp$){
i$(function pj_error(){return $asNil$(this.pj_class()).pj_error()});
i$(function pj_error_(aString){return $asNil$(this.pj_class()).pj_error_(aString)});
c$(function pj_error(){GeometryError.pj_signal();return this});
c$(function pj_error_(aString){GeometryError.pj_signal_(aString);return this});
});
Object.pj_subclass_("PjSharedPool");
PjSharedPool.$$def(function(i$,c$,cp$){
});
Object.pj_subclass_("PjProxyInfo");
PjProxyInfo.$$def(function(i$,c$,cp$){
i$(function pj_getJsObject(){return $asNil$(global).pj_instVarNamed_(this.pj_globalName())});
i$(function pj_globalName(){return this.globalName});
i$(function pj_globalName_(anObject){this.globalName=anObject;return this});
i$(function pj_logDescription(){var $_self_$=this;return String.pj_streamContents_(function(ws){$asNil$(ws).pj_nextPutAll_("Proxy ");$asNil$(ws).pj_nextPutAll_(" oid: ");$asNil$(ws).pj_nextPutAll_($_self_$.pj_oid());$asNil$(ws).pj_nextPutAll_(" globalName: ");$asNil$(ws).pj_nextPutAll_($_self_$.pj_globalName());$asNil$(ws).pj_nextPutAll_(" remove: ");return $asNil$(ws).pj_nextPutAll_($_self_$.pj_remove()===true?"true":"false")})});
i$(function pj_oid(){return this.oid});
i$(function pj_oid_(anObject){this.oid=anObject;return this});
i$(function pj_remove(){return this.remove});
i$(function pj_remove_(anObject){this.remove=anObject;return this});
});
Object.pj_subclass_("PjProxyManager");
PjProxyManager.$$def(function(i$,c$,cp$){
c$(function pj_atGlobalVarName_put_(globalId,anObject){$asNil$(global).pj_at_put_(globalId,anObject);return this});
c$(function pj_deleteGlobalVarNamed_(globalId){var obj;if(globalId==null){return this};if(true==$asNil$(globalId).pj_isEmpty()){return this};if((obj=$asNil$(global).pj_instVarNamed_(globalId))!=null){if(obj!=null){$asNil$(global).pj_removeKey_(globalId)}};return this});
c$(function pj_ensureObjectRegistered_(anObject){var oid,globalId;oid=this.pj_ensureOidOnObject_(anObject);globalId=PjProxyManager.pj_nextGlobalVarName();this.pj_atGlobalVarName_put_(globalId,anObject);return $asNil$(oid).pj_45_62_(globalId)});
c$(function pj_ensureOidOnObject_(anObject){var oid,$1;if(($1=this.pj_getOidFrom_(anObject))==null){oid=PjProxyManager.pj_nextOid();this.pj_setOid_on_(oid,anObject);return oid;}else{return $1}});
c$(function pj_getOidFrom_(anObject){return $asNil$(anObject).pj_instVarNamed_(this.pj_oidInstVarName())});
c$(function pj_makeBlockClosureProxy_stopPropagation_for_(withThis,stop,webSocketDelegate){var blockClosure,oid;oid=PjProxyManager.pj_nextOid();blockClosure=function(ev){var target,msg,$1;if(true==stop){$asNil$(ev).pj_stopPropagation()};target=true==withThis?($1=$asNil$(ev).pj_target())==null?$asNil$(ev).pj_sourceElement():$1:null;msg=PjMessageCallback.pj_newWithId();$asNil$(msg).pj_receiverProxyInfo_($asNil$(blockClosure).pj_proxyResponse());$asNil$(msg).pj_eventProxyInfo_($asNil$(ev).pj_proxyResponse());$asNil$(msg).pj_eventTargetProxyInfo_($asNil$(target).pj_proxyResponse());$asNil$(webSocketDelegate).pj_tryToSendMessage_(msg);return true};$asNil$(blockClosure).pj_instVarNamed_put_("$PjRefCount",0);this.pj_setOid_on_(oid,blockClosure);this.pj_atGlobalVarName_put_(oid,blockClosure);return $asNil$(blockClosure).pj_proxyResponse()});
c$(function pj_nextGlobalVarName(){return "$_"+$asNil$(this.pj_nextIdNumber()).pj_asString()});
c$(function pj_nextIdNumber(){var id;cp$.currentId=(id=cp$.currentId)==null?1:id+1;return cp$.currentId});
c$(function pj_nextOid(){return "$_"+$asNil$(this.pj_nextIdNumber()).pj_asString()});
c$(function pj_oidInstVarName(){return "$_oid"});
c$(function pj_setOid_on_(anOid,anObject){$asNil$(anObject).pj_instVarNamed_putHidden_(this.pj_oidInstVarName(),anOid);return this});
cp$.currentId=null;
});
PjSharedPool.pj_subclass_("ChronologyConstants");
ChronologyConstants.$$def(function(i$,c$,cp$){
c$(function pj_initialize(){cp$.SqueakEpoch=2415386;cp$.SecondsInDay=86400;cp$.MicrosecondsInDay=cp$.SecondsInDay*1000000;cp$.SecondsInHour=3600;cp$.SecondsInMinute=60;cp$.MinutesInHour=60;cp$.HoursInDay=24;cp$.NanosInSecond=(10).pj_raisedTo_(9);cp$.NanosInMillisecond=(10).pj_raisedTo_(6);cp$.DayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];cp$.MonthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];cp$.DaysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];return this});
cp$.DayNames=cp$.DaysInMonth=cp$.HoursInDay=cp$.MicrosecondsInDay=cp$.MinutesInHour=cp$.MonthNames=cp$.NanosInMillisecond=cp$.NanosInSecond=cp$.SecondsInDay=cp$.SecondsInHour=null;
cp$.SecondsInMinute=cp$.SqueakEpoch=null;
});
Array.pj_subclass_("PjSet");
PjSet.$$def(function(i$,c$,cp$){
i$(function pj_addFirst_(element){if(true==this.pj_includes_(element)){return element};return Array.prototype.pj_addFirst_.call(this,element)});
i$(function pj_addLast_(element){if(true==this.pj_includes_(element)){return element};return Array.prototype.pj_addLast_.call(this,element)});
i$(function pj_asSet(){return this});
i$(function pj_like_(anObject){if(true==this.pj_includes_(anObject)){return anObject};return null});
i$(function pj_like_ifAbsent_(anObject,aBlock){if(true==this.pj_includes_(anObject)){return anObject};return $asNil$(aBlock).pj_value()});
c$(function pj_phxJsonClassName(){return "Set"});
});
Array.pj_subclass_("PjSortedCollection");
PjSortedCollection.$$def(function(i$,c$,cp$){
i$(function pj_44_(otherCollection){var newSortedCollection;newSortedCollection=Array.prototype.pj_44_.call(this,otherCollection);$asNil$(newSortedCollection).pj_sortBlock_(this.pj_sortBlock());return newSortedCollection});
i$(function pj_61_(aSortedCollection){if(false==$asNil$(this.pj_species()).pj_61_($asNil$(aSortedCollection).pj_species())){return false};if(true==$asNil$(this.sortBlock).pj_61_($asNil$(aSortedCollection).pj_sortBlock())){return Array.prototype.pj_61_.call(this,aSortedCollection)}else{return false}});
i$(function pj_add_(newObject){return Array.prototype.pj_insert_before_.call(this,newObject,this.pj_indexForInserting_(newObject))});
i$(function pj_addAll_(otherCollection){var $_self_$=this;$asNil$(otherCollection).pj_do_(function(each){return $_self_$.pj_add_(each)});return this});
i$(function pj_addFirst_(newObject){this.pj_shouldNotImplement();return this});
i$(function pj_at_put_(anInteger,anObject){this.pj_shouldNotImplement();return this});
i$(function pj_collect_(aBlock){var newCollection;newCollection=Array.pj_new();this.pj_do_(function(each){return $asNil$(newCollection).pj_addLast_($asNil$(aBlock).pj_value_(each))});return newCollection});
i$(function pj_copyEmpty(){return $asNil$(this.pj_species()).pj_sortBlock_(this.sortBlock)});
i$(function pj_defaultSort_to_(i,j){var di,dij,dj,tt,ij,k,l,n,$_self_$=this;if((n=$asNil$((j+1)).pj_45_(i))<=1){return this};di=$asNil$(this.array).pj_at_(i);dj=$asNil$(this.array).pj_at_(j);if(dj<=di){$asNil$(this.array).pj_swap_with_(i,j);tt=di;di=dj;dj=tt};if(n>2){ij=$asNil$($asNil$(i).pj_43_(j)).pj_47_47_(2);dij=$asNil$(this.array).pj_at_(ij);if(di<=dij){if(dj<=dij){$asNil$(this.array).pj_swap_with_(j,ij);dij=dj}}else{$asNil$(this.array).pj_swap_with_(i,ij);dij=di};if(n>3){k=i;l=j;while(true==((function(){l=l-1;if(k<=l){return dij<=$asNil$($_self_$.array).pj_at_(l)}else{return false}}).pj_whileTrue(),(function(){k=k+1;if(k<j){return $asNil$($_self_$.array).pj_at_(k)<=dij}else{return false}}).pj_whileTrue(),k<=l)){$asNil$(this.array).pj_swap_with_(k,l)}this.pj_defaultSort_to_(i,l);this.pj_defaultSort_to_(k,j)}};return this});
i$(function pj_flatCollect_(aBlock){return this.pj_flatCollect_as_(aBlock,Array)});
i$(function pj_fromSton_(stonReader){$asNil$(stonReader).pj_parseNamedInstVarsFor_(this);return this});
i$(function pj_indexForInserting_(newObject){var $_self_$=this;var $_err_$={};try{this.pj_ifEmpty_(function(){throw $_err_$=1});this.pj_withIndexDo_(function(element,index){if(true==$asNil$($_self_$.pj_sortBlock()).pj_value_value_(newObject,element)){throw $_err_$=index}else{return null}});return this.pj_size()+1}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_initialize(){Array.prototype.pj_initialize.call(this);this.pj_instVarNamed_put_("firstIndex",1);this.pj_instVarNamed_put_("lastIndex",0);this.pj_sortBlock_(function(a,b){return a<=b});return this});
i$(function pj_insert_before_(newObject,index){this.pj_splice_remove_element_(index-1,0,newObject);return this});
i$(function pj_intersection_(aCollection){var $1;return ($1=$asNil$($asNil$(this.pj_class()).pj_sortBlock_(this.sortBlock)),$1.pj_addAll_($asNil$(this.pj_asSet()).pj_intersection_(aCollection)),$1.pj_yourself())});
i$(function pj_join_(aCollection){var $1;return ($1=$asNil$(Array.prototype.pj_join_.call(this,aCollection)),$1.pj_reSort(),$1.pj_yourself())});
i$(function pj_median(){var size,middle;size=this.pj_size();middle=$asNil$((size+1)).pj_47_47_(2);if(true==$asNil$(size).pj_even()){return $asNil$($asNil$(this.pj_at_(middle)).pj_43_(this.pj_at_(middle+1))).pj_47_(2)}else{return this.pj_at_(middle)}});
i$(function pj_reSort(){var copy,$_self_$=this;copy=$asNil$(this.pj_species()).pj_sortBlock_(this.pj_sortBlock());$asNil$(copy).pj_addAll_(this);$asNil$(copy).pj_withIndexDo_(function(each,index){return Array.prototype.pj_at_put_.call($_self_$,index,each)});return this});
i$(function pj_replaceFrom_to_with_startingAt_(start,stop,replacement,repStart){var repStop,$_self_$=this;repStop=$asNil$($asNil$(repStart).pj_43_(stop)).pj_45_(start);$asNil$(repStart).pj_to_do_(repStop,function(otherIndex){return $_self_$.pj_add_($asNil$(replacement).pj_at_(otherIndex))});return this});
i$(function pj_sort_(aSortBlock){Array.prototype.pj_sort_.call(this,aSortBlock);this.sortBlock=aSortBlock;return this});
i$(function pj_sortBlock(){return this.sortBlock});
i$(function pj_sortBlock_(aBlock){this.sortBlock=aBlock;if(this.pj_size()>0){this.pj_reSort()};return this});
i$(function pj_stonOn_(stonWriter){$asNil$(stonWriter).pj_writeObject_(this);return this});
c$(function pj_jsSortUsing_(aBlock){if(true==this.pj_respondsTo_("sortUsing:")){return this.pj_sortUsing_(aBlock)}else{return $asNil$(this.pj_new()).pj_sortBlock_(aBlock)}});
c$(function pj_sortBlock_(aBlock){return this.pj_sortUsing_(aBlock)});
c$(function pj_sortUsing_(aBlockOrSortFunction){return $asNil$(this.pj_new()).pj_sortBlock_(aBlockOrSortFunction)});
});
PjCollection.pj_subclass_("PjDictionary");
PjDictionary.$$def(function(i$,c$,cp$){
i$(function pj_asDictionary(){return this});
i$(function pj_asJsObject(){var jsObject;jsObject=Object.pj_new();this.pj_keysAndValuesDo_(function(key,value){return $asNil$(jsObject).pj_at_put_(key,$asNil$(value).pj_asJsObject())});return jsObject});
i$(function pj_at_(key){return PjCollection.prototype.pj_at_.call(this,this.pj_keyFrom_(key))});
i$(function pj_at_ifAbsent_(key,aBlock){return PjCollection.prototype.pj_at_ifAbsent_.call(this,this.pj_keyFrom_(key),aBlock)});
i$(function pj_at_ifAbsentPut_(key,aBlock){var $_self_$=this;return this.pj_at_ifAbsent_(key,function(){return $_self_$.pj_at_put_(key,$asNil$(aBlock).pj_value())})});
i$(function pj_at_ifPresent_(key,aBlock){return PjCollection.prototype.pj_at_ifPresent_.call(this,this.pj_keyFrom_(key),aBlock)});
i$(function pj_at_ifPresent_ifAbsent_(key,aBlock,anotherBlock){return PjCollection.prototype.pj_at_ifPresent_ifAbsent_.call(this,this.pj_keyFrom_(key),aBlock,anotherBlock)});
i$(function pj_at_put_(key,value){return PjCollection.prototype.pj_at_put_.call(this,this.pj_keyFrom_(key),value)});
i$(function pj_collect_(aBlock){var resultDict;resultDict=$asNil$(this.pj_class()).pj_new();this.pj_keysAndValuesDo_(function(key,value){return $asNil$(resultDict).pj_at_put_(key,$asNil$(aBlock).pj_value_(value))});return resultDict});
i$(function pj_keyFrom_(anObject){if($asNil$(anObject).pj_class()===String){return anObject};if($asNil$(anObject).pj_class()===Number){return anObject};return $asNil$(anObject).pj_hash()});
i$(function pj_writePhxJsonRepresentationOn_(w){$asNil$(this.pj_asJsObject()).pj_writePhxJsonRepresentationOn_(w);return this});
c$(function pj_phxJsonClassName(){return "Dictionary"});
});
Function.pj_subclass_("PjClass");
PjClass.$$def(function(i$,c$,cp$){
i$(function pj_adoptInstance_(anObject){anObject.__proto__=this.prototype;return this});
i$(function pj_allSubclasses(){var scan,scanTop;scan=Array.pj_withAll_(this.pj_subclasses());scanTop=1;while($asNil$(scan).pj_size()>scanTop){$asNil$(scan).pj_addAll_($asNil$($asNil$(scan).pj_at_(scanTop)).pj_subclasses());scanTop=scanTop+1}return scan});
i$(function pj_allSubclassesDo_(aBlock){this.pj_subclassesDo_(function(cl){$asNil$(aBlock).pj_value_(cl);return $asNil$(cl).pj_allSubclassesDo_(aBlock)});return this});
i$(function pj_class(){return Smalltalk.pj_metaclassOf_(this)});
i$(function pj_classVarNamed_(aString){return $asNil$(this.pj_classPool()).pj_at_(aString)});
i$(function pj_classVarNamed_put_(aString,otherString){$asNil$(this.pj_classPool()).pj_at_put_(aString,otherString);return this});
i$(function pj_classVarNames(){return $asNil$($asNil$(this.pj_classPool()).pj_keys()).pj_sort()});
i$(function pj_hasClassMethod_(aSymbol){return this.__proto__.hasOwnProperty(Smalltalk.pj_makePharoJsSelector_(aSymbol))});
i$(function pj_isBehavior(){return true});
i$(function pj_isBlock(){return false});
i$(function pj_isClass(){return true});
i$(function pj_name(){var s=this.name||this.prototype.toString();
if (s.substr(0,1)=="[") s=s.substr(8,s.length-9);
return s});
i$(function pj_newFromJsonString_(jsonString){var newInstance;newInstance=JSON.parse(jsonString);this.pj_adoptInstance_(newInstance);return newInstance});
i$(function pj_printOn_(aStream){$asNil$(aStream).pj_nextPutAll_(this.pj_name());return this});
i$(function pj_prototype(){return this.prototype});
i$(function pj_subclasses(){return this.subclasses});
i$(function pj_subclassesDo_(aBlock){$asNil$(this.pj_subclasses()).pj_do_(aBlock);return this});
i$(function pj_theMetaClass(){return this.pj_class()});
i$(function pj_theNonMetaClass(){return this});
});
PjMagnitude.pj_subclass_("PjLookupKey");
PjLookupKey.$$def(function(i$,c$,cp$){
i$(function pj_60_(aLookupKey){return this.key<$asNil$(aLookupKey).pj_key()});
i$(function pj_61_(aLookupKey){if(true==$asNil$(this.pj_species()).pj_61_($asNil$(aLookupKey).pj_species())){return $asNil$(this.key).pj_61_($asNil$(aLookupKey).pj_key())}else{return false}});
i$(function pj_key(){return this.key});
i$(function pj_key_(anObject){this.key=anObject;return this});
c$(function pj_key_(aKey){return $asNil$(this.pj_basicNew()).pj_key_(aKey)});
});
PjReadWriteStream.pj_subclass_("PjArrayStream");
PjArrayStream.$$def(function(i$,c$,cp$){
i$(function pj_emptyCollection(){return []});
i$(function pj_join(){var temp;temp=Array.pj_new();$asNil$(this.array).pj_do_(function(each){return $asNil$(each).pj_do_(function(element){return $asNil$(temp).pj_addLast_(element)})});return temp});
i$(function pj_nextPut_(aValue){$asNil$(this.array).pj_addLast_([aValue]);return aValue});
c$(function pj_on_(aCollection){return $asNil$(this.pj_new()).pj_on_(aCollection)});
});
PjReadWriteStream.pj_subclass_("PjStringStream");
PjStringStream.$$def(function(i$,c$,cp$){
i$(function pj_emptyCollection(){return ""});
i$(function pj_join(){return "".pj_join_(this.array)});
i$(function pj_nextPut_(aCharacter){$asNil$(this.array).pj_addLast_($asNil$(aCharacter).pj_asString());return aCharacter});
c$(function pj_on_(aCollection){return $asNil$(this.pj_new()).pj_on_(aCollection)});
});
GeometryObject.pj_subclass_("GMatrix");
GMatrix.$$def(function(i$,c$,cp$){
i$(function pj_61_(anObject){if(this===anObject){return true};if(false==$asNil$(this.pj_class()).pj_61_($asNil$(anObject).pj_class())){return false};return $asNil$(this.rows).pj_61_($asNil$(anObject).pj_rows())});
i$(function pj_at_(anInteger){return $asNil$(this.pj_rows()).pj_at_(anInteger)});
i$(function pj_at_at_(anInteger,anInteger2){return $asNil$(this.pj_at_(anInteger)).pj_at_(anInteger2)});
i$(function pj_determinant(){this.pj_flag_("todo");return $asNil$($asNil$(this.pj_at_at_(1,1)).pj_42_(this.pj_at_at_(2,2))).pj_45_($asNil$(this.pj_at_at_(1,2)).pj_42_(this.pj_at_at_(2,1)))});
i$(function pj_hash(){return $asNil$($asNil$(this.rows).pj_hash()).pj_negated()});
i$(function pj_rows(){return this.rows});
i$(function pj_rows_(anObject){this.rows=anObject;return this});
c$(function pj_rows_(aCollection){var $1;return ($1=$asNil$(this.pj_new()),$1.pj_rows_(aCollection),$1.pj_yourself())});
});
GeometryObject.pj_subclass_("GVector");
GVector.$$def(function(i$,c$,cp$){
i$(function pj_42_(anOperand){return $asNil$(anOperand).pj_multiplyWithVector_(this)});
i$(function pj_43_(anOperand){return $asNil$(anOperand).pj_additionWithVector_(this)});
i$(function pj_47_(aGVector){this.pj_shouldBeImplemented();return this});
i$(function pj_61_(anotherPoint){if(this===anotherPoint){return true};if(false==$asNil$(this.pj_class()).pj_61_($asNil$(anotherPoint).pj_class())){return false};return $asNil$(this.coordinates).pj_61_($asNil$(anotherPoint).pj_coordinates())});
i$(function pj_adaptToNumber_andSend_(anInteger,aString){return this.pj_perform_with_(aString,anInteger)});
i$(function pj_additionWithVector_(aGVector){return $asNil$($asNil$(this.pj_coordinates()).pj_43_($asNil$(aGVector).pj_coordinates())).pj_asGVector()});
i$(function pj_angleWith_(aGVector){var angle;this.pj_flag_("todo");if($asNil$(this.pj_coordinates()).pj_numberOfDimensions()!=2){this.pj_error_("For now oriented angle is only implemented for 2D vectors. Feel free to contribute.")};angle=this.pj_nonOrientedAngleWith_(aGVector);if($asNil$(GMatrix.pj_rows_([this.pj_coordinates(),$asNil$(aGVector).pj_coordinates()])).pj_determinant()>0){return angle}else{return $asNil$(angle).pj_explementary()};return this});
i$(function pj_coordinates(){return this.coordinates});
i$(function pj_coordinates(){return this.coordinates});
i$(function pj_coordinates_(anObject){this.coordinates=anObject;return this});
i$(function pj_coordinates_(anObject){this.coordinates=anObject;return this});
i$(function pj_coordinatesWith_collect_(aCollection,aBlock){return $asNil$(this.pj_coordinates()).pj_coordinatesWith_collect_($asNil$(aCollection).pj_coordinates(),aBlock)});
i$(function pj_coordinatesWith_do_(aCollection,aBlock){$asNil$(this.pj_coordinates()).pj_coordinatesWith_do_($asNil$(aCollection).pj_coordinates(),aBlock);return this});
i$(function pj_dotProduct_(aGVector){return $asNil$(this.pj_coordinatesWith_collect_($asNil$(aGVector).pj_coordinates(),function(point1,point2){return $asNil$(point1).pj_42_(point2)})).pj_sum()});
i$(function pj_hash(){var coordHash;coordHash=$asNil$(this.coordinates).pj_hash();return $asNil$($asNil$(coordHash).pj_squared()).pj_43_(coordHash)});
i$(function pj_isZeroVector(){return false});
i$(function pj_length(){return $asNil$($asNil$(this.pj_coordinates()).pj_inject_into_(0,function(res,number){return $asNil$(res).pj_43_($asNil$(number).pj_squared())})).pj_sqrt()});
i$(function pj_multiplyWithVector_(aGVector){this.pj_shouldBeImplemented();return this});
i$(function pj_nonOrientedAngleWith_(aGVector){var $_self_$=this;if(true==$asNil$(aGVector).pj_isZeroVector()){return $asNil$(aGVector).pj_angleWith_(this)};return $asNil$((function(){return $asNil$($asNil$($_self_$.pj_dotProduct_(aGVector)).pj_47_($asNil$($_self_$.pj_length()).pj_42_($asNil$(aGVector).pj_length()))).pj_arcCos()}).pj_on_do_(DomainError,function(){return $asNil$($asNil$($asNil$($_self_$.pj_dotProduct_(aGVector)).pj_47_($asNil$($_self_$.pj_length()).pj_42_($asNil$(aGVector).pj_length()))).pj_roundTo_(1.0e-14)).pj_arcCos()})).pj_radians()});
i$(function pj_postCopy(){GeometryObject.prototype.pj_postCopy.call(this);this.pj_coordinates_($asNil$(this.pj_coordinates()).pj_copy());return this});
i$(function pj_printOn_(aStream){GeometryObject.prototype.pj_printOn_.call(this,aStream);$asNil$(this.pj_coordinates()).pj_printCoordinatesOn_(aStream);return this});
i$(function pj_x(){return $asNil$(this.pj_coordinates()).pj_x()});
i$(function pj_x_(aNumber){$asNil$(this.pj_coordinates()).pj_x_(aNumber);return this});
i$(function pj_y(){return $asNil$(this.pj_coordinates()).pj_y()});
i$(function pj_y_(aNumber){$asNil$(this.pj_coordinates()).pj_y_(aNumber);return this});
c$(function pj_coordinates_(aCoordinates){var $1;if(true==$asNil$($asNil$(aCoordinates).pj_coordinates()).pj_allSatisfy_(function(e){return e==0})){return GZeroVector.pj_coordinates_(aCoordinates)};return ($1=$asNil$(this.pj_new()),$1.pj_coordinates_(aCoordinates),$1.pj_yourself())});
c$(function pj_withCollection_(aCollection){return this.pj_coordinates_(GCoordinates.pj_withCollection_(aCollection))});
c$(function pj_x_y_(aNumber,anotherNumber){return this.pj_coordinates_(G2DCoordinates.pj_x_y_(aNumber,anotherNumber))});
});
GeometryObject.pj_subclass_("GCoordinates");
GCoordinates.$$def(function(i$,c$,cp$){
i$(function pj_42_(aNumber){if(false==$asNil$(aNumber).pj_isNumber()){this.pj_error_("Coordinates can only be multiplicated by a number.")};return $asNil$(this.pj_class()).pj_newWithCoordinates_(this.pj_coordinatesCollect_(function(number){return $asNil$(number).pj_42_(aNumber)}))});
i$(function pj_43_(otherCoordinates){if(false==$asNil$(this.pj_numberOfDimensions()).pj_61_($asNil$(otherCoordinates).pj_numberOfDimensions())){this.pj_error_("For now we accept only addition of coordinates from the same dimension. We will see later if we should do more.")};return $asNil$(this.pj_class()).pj_newWithCoordinates_($asNil$(otherCoordinates).pj_coordinatesWith_collect_(this.coordinates,function(number1,number2){return $asNil$(number1).pj_43_(number2)}))});
i$(function pj_45_(otherCoordinates){if(false==$asNil$(this.pj_numberOfDimensions()).pj_61_($asNil$(otherCoordinates).pj_numberOfDimensions())){this.pj_error_("For now we accept only substraction of coordinates from the same dimension. We will see later if we should do more.")};return $asNil$(this.pj_class()).pj_newWithCoordinates_($asNil$(otherCoordinates).pj_coordinatesWith_collect_(this.coordinates,function(number2,number1){return $asNil$(number1).pj_45_(number2)}))});
i$(function pj_47_(aNumber){if(false==$asNil$(aNumber).pj_isNumber()){this.pj_error_("Coordinates can only be divided by a number.")};return $asNil$(this.pj_class()).pj_newWithCoordinates_(this.pj_coordinatesCollect_(function(number){return $asNil$(number).pj_47_(aNumber)}))});
i$(function pj_61_(otherCoordinates){var $_err_$={};try{if(this===otherCoordinates){return true};if(false==$asNil$(this.pj_class()).pj_61_($asNil$(otherCoordinates).pj_class())){return false};$asNil$(otherCoordinates).pj_coordinatesWith_do_(this.coordinates,function(number2,number1){if(true==$asNil$(number1).pj_61_(number2)){return null}else{throw $_err_$=false}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_asGPoint(){return GPoint.pj_coordinates_(this)});
i$(function pj_asGVector(){return GVector.pj_coordinates_(this)});
i$(function pj_at_(anInteger){return $asNil$(this.pj_coordinates()).pj_at_(anInteger)});
i$(function pj_coordinates(){return this.coordinates});
i$(function pj_coordinatesCollect_(aBlock){return $asNil$(this.coordinates).pj_collect_(aBlock)});
i$(function pj_coordinatesWith_collect_(aCollection,aBlock){return $asNil$(this.coordinates).pj_with_collect_(aCollection,aBlock)});
i$(function pj_coordinatesWith_do_(aCollection,aBlock){$asNil$(this.coordinates).pj_with_do_(aCollection,aBlock);return this});
i$(function pj_fold_(aBlock){return $asNil$(this.pj_coordinates()).pj_fold_(aBlock)});
i$(function pj_hash(){return $asNil$($asNil$(this.coordinates).pj_hash()).pj_negated()});
i$(function pj_initialize(){GeometryObject.prototype.pj_initialize.call(this);this.coordinates=Array.pj_new_(this.pj_numberOfDimensions());return this});
i$(function pj_initializeWith_(anArray){if(false==$asNil$($asNil$(anArray).pj_size()).pj_61_(this.pj_numberOfDimensions())){this.pj_error_("The provided array must have the same size than my number of dimensions which is "+$asNil$($asNil$(this.pj_numberOfDimensions()).pj_size()).pj_asString())};this.coordinates=anArray;return this});
i$(function pj_inject_into_(aSeed,aBlock){return $asNil$(this.pj_coordinates()).pj_inject_into_(aSeed,aBlock)});
i$(function pj_lowerLimitsWith_(otherCoordinates){return $asNil$(this.pj_class()).pj_newWithCoordinates_(this.pj_coordinatesWith_collect_($asNil$(otherCoordinates).pj_coordinates(),function(number1,number2){return $asNil$(number1).pj_min_(number2)}))});
i$(function pj_numberOfDimensions(){return $asNil$(this.pj_class()).pj_numberOfDimensions()});
i$(function pj_postCopy(){GeometryObject.prototype.pj_postCopy.call(this);this.coordinates=$asNil$(this.coordinates).pj_copy();return this});
i$(function pj_printCoordinatesOn_(aStream){$asNil$(aStream).pj_60_60_("(");$asNil$(this.coordinates).pj_do_separatedBy_(function(number){return $asNil$(aStream).pj_60_60_($asNil$(number).pj_asString())},function(){return $asNil$(aStream).pj_60_60_(",")});$asNil$(aStream).pj_60_60_(")");return this});
i$(function pj_printOn_(aStream){this.pj_printCoordinatesOn_(aStream);return this});
i$(function pj_upperLimitsWith_(otherCoordinates){return $asNil$(this.pj_class()).pj_newWithCoordinates_(this.pj_coordinatesWith_collect_($asNil$(otherCoordinates).pj_coordinates(),function(number1,number2){return $asNil$(number1).pj_max_(number2)}))});
i$(function pj_x(){return $asNil$(this.coordinates).pj_at_(1)});
i$(function pj_x_(aNumber){$asNil$(this.coordinates).pj_at_put_(1,aNumber);return this});
i$(function pj_y(){return $asNil$(this.coordinates).pj_at_(2)});
i$(function pj_y_(aNumber){$asNil$(this.coordinates).pj_at_put_(2,aNumber);return this});
c$(function pj_newWithCoordinates_(aCollection){var $1;return ($1=$asNil$(this.pj_basicNew()),$1.pj_initializeWith_(aCollection),$1.pj_yourself())});
c$(function pj_numberOfDimensions(){return this.pj_subclassResponsibility()});
c$(function pj_withCollection_(aCollection){var $_self_$=this;return $asNil$(this.pj_allSubclasses()).pj_detect_ifFound_ifNone_(function(e){return $asNil$($asNil$(e).pj_numberOfDimensions()).pj_61_($asNil$(aCollection).pj_size())},function($class){var $1;return ($1=$asNil$($asNil$($class).pj_basicNew()),$1.pj_initializeWith_($asNil$(aCollection).pj_asArray()),$1.pj_yourself())},function(){return $_self_$.pj_error_("This amount of coordinated is not yet managed.")})});
});
Error.pj_subclass_("GeometryError");
GeometryError.$$def(function(i$,c$,cp$){
});
GeometryObject.pj_subclass_("GElement");
GElement.$$def(function(i$,c$,cp$){
i$(function pj_boundaryContains_(aPoint){return this.pj_subclassResponsibility()});
i$(function pj_boundaryContainsAny_(points){var $_self_$=this;return $asNil$(points).pj_anySatisfy_(function(point){return $_self_$.pj_boundaryContains_(point)})});
i$(function pj_boundaryContainsWhichOf_(points){var $_self_$=this;return $asNil$(points).pj_select_(function(point){return $_self_$.pj_boundaryContains_(point)})});
i$(function pj_contains_(aPoint){this.pj_flag_("todo");if(true==this.pj_includes_(aPoint)){return $asNil$(this.pj_boundaryContains_(aPoint)).pj_not()}else{return false}});
i$(function pj_includes_(aPoint){this.pj_flag_("todo");return this.pj_subclassResponsibility()});
i$(function pj_intersectionsWith_(anElement){return this.pj_subclassResponsibility()});
i$(function pj_intersectionsWithArc_(anArc){return $asNil$(this.pj_intersectionsWithEllipse_(GCircle.pj_center_radius_($asNil$(anArc).pj_center(),$asNil$(anArc).pj_radius()))).pj_select_(function(point){return $asNil$(anArc).pj_includes_(point)})});
i$(function pj_intersectionsWithEllipse_(aGEllipse){return this.pj_subclassResponsibility()});
i$(function pj_intersectionsWithLine_(aGLine){return this.pj_subclassResponsibility()});
i$(function pj_intersectionsWithPoint_(aPoint){if(true==this.pj_boundaryContains_(aPoint)){return [aPoint]}else{return []}});
i$(function pj_intersectionsWithPolygon_(aGPolygon){var $_self_$=this;return $asNil$($asNil$($asNil$(aGPolygon).pj_edges()).pj_flatCollect_(function(segment){return $asNil$(segment).pj_intersectionsWith_($_self_$)})).pj_asSet()});
i$(function pj_intersectionsWithRay_(aGRay){return $asNil$($asNil$($asNil$(aGRay).pj_asGLine()).pj_intersectionsWith_(this)).pj_select_(function(point){return $asNil$(aGRay).pj_includes_(point)})});
i$(function pj_intersectionsWithSegment_(aGSegment){return $asNil$($asNil$($asNil$(aGSegment).pj_asGLine()).pj_intersectionsWith_(this)).pj_select_(function(point){return $asNil$(aGSegment).pj_includes_(point)})});
i$(function pj_translateBy_(aPoint){this.pj_subclassResponsibility();return this});
c$(function pj_isAbstract(){return this==GElement});
});
PjDomController.pj_subclass_("PhxJsonWriter");
PhxJsonWriter.$$def(function(i$,c$,cp$){
i$(function pj_60_60_(aString){$asNil$(this.stream).pj_nextPutAll_(aString);return this});
i$(function pj_comma(){this.pj_60_60_(",");return this});
i$(function pj_doBetweenCurlyBraces_(aBlock){this.pj_60_60_("{");$asNil$(aBlock).pj_value();this.pj_60_60_("}");return this});
i$(function pj_doBetweenSquareBrackets_(aBlock){this.pj_60_60_("[");$asNil$(aBlock).pj_value();this.pj_60_60_("]");return this});
i$(function pj_identityIndexOf_(anObject){var $_err_$={};try{$asNil$(this.knownObjects).pj_doWithIndex_(function(obj,index){if(obj===anObject){throw $_err_$=index}else{return null}});return null}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_initialize(){this.stream="".pj_writeStream();this.knownObjects=Array.pj_new();return this});
i$(function pj_string(){return $asNil$(this.stream).pj_contents()});
i$(function pj_writeKeyName_andValue_(key,anObject){this.pj_writeQuoted_(key);this.pj_60_60_(":");if(true==$asNil$(anObject).pj_isBlock()){$asNil$(anObject).pj_value()}else{if(anObject==null){this.pj_60_60_("null");}else{this.pj_60_60_($asNil$(anObject).pj_asJSON())}};return this});
i$(function pj_writeQuoted_(aString){$asNil$($asNil$(this.pj_60_60_("\"")).pj_60_60_(aString)).pj_60_60_("\"");return this});
i$(function pj_writeReferenceFor_or_(anObject,aBlock){var i,$_self_$=this;if((i=this.pj_identityIndexOf_(anObject))!=null){if(false==$asNil$(i).pj_isZero()){this.pj_doBetweenCurlyBraces_(function(){return $_self_$.pj_writeKeyName_andValue_("instRef",i)});return this}};$asNil$(this.knownObjects).pj_add_(anObject);$asNil$(aBlock).pj_value();return this});
});
Error.pj_subclass_("ArithmeticError");
ArithmeticError.$$def(function(i$,c$,cp$){
});
PjDomController.pj_subclass_("PjMessage");
PjMessage.$$def(function(i$,c$,cp$){
i$(function pj_contents(){return this.contents});
i$(function pj_contents_(anObject){this.contents=anObject;return this});
i$(function pj_id(){return this.id});
i$(function pj_id_(anObject){this.id=anObject;return this});
i$(function pj_initialize(){PjDomController.prototype.pj_initialize.call(this);return this});
i$(function pj_logDescription(){var $_self_$=this;return String.pj_streamContents_(function(ws){var c;$asNil$(ws).pj_nextPutAll_($asNil$($_self_$.pj_class()).pj_name());$asNil$(ws).pj_nextPutAll_(" id: ");$asNil$(ws).pj_nextPutAll_($asNil$($_self_$.pj_id()).pj_printString());if((c=$_self_$.pj_contents())==null){return null;}else{$asNil$(ws).pj_nextPutAll_(" contents: ");return $asNil$(ws).pj_nextPutAll_(c)}})});
i$(function pj_needsToBeQueued(){return true});
c$(function pj_newWithContents_(contents){var $1;return ($1=$asNil$(this.pj_newWithId()),$1.pj_contents_(contents),$1.pj_yourself())});
c$(function pj_newWithId(){var $1;return ($1=$asNil$(this.pj_new()),$1.pj_id_(this.pj_nextMessageId()),$1.pj_yourself())});
c$(function pj_nextMessageId(){var id;cp$.currentId=(id=cp$.currentId)==null?1:id+1;return cp$.currentId});
cp$.currentId=null;
});
Error.pj_subclass_("AssertionFailure");
AssertionFailure.$$def(function(i$,c$,cp$){
});
ArithmeticError.pj_subclass_("DomainError");
DomainError.$$def(function(i$,c$,cp$){
i$(function pj_from(){return this.from});
i$(function pj_from_(start){this.from=start;return this});
i$(function pj_to(){return this.to});
i$(function pj_to_(end){this.to=end;return this});
c$(function pj_signal_from_(signallerText,start){return this.pj_signal_from_to_(signallerText,start,Number.pj_infinity())});
c$(function pj_signal_from_to_(signallerText,start,end){var $1;return ($1=$asNil$(this.pj_new()),$1.pj_from_(start),$1.pj_to_(end),$1.pj_signal_(signallerText))});
c$(function pj_signal_to_(signallerText,end){return this.pj_signal_from_to_(signallerText,$asNil$(Number.pj_infinity()).pj_negated(),end)});
c$(function pj_signalFrom_(start){return this.pj_signalFrom_to_(start,Number.pj_infinity())});
c$(function pj_signalFrom_to_(start,end){var msgStart,msgEnd;msgStart=true==(true==$asNil$(start).pj_isFloat()&&$asNil$($asNil$(start).pj_isFinite()).pj_not())?"(-infinity":"["+$asNil$(start).pj_printString();msgEnd=true==(true==$asNil$(end).pj_isFloat()&&$asNil$($asNil$(end).pj_isFinite()).pj_not())?"infinity)":$asNil$($asNil$(end).pj_printString()).pj_44_("]");return this.pj_signal_from_to_("Value outside "+msgStart+" , "+msgEnd,start,end)});
c$(function pj_signalTo_(end){return this.pj_signalFrom_to_($asNil$(Number.pj_infinity()).pj_negated(),end)});
});
Object.pj_subclass_("Date");
Date.$$def(function(i$,c$,cp$){
i$(function pj_43_(otherObject){return $asNil$(otherObject).pj_addDateAndTime_(this)});
i$(function pj_45_(anObject){return $asNil$(anObject).pj_subtractFromDateAndTime_(this)});
i$(function pj_asDateAndTime(){return this});
i$(function pj_asDateAndTime(){return this});
i$(function pj_basicSubtractFromDateAndTime_(other){return other - this;});
i$(function pj_dayOfMonth(){return this.pj_getDate()});
i$(function pj_dayOfMonth(){return this.pj_getDate()});
i$(function pj_dayOfWeek(){return this.pj_getDay()+1});
i$(function pj_dayOfWeek(){return this.pj_getDay()+1});
i$(function pj_daysInYear(){return $asNil$(this.pj_asYear()).pj_daysInYear()});
i$(function pj_hour(){return this.pj_hour24()});
i$(function pj_hour(){return this.pj_hour24()});
i$(function pj_hour12(){var hour24;hour24=this.pj_hour24();if(hour24==0){return 12};if(hour24>12){return hour24-12};return hour24});
i$(function pj_hour12(){var hour24;hour24=this.pj_hour24();if(hour24==0){return 12};if(hour24>12){return hour24-12};return hour24});
i$(function pj_hour24(){return this.pj_getHours()});
i$(function pj_hour24(){return this.pj_getHours()});
i$(function pj_milliSecond(){return this.pj_getMilliseconds()});
i$(function pj_milliSecond(){return this.pj_getMilliseconds()});
i$(function pj_minute(){return this.pj_getMinutes()});
i$(function pj_minute(){return this.pj_getMinutes()});
i$(function pj_monthIndex(){return this.pj_getMonth()+1});
i$(function pj_monthIndex(){return this.pj_getMonth()+1});
i$(function pj_monthIndex_(anInteger){return this.pj_month_(anInteger-1)});
i$(function pj_monthIndex_(anInteger){return this.pj_month_(anInteger-1)});
i$(function pj_printString(){let d = Math.abs(this.getTimezoneOffset());
d = [
    "0" + (this.getMonth() + 1),
    "0" + this.getDate(),
    "0" + this.getHours(),
    "0" + this.getMinutes(),
    "0" + this.getSeconds(),
"0" + (d/60|0),
"0" + d%60
  ].map(component => component.slice(-2)); // take last 2 digits of every component
  // join the components into date
  return ("000"+ this.getFullYear()).slice(-4)+"-"+d.slice(0, 2).join("-") + "T" + d.slice(2,5).join(":") + (this.getTimezoneOffset()<0?"+":"-") + d.slice(-2).join(":")});
i$(function pj_second(){return this.pj_getSeconds()});
i$(function pj_second(){return this.pj_getSeconds()});
i$(function pj_serializationContents(){return this});
i$(function pj_subtractFromDateAndTime_(aDateAndTime){return PjDuration.pj_milliSeconds_(this.pj_basicSubtractFromDateAndTime_(aDateAndTime))});
i$(function pj_writePhxJsonRepresentationOn_(w){$asNil$(w).pj_writeQuoted_(this.pj_toISOString());return this});
i$(function pj_year(){return this.pj_getFullYear()});
i$(function pj_year(){return this.pj_getFullYear()});
c$(function pj_fromString_(aString){return new this(aString)});
c$(function pj_instantiateWithPhxJsonReader_instanceJsonObject_(reader,str){return new Date(str);});
c$(function pj_newFromMaterialized_(jsonString){return new Date(jsonString)});
c$(function pj_now(){return new this()});
c$(function pj_now(){return new this()});
c$(function pj_phxJsonClassName(){return "DateAndTime"});
c$(function pj_today(){return this.pj_now()});
c$(function pj_todayHour_minute_(hour,minute){return this.pj_todayHour_minute_second_(hour,minute,0)});
c$(function pj_todayHour_minute_second_(hour,minute,second){var $1;return ($1=$asNil$(this.pj_new()),$1.pj_setHours_(hour),$1.pj_setMinutes_(minute),$1.pj_setSeconds_(second),$1.pj_yourself())});
c$(function pj_tomorrowHour_minute_(hour,minute){return this.pj_tomorrowHour_minute_second_(hour,minute,0)});
c$(function pj_tomorrowHour_minute_second_(hour,minute,second){return $asNil$(this.pj_todayHour_minute_second_(hour,minute,second)).pj_43_((1).pj_day())});
c$(function pj_year_month_day_hour_minute_second_(year,month1To12,day1To31,hour,minute,second){return new this(year, month1To12 - 1, day1To31, hour, minute, second)});
});
PjMagnitude.pj_subclass_("PjDuration");
PjDuration.$$def(function(i$,c$,cp$,$ChronologyConstants){
i$(function pj_42_(operand){return $asNil$(this.pj_class()).pj_nanoSeconds_($asNil$($asNil$(this.pj_asNanoSeconds()).pj_42_(operand)).pj_asInteger())});
i$(function pj_43_(operand){return $asNil$(this.pj_class()).pj_nanoSeconds_($asNil$(this.pj_asNanoSeconds()).pj_43_($asNil$(operand).pj_asNanoSeconds()))});
i$(function pj_45_(operand){return this.pj_43_($asNil$(operand).pj_negated())});
i$(function pj_47_(operand){if(true==$asNil$(operand).pj_isNumber()){return $asNil$(this.pj_class()).pj_nanoSeconds_($asNil$($asNil$(this.pj_asNanoSeconds()).pj_47_(operand)).pj_asInteger())}else{return $asNil$(this.pj_asNanoSeconds()).pj_47_($asNil$($asNil$(operand).pj_asDuration()).pj_asNanoSeconds())}});
i$(function pj_60_(comparand){return this.pj_asNanoSeconds()<$asNil$(comparand).pj_asNanoSeconds()});
i$(function pj_61_(comparand){if(this===comparand){return true}else{if(true==$asNil$(this.pj_species()).pj_61_($asNil$(comparand).pj_species())){return $asNil$(this.pj_asNanoSeconds()).pj_61_($asNil$(comparand).pj_asNanoSeconds())}else{return false}}});
i$(function pj_abs(){return $asNil$(this.pj_class()).pj_seconds_nanoSeconds_($asNil$(this.seconds).pj_abs(),$asNil$(this.nanos).pj_abs())});
i$(function pj_addDateAndTime_(aDateAndTime){var $1;return ($1=$asNil$(Date.pj_year_month_day_hour_minute_second_($asNil$(aDateAndTime).pj_year(),$asNil$(aDateAndTime).pj_monthIndex(),$asNil$($asNil$(aDateAndTime).pj_dayOfMonth()).pj_43_(this.pj_days()),$asNil$($asNil$(aDateAndTime).pj_hour24()).pj_43_(this.pj_hoursCount()),$asNil$($asNil$(aDateAndTime).pj_minute()).pj_43_(this.pj_minutesCount()),$asNil$($asNil$(aDateAndTime).pj_second()).pj_43_(this.pj_secondsCount()))),$1.pj_setMilliseconds_($asNil$($asNil$(aDateAndTime).pj_getMilliseconds()).pj_43_(this.pj_millisecondsCount())),$1.pj_yourself())});
i$(function pj_asDays(){return $asNil$(this.pj_asHours()).pj_47_(24)});
i$(function pj_asDuration(){return this});
i$(function pj_asHours(){return $asNil$(this.pj_asMinutes()).pj_47_(60.0)});
i$(function pj_asMicroseconds(){return $asNil$($asNil$($asNil$(this.seconds).pj_42_($ChronologyConstants.NanosInSecond)).pj_43_(this.nanos)).pj_47_47_((10).pj_raisedToInteger_(3))});
i$(function pj_asMilliSeconds(){return $asNil$($asNil$($asNil$(this.seconds).pj_42_($ChronologyConstants.NanosInSecond)).pj_43_(this.nanos)).pj_47_47_((10).pj_raisedToInteger_(6))});
i$(function pj_asMinutes(){return $asNil$(this.pj_asNanoSeconds()).pj_47_(6.0e10)});
i$(function pj_asNanoSeconds(){return $asNil$($asNil$(this.seconds).pj_42_($ChronologyConstants.NanosInSecond)).pj_43_(this.nanos)});
i$(function pj_asSeconds(){return this.seconds});
i$(function pj_days(){return $asNil$(this.seconds).pj_quo_($ChronologyConstants.SecondsInDay)});
i$(function pj_daysCount(){return $asNil$(this.pj_daysSecondsCount()).pj_quo_(this.pj_secondsInDay())});
i$(function pj_daysSecondsCount(){return $asNil$(this.pj_weeksSecondsCount()).pj_rem_(this.pj_secondsInWeek())});
i$(function pj_hash(){return $asNil$(this.seconds).pj_bitXor_(this.nanos)});
i$(function pj_hours(){return $asNil$($asNil$(this.seconds).pj_rem_($ChronologyConstants.SecondsInDay)).pj_quo_($ChronologyConstants.SecondsInHour)});
i$(function pj_hoursCount(){return $asNil$(this.pj_hoursSecondsCount()).pj_quo_($ChronologyConstants.SecondsInHour)});
i$(function pj_hoursSecondsCount(){return $asNil$(this.pj_daysSecondsCount()).pj_rem_(this.pj_secondsInDay())});
i$(function pj_initialize(){PjMagnitude.prototype.pj_initialize.call(this);this.pj_seconds_nanoSeconds_(0,0);return this});
i$(function pj_millisecondsCount(){return this.pj_wholeMilliseconds()});
i$(function pj_minutes(){return $asNil$($asNil$(this.seconds).pj_rem_($ChronologyConstants.SecondsInHour)).pj_quo_($ChronologyConstants.SecondsInMinute)});
i$(function pj_minutesCount(){return this.pj_minutes()});
i$(function pj_monthSecondsCount(){return $asNil$(this.pj_totalSeconds()).pj_rem_(this.pj_secondsInYear())});
i$(function pj_monthsCount(){return $asNil$(this.pj_monthSecondsCount()).pj_quo_(this.pj_secondsInMonth())});
i$(function pj_nanoSeconds(){return this.nanos});
i$(function pj_negated(){return $asNil$(this.pj_class()).pj_seconds_nanoSeconds_($asNil$(this.seconds).pj_negated(),$asNil$(this.nanos).pj_negated())});
i$(function pj_negative(){return $asNil$(this.pj_positive()).pj_not()});
i$(function pj_positive(){if(this.seconds==0){return $asNil$(this.nanos).pj_positive()}else{return $asNil$(this.seconds).pj_positive()}});
i$(function pj_seconds(){return $asNil$(this.seconds).pj_rem_($ChronologyConstants.SecondsInMinute)});
i$(function pj_seconds_nanoSeconds_(secondCount,nanoCount){this.seconds=secondCount;this.nanos=$asNil$(nanoCount).pj_rounded();while(true==(this.nanos<0&&this.seconds>0)){this.seconds=this.seconds-1;this.nanos=$asNil$(this.nanos).pj_43_($ChronologyConstants.NanosInSecond)}while(true==(this.seconds<0&&this.nanos>0)){this.seconds=this.seconds+1;this.nanos=$asNil$(this.nanos).pj_45_($ChronologyConstants.NanosInSecond)}return this});
i$(function pj_secondsCount(){return this.pj_seconds()});
i$(function pj_secondsInDay(){return $asNil$(this.pj_class()).pj_secondsInDay()});
i$(function pj_secondsInMonth(){return $asNil$(this.pj_class()).pj_secondsInMonth()});
i$(function pj_secondsInWeek(){return $asNil$(this.pj_class()).pj_secondsInWeek()});
i$(function pj_secondsInYear(){return $asNil$(this.pj_class()).pj_secondsInYear()});
i$(function pj_ticks(){var days;days=this.pj_days();return Array.pj_with_with_with_(days,$asNil$(this.seconds).pj_45_($asNil$(days).pj_42_($ChronologyConstants.SecondsInDay)),this.nanos)});
i$(function pj_totalSeconds(){if(this.nanos==0){return this.seconds}else{return $asNil$(this.pj_asNanoSeconds()).pj_47_(1000000000)}});
i$(function pj_weeksCount(){return $asNil$(this.pj_weeksSecondsCount()).pj_quo_(this.pj_secondsInWeek())});
i$(function pj_weeksSecondsCount(){return $asNil$(this.pj_monthSecondsCount()).pj_rem_(this.pj_secondsInMonth())});
i$(function pj_wholeMicroseconds(){return $asNil$($asNil$(this.nanos).pj_rem_(1000000)).pj_quo_(1000)});
i$(function pj_wholeMilliseconds(){return $asNil$(this.nanos).pj_quo_(1000000)});
i$(function pj_wholeNanoseconds(){return $asNil$(this.nanos).pj_rem_(1000)});
i$(function pj_yearsCount(){return $asNil$(this.pj_totalSeconds()).pj_quo_(this.pj_secondsInYear())});
c$(function pj_days_(aNumber){return this.pj_seconds_nanoSeconds_($asNil$(aNumber).pj_42_($ChronologyConstants.SecondsInDay),0)});
c$(function pj_days_hours_minutes_seconds_(days,hours,minutes,seconds){return this.pj_days_hours_minutes_seconds_nanoSeconds_(days,hours,minutes,seconds,0)});
c$(function pj_days_hours_minutes_seconds_nanoSeconds_(days,hours,minutes,seconds,nanos){return this.pj_seconds_nanoSeconds_($asNil$($asNil$($asNil$($asNil$(days).pj_42_($ChronologyConstants.SecondsInDay)).pj_43_($asNil$(hours).pj_42_($ChronologyConstants.SecondsInHour))).pj_43_($asNil$(minutes).pj_42_($ChronologyConstants.SecondsInMinute))).pj_43_(seconds),nanos)});
c$(function pj_days_seconds_(days,seconds){return $asNil$(this.pj_basicNew()).pj_seconds_nanoSeconds_($asNil$($asNil$(days).pj_42_($ChronologyConstants.SecondsInDay)).pj_43_(seconds),0)});
c$(function pj_hours_(aNumber){return this.pj_seconds_nanoSeconds_($asNil$(aNumber).pj_42_($ChronologyConstants.SecondsInHour),0)});
c$(function pj_milliSeconds_(milliCount){return this.pj_seconds_nanoSeconds_($asNil$(milliCount).pj_quo_(1000),$asNil$($asNil$(milliCount).pj_rem_(1000)).pj_42_($ChronologyConstants.NanosInMillisecond))});
c$(function pj_minutes_(aNumber){return this.pj_seconds_nanoSeconds_($asNil$(aNumber).pj_42_($ChronologyConstants.SecondsInMinute),0)});
c$(function pj_months_(aNumber){return this.pj_seconds_($asNil$(aNumber).pj_42_(this.pj_secondsInMonth()))});
c$(function pj_nanoSeconds_(nanos){var quo;quo=$asNil$(nanos).pj_quo_($ChronologyConstants.NanosInSecond);return $asNil$(this.pj_basicNew()).pj_seconds_nanoSeconds_(quo,$asNil$(nanos).pj_45_($asNil$(quo).pj_42_($ChronologyConstants.NanosInSecond)))});
c$(function pj_seconds_(seconds){return this.pj_seconds_nanoSeconds_(seconds,0)});
c$(function pj_seconds_nanoSeconds_(seconds,nanos){return $asNil$(this.pj_basicNew()).pj_seconds_nanoSeconds_($asNil$(seconds).pj_truncated(),$asNil$($asNil$($asNil$(seconds).pj_fractionPart()).pj_42_($ChronologyConstants.NanosInSecond)).pj_43_(nanos))});
c$(function pj_secondsInDay(){return 86400});
c$(function pj_secondsInMonth(){return 2628000});
c$(function pj_secondsInWeek(){return 604800});
c$(function pj_secondsInYear(){return 31536000});
c$(function pj_weeks_(aNumber){return this.pj_days_seconds_(aNumber*7,0)});
c$(function pj_years_(aNumber){return this.pj_days_seconds_(aNumber*365,0)});
c$(function pj_zero(){return $asNil$(this.pj_basicNew()).pj_seconds_nanoSeconds_(0,0)});
},ChronologyConstants);
GCoordinates.pj_subclass_("G2DCoordinates");
G2DCoordinates.$$def(function(i$,c$,cp$){
c$(function pj_numberOfDimensions(){return 2});
c$(function pj_x_y_(aNumber,anotherNumber){var $1;return ($1=$asNil$(this.pj_new()),$1.pj_x_(aNumber),$1.pj_y_(anotherNumber),$1.pj_yourself())});
});
PjLookupKey.pj_subclass_("PjAssociation");
PjAssociation.$$def(function(i$,c$,cp$){
i$(function pj_61_(anAssociation){if(true==PjLookupKey.prototype.pj_61_.call(this,anAssociation)){return $asNil$(this.value).pj_61_($asNil$(anAssociation).pj_value())}else{return false}});
i$(function pj_key_value_(aKey,anObject){this.key=aKey;this.value=anObject;return this});
i$(function pj_value(){return this.value});
i$(function pj_value_(anObject){this.value=anObject;return this});
c$(function pj_key_value_(newKey,newValue){return $asNil$(this.pj_basicNew()).pj_key_value_(newKey,newValue)});
c$(function pj_phxJsonClassName(){return "Association"});
});
GVector.pj_subclass_("GZeroVector");
GZeroVector.$$def(function(i$,c$,cp$){
i$(function pj_angleWith_(aGVector){return (0).pj_radians()});
i$(function pj_isZeroVector(){return true});
c$(function pj_coordinates_(aCoordinates){var $1;return ($1=$asNil$(this.pj_new()),$1.pj_coordinates_(aCoordinates),$1.pj_yourself())});
});
GElement.pj_subclass_("G1DElement");
G1DElement.$$def(function(i$,c$,cp$){
i$(function pj_boundaryContains_(aPoint){return this.pj_includes_(aPoint)});
i$(function pj_length(){return this.pj_subclassResponsibility()});
c$(function pj_isAbstract(){return this==G1DElement});
});
GElement.pj_subclass_("GShape");
GShape.$$def(function(i$,c$,cp$){
i$(function pj_area(){return this.pj_subclassResponsibility()});
i$(function pj_center(){return $asNil$(this.pj_encompassingRectangle()).pj_center()});
i$(function pj_encompassingRectangle(){return this.pj_subclassResponsibility()});
i$(function pj_extent(){return $asNil$(this.pj_encompassingRectangle()).pj_extent()});
i$(function pj_fitInExtent_(anExtent){this.pj_subclassResponsibility();return this});
i$(function pj_perimeter(){return this.pj_subclassResponsibility()});
i$(function pj_scaleBy_(aPoint){this.pj_subclassResponsibility();return this});
i$(function pj_semiperimeter(){return $asNil$(this.pj_perimeter()).pj_47_(2)});
c$(function pj_isAbstract(){return this==GShape});
});
PjMessage.pj_subclass_("PjMessageC2s");
PjMessageC2s.$$def(function(i$,c$,cp$){
i$(function pj_evaluateInContext_(aMessageContext){return this});
i$(function pj_inResponseToId(){return null});
i$(function pj_isCallback(){return false});
i$(function pj_shouldEvaluateImmediately(){return false});
});
ArithmeticError.pj_subclass_("ZeroDivide");
ZeroDivide.$$def(function(i$,c$,cp$){
i$(function pj_dividend(){return this.dividend});
i$(function pj_dividend_(argument){this.dividend=argument;return this});
i$(function pj_isResumable(){return true});
c$(function pj_dividend_(argument){var $1;return ($1=$asNil$(this.pj_new()),$1.pj_dividend_(argument),$1.pj_yourself())});
c$(function pj_signalWithDividend_(aDividend){return $asNil$(this.pj_dividend_(aDividend)).pj_signal()});
});
PjMessageC2s.pj_subclass_("PjMessageCallback");
PjMessageCallback.$$def(function(i$,c$,cp$){
i$(function pj_eventProxyInfo(){return this.eventProxyInfo});
i$(function pj_eventProxyInfo_(anObject){this.eventProxyInfo=anObject;return this});
i$(function pj_eventTargetProxyInfo(){return this.eventTargetProxyInfo});
i$(function pj_eventTargetProxyInfo_(anObject){this.eventTargetProxyInfo=anObject;return this});
i$(function pj_isCallback(){return true});
i$(function pj_logDescription(){var $_self_$=this;return String.pj_streamContents_(function(ws){$asNil$(ws).pj_nextPutAll_($asNil$($_self_$.pj_class()).pj_name());$asNil$(ws).pj_nextPutAll_(" id: ");$asNil$(ws).pj_nextPutAll_($asNil$($_self_$.pj_id()).pj_asString());$asNil$(ws).pj_nextPutAll_(" ");return $_self_$.pj_printDetailsOn_(ws)})});
i$(function pj_printDetailsOn_(ws){var pi;$asNil$(ws).pj_nextPutAll_(" rcvr: ");$asNil$(ws).pj_nextPutAll_((pi=this.pj_receiverProxyInfo())==null?"-":$asNil$(pi).pj_logDescription());$asNil$(ws).pj_nextPutAll_(" event: ");$asNil$(ws).pj_nextPutAll_((pi=this.pj_eventProxyInfo())==null?"-":$asNil$(pi).pj_logDescription());return this});
i$(function pj_receiverProxyInfo(){return this.receiverProxyInfo});
i$(function pj_receiverProxyInfo_(anObject){this.receiverProxyInfo=anObject;return this});
});
G1DElement.pj_subclass_("GPoint");
GPoint.$$def(function(i$,c$,cp$){
i$(function pj_43_(aGVector){var $1;return ($1=$asNil$(this.pj_copy()),$1.pj_translateBy_(aGVector),$1.pj_yourself())});
i$(function pj_45_(aPoint){return $asNil$($asNil$(this.pj_coordinates()).pj_45_($asNil$(aPoint).pj_coordinates())).pj_asGVector()});
i$(function pj_61_(anotherPoint){if(this===anotherPoint){return true};if(false==$asNil$(this.pj_class()).pj_61_($asNil$(anotherPoint).pj_class())){return false};return $asNil$(this.coordinates).pj_61_($asNil$(anotherPoint).pj_coordinates())});
i$(function pj_61_126_(aPoint){return $asNil$(this.pj_distanceTo_(aPoint)).pj_61_126_(0)});
i$(function pj_additionWithVector_(aGVector){return this.pj_43_(aGVector)});
i$(function pj_asGPoint(){return this});
i$(function pj_asPoint(){return $asNil$(this.pj_x()).pj_64_(this.pj_y())});
i$(function pj_center(){return this});
i$(function pj_coordinates(){return this.coordinates});
i$(function pj_coordinates(){return this.coordinates});
i$(function pj_coordinates_(anObject){this.coordinates=anObject;return this});
i$(function pj_coordinates_(anObject){this.coordinates=anObject;return this});
i$(function pj_coordinatesWith_collect_(aCollection,aBlock){return $asNil$(this.pj_coordinates()).pj_coordinatesWith_collect_($asNil$(aCollection).pj_coordinates(),aBlock)});
i$(function pj_coordinatesWith_do_(aCollection,aBlock){$asNil$(this.pj_coordinates()).pj_coordinatesWith_do_($asNil$(aCollection).pj_coordinates(),aBlock);return this});
i$(function pj_distanceTo_(aGPoint){return $asNil$(this.pj_45_(aGPoint)).pj_length()});
i$(function pj_hash(){return $asNil$($asNil$(this.coordinates).pj_hash()).pj_squared()});
i$(function pj_includes_(aGPoint){return $asNil$(aGPoint).pj_61_126_(this)});
i$(function pj_intersectionsWith_(anElement){return $asNil$(anElement).pj_intersectionsWithPoint_(this)});
i$(function pj_intersectionsWithEllipse_(aGEllipse){return $asNil$(aGEllipse).pj_intersectionsWithPoint_(this)});
i$(function pj_intersectionsWithLine_(aGLine){return $asNil$(aGLine).pj_intersectionsWithPoint_(this)});
i$(function pj_length(){return 0});
i$(function pj_postCopy(){G1DElement.prototype.pj_postCopy.call(this);this.pj_coordinates_($asNil$(this.pj_coordinates()).pj_copy());return this});
i$(function pj_printOn_(aStream){G1DElement.prototype.pj_printOn_.call(this,aStream);$asNil$(this.pj_coordinates()).pj_printCoordinatesOn_(aStream);return this});
i$(function pj_rotateBy_(aGAngle){this.pj_rotateBy_about_(aGAngle,(0).pj_44_(0));return this});
i$(function pj_rotateBy_about_(aGAngle,aGPoint){var cos,sin,diffX,diffY;cos=$asNil$(aGAngle).pj_cos();sin=$asNil$(aGAngle).pj_sin();diffX=$asNil$(this.pj_x()).pj_45_($asNil$(aGPoint).pj_x());diffY=$asNil$(this.pj_y()).pj_45_($asNil$(aGPoint).pj_y());this.pj_x_($asNil$($asNil$($asNil$(cos).pj_42_(diffX)).pj_45_($asNil$(sin).pj_42_(diffY))).pj_43_($asNil$(aGPoint).pj_x()));this.pj_y_($asNil$($asNil$($asNil$(sin).pj_42_(diffX)).pj_43_($asNil$(cos).pj_42_(diffY))).pj_43_($asNil$(aGPoint).pj_y()));return this});
i$(function pj_rotatedBy_(aGAngle){return this.pj_rotatedBy_about_(aGAngle,(0).pj_44_(0))});
i$(function pj_rotatedBy_about_(aGAngle,aGPoint){var cos,sin,diffX,diffY;cos=$asNil$(aGAngle).pj_cos();sin=$asNil$(aGAngle).pj_sin();diffX=$asNil$(this.pj_x()).pj_45_($asNil$(aGPoint).pj_x());diffY=$asNil$(this.pj_y()).pj_45_($asNil$(aGPoint).pj_y());return $asNil$($asNil$($asNil$($asNil$(cos).pj_42_(diffX)).pj_45_($asNil$(sin).pj_42_(diffY))).pj_43_($asNil$(aGPoint).pj_x())).pj_44_($asNil$($asNil$($asNil$(sin).pj_42_(diffX)).pj_43_($asNil$(cos).pj_42_(diffY))).pj_43_($asNil$(aGPoint).pj_y()))});
i$(function pj_rsScaleWith_(anAthensAffineTransform){return $asNil$($asNil$(anAthensAffineTransform).pj_transform_(this)).pj_asGPoint()});
i$(function pj_segment_(aPoint){return GSegment.pj_with_with_(this,aPoint)});
i$(function pj_translateBy_(aVector){this.coordinates=$asNil$(this.coordinates).pj_43_($asNil$(aVector).pj_coordinates());return this});
i$(function pj_x(){return $asNil$(this.pj_coordinates()).pj_x()});
i$(function pj_x_(aNumber){$asNil$(this.pj_coordinates()).pj_x_(aNumber);return this});
i$(function pj_y(){return $asNil$(this.pj_coordinates()).pj_y()});
i$(function pj_y_(aNumber){$asNil$(this.pj_coordinates()).pj_y_(aNumber);return this});
c$(function pj_coordinates_(aCoordinates){var $1;return ($1=$asNil$(this.pj_new()),$1.pj_coordinates_(aCoordinates),$1.pj_yourself())});
c$(function pj_withCollection_(aCollection){return this.pj_coordinates_(GCoordinates.pj_withCollection_(aCollection))});
c$(function pj_x_y_(aNumber,anotherNumber){var $1;return ($1=$asNil$(this.pj_new()),$1.pj_coordinates_(G2DCoordinates.pj_x_y_(aNumber,anotherNumber)),$1.pj_yourself())});
});
G1DElement.pj_subclass_("GSegment");
GSegment.$$def(function(i$,c$,cp$){
i$(function pj_61_(aSegment){if(this===aSegment){return true};if(false==$asNil$(this.pj_class()).pj_61_($asNil$(aSegment).pj_class())){return false};if(true==(true==$asNil$(this.v1).pj_61_126_($asNil$(aSegment).pj_v1())&&$asNil$(this.v2).pj_61_126_($asNil$(aSegment).pj_v2()))){return true}else{if(true==$asNil$(this.v1).pj_61_126_($asNil$(aSegment).pj_v2())){return $asNil$(this.v2).pj_61_126_($asNil$(aSegment).pj_v1())}else{return false}}});
i$(function pj_angleWith_(aSegment){return $asNil$($asNil$(this.pj_v1()).pj_45_(this.pj_v2())).pj_angleWith_($asNil$($asNil$(aSegment).pj_v1()).pj_45_($asNil$(aSegment).pj_v2()))});
i$(function pj_asGLine(){return GLine.pj_through_and_(this.v1,this.v2)});
i$(function pj_distanceTo_(aGPoint){this.pj_flag_("todo");return $asNil$(this.pj_asGLine()).pj_distanceTo_(aGPoint)});
i$(function pj_hash(){return $asNil$($asNil$(this.v1).pj_hash()).pj_bitXor_($asNil$(this.v2).pj_hash())});
i$(function pj_includes_(aGPoint){return $asNil$($asNil$($asNil$(this.v2).pj_distanceTo_(aGPoint)).pj_43_($asNil$(aGPoint).pj_distanceTo_(this.v1))).pj_61_126_(this.pj_length())});
i$(function pj_intersectionsWith_(anElement){return $asNil$(anElement).pj_intersectionsWithSegment_(this)});
i$(function pj_intersectionsWithEllipse_(aGEllipse){return $asNil$(aGEllipse).pj_intersectionsWithSegment_(this)});
i$(function pj_intersectionsWithLine_(aLine){return $asNil$(aLine).pj_intersectionsWithSegment_(this)});
i$(function pj_length(){return $asNil$($asNil$(this.v2).pj_45_(this.v1)).pj_length()});
i$(function pj_midPoint(){return $asNil$($asNil$($asNil$($asNil$(this.v1).pj_coordinates()).pj_43_($asNil$(this.v2).pj_coordinates())).pj_47_(2)).pj_asGPoint()});
i$(function pj_perpendicularBisector(){this.pj_flag_("todo");return GLine.pj_a_b_c_($asNil$($asNil$(this.v2).pj_x()).pj_45_($asNil$(this.v1).pj_x()),$asNil$($asNil$(this.v2).pj_y()).pj_45_($asNil$(this.v1).pj_y()),$asNil$($asNil$($asNil$($asNil$($asNil$($asNil$(this.v1).pj_x()).pj_42_($asNil$(this.v1).pj_x())).pj_45_($asNil$($asNil$(this.v2).pj_x()).pj_42_($asNil$(this.v2).pj_x()))).pj_43_($asNil$($asNil$(this.v1).pj_y()).pj_42_($asNil$(this.v1).pj_y()))).pj_45_($asNil$($asNil$(this.v2).pj_y()).pj_42_($asNil$(this.v2).pj_y()))).pj_47_(2))});
i$(function pj_printOn_(aStream){$asNil$($asNil$(this.v1).pj_coordinates()).pj_printOn_(aStream);$asNil$(aStream).pj_nextPutAll_(">-<");$asNil$($asNil$(this.v2).pj_coordinates()).pj_printOn_(aStream);return this});
i$(function pj_translateBy_(aGVector){this.v1=$asNil$(this.v1).pj_43_(aGVector);this.v2=$asNil$(this.v2).pj_43_(aGVector);return this});
i$(function pj_v1(){return this.v1});
i$(function pj_v1_(aGPoint){this.v1=$asNil$(aGPoint).pj_asGPoint();return this});
i$(function pj_v2(){return this.v2});
i$(function pj_v2_(aGPoint){this.v2=$asNil$(aGPoint).pj_asGPoint();return this});
i$(function pj_vertices(){return [this.v1,this.v2]});
c$(function pj_with_with_(aPoint1,aPoint2){var $1;return ($1=$asNil$(this.pj_new()),$1.pj_v1_(aPoint1),$1.pj_v2_(aPoint2),$1.pj_yourself())});
});
G1DElement.pj_subclass_("GLine");
GLine.$$def(function(i$,c$,cp$){
i$(function pj_61_(line){var $_self_$=this;if(this===line){return true};if(false==$asNil$(this.pj_class()).pj_61_($asNil$(line).pj_class())){return false};if(false==this.pj_isParallelTo_(line)){return false};return (function(){return $asNil$($_self_$.pj_yFor_(1)).pj_61_126_($asNil$(line).pj_yFor_(1))}).pj_on_do_(GeometryError,function(){return $asNil$($_self_$.pj_xFor_(1)).pj_61_126_($asNil$(line).pj_xFor_(1))})});
i$(function pj_a(){return $asNil$(this.pj_linearEquation()).pj_at_("a")});
i$(function pj_angleWith_(aLine){return $asNil$($asNil$(this.pj_v1()).pj_45_(this.pj_v2())).pj_angleWith_($asNil$($asNil$(aLine).pj_v1()).pj_45_($asNil$(aLine).pj_v2()))});
i$(function pj_asGLine(){return this});
i$(function pj_b(){return $asNil$(this.pj_linearEquation()).pj_at_("b")});
i$(function pj_c(){return $asNil$(this.pj_linearEquation()).pj_at_("c")});
i$(function pj_determinantWith_(aLine){return $asNil$(GMatrix.pj_rows_([[this.pj_a(),this.pj_b()],[$asNil$(aLine).pj_a(),$asNil$(aLine).pj_b()]])).pj_determinant()});
i$(function pj_distanceTo_(aGPoint){return $asNil$($asNil$($asNil$($asNil$($asNil$(this.pj_a()).pj_42_($asNil$(aGPoint).pj_x())).pj_43_($asNil$(this.pj_b()).pj_42_($asNil$(aGPoint).pj_y()))).pj_43_(this.pj_c())).pj_abs()).pj_47_($asNil$($asNil$($asNil$(this.pj_a()).pj_squared()).pj_43_($asNil$(this.pj_b()).pj_squared())).pj_sqrt())});
i$(function pj_hash(){var $_self_$=this;return $asNil$((function(){return $_self_$.pj_yFor_(1)}).pj_on_do_(GeometryError,function(){return $_self_$.pj_xFor_(1)})).pj_hash()});
i$(function pj_includes_(aPoint){return $asNil$($asNil$($asNil$($asNil$(this.pj_a()).pj_42_($asNil$(aPoint).pj_x())).pj_43_($asNil$(this.pj_b()).pj_42_($asNil$(aPoint).pj_y()))).pj_43_(this.pj_c())).pj_61_126_(0)});
i$(function pj_intersectionsWith_(anElement){return $asNil$(anElement).pj_intersectionsWithLine_(this)});
i$(function pj_intersectionsWithEllipse_(aGEllipse){return $asNil$(aGEllipse).pj_intersectionsWithLine_(this)});
i$(function pj_intersectionsWithLine_(aGLine){var p,q,r,x,y,determinant;determinant=this.pj_determinantWith_(aGLine);if(true==$asNil$(determinant).pj_61_126_(0)){return []};p=$asNil$(aGLine).pj_a();q=$asNil$(aGLine).pj_b();r=$asNil$(aGLine).pj_c();x=$asNil$($asNil$($asNil$($asNil$(this.pj_c()).pj_negated()).pj_42_(q)).pj_45_($asNil$($asNil$(r).pj_negated()).pj_42_(this.pj_b()))).pj_47_(determinant);y=$asNil$($asNil$($asNil$(this.pj_a()).pj_42_($asNil$(r).pj_negated())).pj_45_($asNil$(p).pj_42_($asNil$(this.pj_c()).pj_negated()))).pj_47_(determinant);return [$asNil$(x).pj_44_(y)]});
i$(function pj_isParallelTo_(aLine){return $asNil$(this.pj_determinantWith_(aLine)).pj_61_126_(0)});
i$(function pj_length(){return Number.pj_infinity()});
i$(function pj_linearEquation(){var $1;if(($1=this.equationCache)==null){return this.equationCache=this.pj_privateLinearEquationComputation();}else{return $1}});
i$(function pj_printOn_(aStream){if(this.pj_a()!==0){if(this.pj_a()!==1){$asNil$(this.pj_a()).pj_printOn_(aStream)};$asNil$(aStream).pj_nextPutAll_("x ");if($asNil$(this.pj_b()).pj_sign()>=0){$asNil$(aStream).pj_nextPutAll_("+ ")}};if(this.pj_b()!==0){if(this.pj_b()!==1){$asNil$(this.pj_b()).pj_printOn_(aStream)};$asNil$(aStream).pj_nextPutAll_("y")};if(this.pj_c()!==0){$asNil$(aStream).pj_space();if($asNil$(this.pj_c()).pj_sign()>=0){$asNil$(aStream).pj_nextPutAll_("+ ")};$asNil$(this.pj_c()).pj_printOn_(aStream)};$asNil$(aStream).pj_nextPutAll_(" = 0");return this});
i$(function pj_privateLinearEquationComputation(){if(true==$asNil$($asNil$(this.v1).pj_y()).pj_61_($asNil$(this.v2).pj_y())){return PjDictionary.pj_with_with_with_("a".pj_45_62_(0),"b".pj_45_62_(1),"c".pj_45_62_($asNil$($asNil$(this.v1).pj_y()).pj_negated()))};if(true==$asNil$($asNil$(this.v1).pj_x()).pj_61_($asNil$(this.v2).pj_x())){return PjDictionary.pj_with_with_with_("a".pj_45_62_(1),"b".pj_45_62_(0),"c".pj_45_62_($asNil$($asNil$(this.v1).pj_x()).pj_negated()))};return PjDictionary.pj_with_with_with_("a".pj_45_62_($asNil$($asNil$(this.v1).pj_y()).pj_45_($asNil$(this.v2).pj_y())),"b".pj_45_62_($asNil$($asNil$(this.v2).pj_x()).pj_45_($asNil$(this.v1).pj_x())),"c".pj_45_62_($asNil$($asNil$($asNil$($asNil$(this.v1).pj_x()).pj_45_($asNil$(this.v2).pj_x())).pj_42_($asNil$(this.v1).pj_y())).pj_43_($asNil$($asNil$($asNil$(this.v2).pj_y()).pj_45_($asNil$(this.v1).pj_y())).pj_42_($asNil$(this.v1).pj_x()))))});
i$(function pj_resetEquationCache(){this.equationCache=null;return this});
i$(function pj_translateBy_(aGVector){this.pj_v1_($asNil$(this.pj_v1()).pj_43_(aGVector));this.pj_v2_($asNil$(this.pj_v2()).pj_43_(aGVector));return this});
i$(function pj_v1(){return this.v1});
i$(function pj_v1_(aPoint){this.v1=aPoint;this.pj_resetEquationCache();return this});
i$(function pj_v2(){return this.v2});
i$(function pj_v2_(aPoint){this.v2=aPoint;this.pj_resetEquationCache();return this});
i$(function pj_xFor_(anY){if(this.pj_a()==0){this.pj_error_("Cannot answer a x if a = 0")};return $asNil$($asNil$($asNil$($asNil$(anY).pj_42_(this.pj_b())).pj_43_(this.pj_c())).pj_47_(this.pj_a())).pj_negated()});
i$(function pj_yFor_(anX){if(this.pj_b()==0){this.pj_error_("Cannot answer an y if b = 0")};return $asNil$($asNil$($asNil$($asNil$(anX).pj_42_(this.pj_a())).pj_43_(this.pj_c())).pj_47_(this.pj_b())).pj_negated()});
c$(function pj_a_b_c_(a,b,c){if(b==0){return this.pj_through_and_($asNil$($asNil$($asNil$($asNil$((b*1)).pj_43_(c)).pj_47_(a)).pj_negated()).pj_44_(1),$asNil$($asNil$($asNil$($asNil$((b*2)).pj_43_(c)).pj_47_(a)).pj_negated()).pj_44_(2))}else{return this.pj_through_and_((1).pj_44_($asNil$($asNil$($asNil$((a*1)).pj_43_(c)).pj_47_(b)).pj_negated()),(2).pj_44_($asNil$($asNil$($asNil$((a*2)).pj_43_(c)).pj_47_(b)).pj_negated()))}});
c$(function pj_through_and_(aPoint1,aPoint2){var $1;return ($1=$asNil$(this.pj_new()),$1.pj_v1_(aPoint1),$1.pj_v2_(aPoint2),$1.pj_yourself())});
});
GShape.pj_subclass_("GEllipse");
GEllipse.$$def(function(i$,c$,cp$){
i$(function pj_61_(anObject){if(this===anObject){return true};if(false==$asNil$(this.pj_class()).pj_61_($asNil$(anObject).pj_class())){return false};if(true==$asNil$(this.vertex).pj_61_126_($asNil$(anObject).pj_vertex())){if(true==$asNil$(this.center).pj_61_126_($asNil$(anObject).pj_center())){return $asNil$(this.coVertex).pj_61_126_($asNil$(anObject).pj_coVertex())}else{return false}}else{return false}});
i$(function pj_area(){return $asNil$($asNil$(this.pj_semiMajorAxisLength()).pj_42_(this.pj_semiMinorAxisLength())).pj_()});
i$(function pj_boundaryContains_(aPoint){return $asNil$($asNil$($asNil$($asNil$($asNil$(aPoint).pj_x()).pj_45_($asNil$(this.center).pj_x())).pj_squared()).pj_47_($asNil$(this.pj_semiMajorAxisLength()).pj_squared())).pj_43_($asNil$($asNil$($asNil$($asNil$(aPoint).pj_y()).pj_45_($asNil$(this.center).pj_y())).pj_squared()).pj_47_($asNil$(this.pj_semiMinorAxisLength()).pj_squared()))==1});
i$(function pj_center(){return this.center});
i$(function pj_center_(anObject){this.center=anObject;return this});
i$(function pj_coVertex(){return this.coVertex});
i$(function pj_coVertex_(anObject){this.coVertex=anObject;return this});
i$(function pj_encompassingRectangle(){var radiuxPoints;radiuxPoints=[this.vertex,($asNil$(this.center).pj_43_($asNil$(this.center).pj_45_(this.vertex))),this.coVertex,($asNil$(this.center).pj_43_($asNil$(this.center).pj_45_(this.coVertex)))].pj_collect_("coordinates");return GRectangle.pj_origin_corner_($asNil$($asNil$(radiuxPoints).pj_fold_(function(pt1,pt2){return $asNil$(pt1).pj_upperLimitsWith_(pt2)})).pj_asGPoint(),$asNil$($asNil$(radiuxPoints).pj_fold_(function(pt1,pt2){return $asNil$(pt1).pj_lowerLimitsWith_(pt2)})).pj_asGPoint())});
i$(function pj_fitInExtent_(extent){var scales;scales=$asNil$(extent).pj_coordinatesWith_collect_($asNil$($asNil$(this.pj_encompassingRectangle()).pj_extent()).pj_coordinates(),function(number1,number2){return $asNil$(number1).pj_47_(number2)});this.vertex=$asNil$($asNil$($asNil$($asNil$($asNil$(this.vertex).pj_45_(this.center)).pj_coordinates()).pj_coordinatesWith_collect_(scales,function(a,b){return $asNil$(a).pj_42_(b)})).pj_asGVector()).pj_43_(this.center);this.coVertex=$asNil$($asNil$($asNil$($asNil$($asNil$(this.coVertex).pj_45_(this.center)).pj_coordinates()).pj_coordinatesWith_collect_(scales,function(a,b){return $asNil$(a).pj_42_(b)})).pj_asGVector()).pj_43_(this.center);return this});
i$(function pj_foci(){return $asNil$($asNil$(this.pj_majorAxis()).pj_asGLine()).pj_intersectionsWith_(GCircle.pj_center_radius_(this.center,this.pj_fociLocation()))});
i$(function pj_fociLocation(){return $asNil$($asNil$($asNil$(this.pj_semiMajorAxisLength()).pj_squared()).pj_45_($asNil$(this.pj_semiMinorAxisLength()).pj_squared())).pj_sqrt()});
i$(function pj_hash(){return $asNil$($asNil$(this.vertex).pj_hash()).pj_bitXor_($asNil$($asNil$(this.center).pj_hash()).pj_bitXor_($asNil$(this.coVertex).pj_hash()))});
i$(function pj_includes_(aPoint){return $asNil$($asNil$($asNil$($asNil$($asNil$(aPoint).pj_x()).pj_45_($asNil$(this.center).pj_x())).pj_squared()).pj_47_($asNil$(this.pj_semiMajorAxisLength()).pj_squared())).pj_43_($asNil$($asNil$($asNil$($asNil$(aPoint).pj_y()).pj_45_($asNil$(this.center).pj_y())).pj_squared()).pj_47_($asNil$(this.pj_semiMinorAxisLength()).pj_squared()))<=1});
i$(function pj_intersectionsWith_(anElement){return $asNil$(anElement).pj_intersectionsWithEllipse_(this)});
i$(function pj_intersectionsWithEllipse_(aGEllipse){this.pj_shouldBeImplemented();return this});
i$(function pj_intersectionsWithLine_(aGLine){var h,k,a,b,m,c,e,t,a2m2,ab,a2,b2,m2,k2,t2,tk,sqrt,abm,x1,x2,y1,y2,sqrtContent;if($asNil$(aGLine).pj_b()==0){return this.pj_intersectionsWithVerticalLine_(aGLine)};h=$asNil$(this.center).pj_x();k=$asNil$(this.center).pj_y();a=this.pj_semiMajorAxisLength();b=this.pj_semiMinorAxisLength();m=$asNil$($asNil$(aGLine).pj_a()).pj_47_($asNil$($asNil$(aGLine).pj_b()).pj_negated());c=$asNil$($asNil$(aGLine).pj_c()).pj_47_($asNil$($asNil$(aGLine).pj_b()).pj_negated());e=$asNil$(c).pj_45_(k);t=$asNil$(c).pj_43_($asNil$(m).pj_42_(h));ab=$asNil$(a).pj_42_(b);abm=$asNil$(ab).pj_42_(m);a2=$asNil$(a).pj_squared();b2=$asNil$(b).pj_squared();m2=$asNil$(m).pj_squared();k2=$asNil$(k).pj_squared();t2=$asNil$(t).pj_squared();a2m2=$asNil$(a2).pj_42_(m2);tk=$asNil$(t).pj_42_(k);sqrtContent=$asNil$($asNil$($asNil$($asNil$(a2m2).pj_43_(b2)).pj_45_(t2)).pj_45_(k2)).pj_43_(2*tk);if(0>=sqrtContent){return []};sqrt=$asNil$($asNil$($asNil$($asNil$($asNil$(a2m2).pj_43_(b2)).pj_45_(t2)).pj_45_(k2)).pj_43_(2*tk)).pj_sqrt();x1=$asNil$($asNil$($asNil$($asNil$(h).pj_42_(b2)).pj_45_($asNil$($asNil$(m).pj_42_(a2)).pj_42_(e))).pj_43_($asNil$(ab).pj_42_(sqrt))).pj_47_($asNil$(a2m2).pj_43_(b2));x2=$asNil$($asNil$($asNil$($asNil$(h).pj_42_(b2)).pj_45_($asNil$($asNil$(m).pj_42_(a2)).pj_42_(e))).pj_45_($asNil$(ab).pj_42_(sqrt))).pj_47_($asNil$(a2m2).pj_43_(b2));y1=$asNil$($asNil$($asNil$($asNil$(b2).pj_42_(t)).pj_43_($asNil$(k).pj_42_(a2m2))).pj_43_($asNil$(abm).pj_42_(sqrt))).pj_47_($asNil$(a2m2).pj_43_(b2));y2=$asNil$($asNil$($asNil$($asNil$(b2).pj_42_(t)).pj_43_($asNil$(k).pj_42_(a2m2))).pj_45_($asNil$(abm).pj_42_(sqrt))).pj_47_($asNil$(a2m2).pj_43_(b2));return [($asNil$(x1).pj_44_(y1)),($asNil$(x2).pj_44_(y2))].pj_asSet()});
i$(function pj_intersectionsWithVerticalLine_(aGLine){var h,k,a2,b2,x,sqrt,y1,y2,tmp,tmp2;h=$asNil$(this.center).pj_x();k=$asNil$(this.center).pj_y();a2=$asNil$(this.pj_semiMajorAxisLength()).pj_squared();b2=$asNil$(this.pj_semiMinorAxisLength()).pj_squared();x=$asNil$($asNil$($asNil$(aGLine).pj_c()).pj_negated()).pj_47_($asNil$(aGLine).pj_a());tmp=$asNil$($asNil$($asNil$(x).pj_45_(h)).pj_squared()).pj_47_(a2);tmp2=$asNil$(b2).pj_42_(1-tmp);if(tmp2<0){return []};sqrt=$asNil$(tmp2).pj_sqrt();y1=$asNil$(k).pj_43_(sqrt);y2=$asNil$(k).pj_45_(sqrt);return [($asNil$(x).pj_44_(y1)),($asNil$(x).pj_44_(y2))].pj_asSet()});
i$(function pj_majorAxis(){return GSegment.pj_with_with_($asNil$(this.center).pj_43_($asNil$(this.center).pj_45_(this.vertex)),$asNil$(this.center).pj_43_($asNil$(this.vertex).pj_45_(this.center)))});
i$(function pj_majorAxisLength(){return $asNil$(this.pj_majorAxis()).pj_length()});
i$(function pj_minorAxis(){return GSegment.pj_with_with_($asNil$(this.center).pj_43_($asNil$(this.center).pj_45_(this.coVertex)),$asNil$(this.center).pj_43_($asNil$(this.coVertex).pj_45_(this.center)))});
i$(function pj_minorAxisLength(){return $asNil$(this.pj_minorAxis()).pj_length()});
i$(function pj_perimeter(){var h,semiMajorAndMinorLength;semiMajorAndMinorLength=$asNil$(this.pj_semiMajorAxisLength()).pj_43_(this.pj_semiMinorAxisLength());h=$asNil$($asNil$($asNil$(this.pj_semiMajorAxisLength()).pj_45_(this.pj_semiMinorAxisLength())).pj_squared()).pj_47_($asNil$(semiMajorAndMinorLength).pj_squared());return $asNil$($asNil$(semiMajorAndMinorLength).pj_42_(1+$asNil$((3*h)).pj_47_(10+$asNil$((4-3*h)).pj_squared()))).pj_()});
i$(function pj_printOn_(aStream){$asNil$(aStream).pj_nextPutAll_("((x - {1})\u00B2/{2}) + ((y - {3})\u00B2/{4}) = 1".pj_format_([$asNil$(this.center).pj_x(),$asNil$(this.pj_semiMajorAxisLength()).pj_squared(),$asNil$(this.center).pj_y(),$asNil$(this.pj_semiMinorAxisLength()).pj_squared()]));return this});
i$(function pj_rsScaleWith_(anAthensAffineTransform){var m;m=anAthensAffineTransform;return $asNil$(this.pj_class()).pj_center_vertex_coVertex_($asNil$(m).pj_transform_(this.center),$asNil$(m).pj_transform_(this.coVertex),$asNil$(m).pj_transform_(this.vertex))});
i$(function pj_semiMajorAxisLength(){return $asNil$($asNil$(this.pj_majorAxis()).pj_length()).pj_47_(2)});
i$(function pj_semiMinorAxisLength(){return $asNil$($asNil$(this.pj_minorAxis()).pj_length()).pj_47_(2)});
i$(function pj_translateBy_(aGVector){$asNil$(this.center).pj_translateBy_(aGVector);$asNil$(this.vertex).pj_translateBy_(aGVector);$asNil$(this.coVertex).pj_translateBy_(aGVector);return this});
i$(function pj_vertex(){return this.vertex});
i$(function pj_vertex_(anObject){this.vertex=anObject;return this});
c$(function pj_center_vertex_coVertex_(aGPoint,aGPoint2,aGPoint3){var d1,d2,zero,$1;d1=$asNil$(aGPoint).pj_45_(aGPoint2);d2=$asNil$(aGPoint).pj_45_(aGPoint3);zero=GVector.pj_x_y_(0,0);if(true==(true==$asNil$(d1).pj_61_(zero)&&$asNil$(d2).pj_61_(zero))){this.pj_error_("This is not an ellipse but a point.")};if(true==(true==$asNil$(d1).pj_61_(zero)||$asNil$(d2).pj_61_(zero))){this.pj_error_("This is not an ellipse but a line.")};return ($1=$asNil$(this.pj_new()),$1.pj_center_(aGPoint),$1.pj_vertex_(aGPoint2),$1.pj_coVertex_(aGPoint3),$1.pj_yourself())});
});
GShape.pj_subclass_("GPolygon");
GPolygon.$$def(function(i$,c$,cp$){
i$(function pj_61_(anObject){if(this===anObject){return true};if(false==$asNil$(this.pj_class()).pj_61_($asNil$(anObject).pj_class())){return false};return $asNil$(this.vertices).pj_61_($asNil$(anObject).pj_vertices())});
i$(function pj_boundaryContains_(aGPoint){return $asNil$(this.pj_edges()).pj_anySatisfy_(function(segment){return $asNil$(segment).pj_includes_(aGPoint)})});
i$(function pj_edges(){var edges;edges=$asNil$($asNil$(this.pj_vertices()).pj_overlappingPairsCollect_(function(point1,point2){return GSegment.pj_with_with_(point1,point2)})).pj_asOrderedCollection();$asNil$(edges).pj_add_(GSegment.pj_with_with_($asNil$(this.pj_vertices()).pj_last(),$asNil$(this.pj_vertices()).pj_first()));return edges});
i$(function pj_encompassingRectangle(){var origin,corner;origin=$asNil$($asNil$($asNil$(this.pj_vertices()).pj_collect_("coordinates")).pj_fold_(function(coor1,coor2){return $asNil$(coor1).pj_lowerLimitsWith_(coor2)})).pj_asGPoint();corner=$asNil$($asNil$($asNil$(this.pj_vertices()).pj_collect_("coordinates")).pj_fold_(function(coor1,coor2){return $asNil$(coor1).pj_upperLimitsWith_(coor2)})).pj_asGPoint();return GRectangle.pj_origin_corner_(origin,corner)});
i$(function pj_expandBy_(anInteger){this.pj_fitInExtent_($asNil$(this.pj_extent()).pj_43_(2*[anInteger,anInteger].pj_asGVector()));return this});
i$(function pj_fitInExtent_(extent){var scales,$_self_$=this;scales=$asNil$(extent).pj_coordinatesWith_collect_($asNil$($asNil$(this.pj_encompassingRectangle()).pj_extent()).pj_coordinates(),function(number1,number2){return $asNil$(number1).pj_47_(number2)});this.vertices=$asNil$(this.pj_vertices()).pj_collect_(function(vertice){return $asNil$($asNil$($asNil$($asNil$($asNil$(vertice).pj_45_($_self_$.pj_center())).pj_coordinates()).pj_coordinatesWith_collect_(scales,function(a,b){return $asNil$(a).pj_42_(b)})).pj_asGVector()).pj_43_($_self_$.pj_center())});return this});
i$(function pj_hash(){return $asNil$($asNil$(this.vertices).pj_hash()).pj_bitXor_($asNil$(this.pj_class()).pj_hash())});
i$(function pj_includes_(aPoint){var inside,testX,testY,j,$_self_$=this;inside=false;j=$asNil$(this.pj_vertices()).pj_size();testX=$asNil$(aPoint).pj_x();testY=$asNil$(aPoint).pj_y();$asNil$(this.pj_vertices()).pj_doWithIndex_(function(pi,i){var pj;pj=$asNil$($_self_$.pj_vertices()).pj_at_(j);if(true==(true==$asNil$(($asNil$(pi).pj_y()>testY)).pj_126_61_($asNil$(pj).pj_y()>testY)&&testX<$asNil$($asNil$($asNil$($asNil$($asNil$(pj).pj_x()).pj_45_($asNil$(pi).pj_x())).pj_42_($asNil$(testY).pj_45_($asNil$(pi).pj_y()))).pj_47_($asNil$($asNil$(pj).pj_y()).pj_45_($asNil$(pi).pj_y()))).pj_43_($asNil$(pi).pj_x()))){inside=$asNil$(inside).pj_not()};return j=i});return inside});
i$(function pj_intersectionsWith_(anElement){return $asNil$(anElement).pj_intersectionsWithPolygon_(this)});
i$(function pj_intersectionsWithEllipse_(aGEllipse){return $asNil$(aGEllipse).pj_intersectionsWithPolygon_(this)});
i$(function pj_intersectionsWithLine_(aGLine){return $asNil$(aGLine).pj_intersectionsWithPolygon_(this)});
i$(function pj_perimeter(){return $asNil$(this.pj_edges()).pj_sum_("length")});
i$(function pj_rsScaleWith_(anAthensAffineTransform){return $asNil$(this.pj_class()).pj_vertices_($asNil$(this.pj_vertices()).pj_collect_(function(p){return $asNil$(anAthensAffineTransform).pj_transform_(p)}))});
i$(function pj_scaleBy_(anInteger){var $_self_$=this;if(anInteger<=0){this.pj_error_("Scale must be over zeo")};this.vertices=$asNil$(this.pj_vertices()).pj_collect_(function(vertice){return $asNil$($asNil$($asNil$(vertice).pj_45_($_self_$.pj_center())).pj_42_(anInteger)).pj_43_($_self_$.pj_center())});return this});
i$(function pj_translateBy_(aPoint){this.vertices=$asNil$(this.pj_vertices()).pj_collect_(function(point){return $asNil$(point).pj_43_(aPoint)});return this});
i$(function pj_vertices(){return this.vertices});
i$(function pj_vertices_(aCollection){this.vertices=$asNil$(aCollection).pj_collect_("asGPoint");return this});
c$(function pj_convexHullOn_(aCollection){var lastPoint,nextPoint,convexHull;convexHull=Array.pj_new();nextPoint=$asNil$(aCollection).pj_detectMin_("x");(function(){lastPoint=nextPoint;$asNil$(convexHull).pj_add_(lastPoint);nextPoint=$asNil$(aCollection).pj_detect_(function(point){return $asNil$(point).pj_126_61_(lastPoint)});return $asNil$($asNil$(aCollection).pj_copyWithout_(nextPoint)).pj_do_(function(point){var turn;turn=$asNil$($asNil$($asNil$($asNil$(nextPoint).pj_x()).pj_45_($asNil$(lastPoint).pj_x())).pj_42_($asNil$($asNil$(point).pj_y()).pj_45_($asNil$(lastPoint).pj_y()))).pj_45_($asNil$($asNil$($asNil$(point).pj_x()).pj_45_($asNil$(lastPoint).pj_x())).pj_42_($asNil$($asNil$(nextPoint).pj_y()).pj_45_($asNil$(lastPoint).pj_y())));if(true==(turn<0||turn==0&&$asNil$(lastPoint).pj_distanceTo_(point)>$asNil$(lastPoint).pj_distanceTo_(nextPoint))){return nextPoint=point}else{return null}})}).pj_doWhileTrue_(function(){return $asNil$($asNil$(convexHull).pj_first()).pj_126_61_(nextPoint)});return this.pj_vertices_(convexHull)});
c$(function pj_newRegularPolygonWithEdgeNumber_(aNumber){var angle,encompassingCircleRadius;angle=$asNil$((2).pj_()).pj_47_(aNumber);encompassingCircleRadius=0.5;return this.pj_newVertices_($asNil$((1).pj_to_(aNumber)).pj_collect_(function(index){return $asNil$($asNil$($asNil$($asNil$(encompassingCircleRadius).pj_43_(index)).pj_42_(angle)).pj_sin()).pj_44_($asNil$($asNil$($asNil$($asNil$(encompassingCircleRadius).pj_43_(index)).pj_42_(angle)).pj_cos()).pj_negated())}))});
c$(function pj_newVertices_(aCollection){this.pj_deprecated_transformWith_("Use #vertices: instead","`@receiver newVertices: `@statements".pj_45_62_("`@receiver vertices: `@statements"));return this.pj_vertices_(aCollection)});
c$(function pj_vertices_(aCollection){var $1;return ($1=$asNil$(this.pj_new()),$1.pj_vertices_(aCollection),$1.pj_yourself())});
});
GEllipse.pj_subclass_("GCircle");
GCircle.$$def(function(i$,c$,cp$){
i$(function pj_boundaryContains_(aPoint){return $asNil$(this.pj_radius()).pj_61_126_($asNil$(this.pj_center()).pj_distanceTo_(aPoint))});
i$(function pj_perimeter(){return $asNil$((2).pj_()).pj_42_(this.pj_radius())});
i$(function pj_printOn_(aStream){$asNil$(aStream).pj_nextPutAll_("x\u00B2 + y\u00B2 = {1}\u00B2".pj_format_([this.pj_radius()]));return this});
i$(function pj_radius(){return this.pj_semiMajorAxisLength()});
i$(function pj_upperPoint(){return $asNil$($asNil$(this.center).pj_x()).pj_44_($asNil$($asNil$(this.center).pj_y()).pj_43_(this.pj_radius()))});
c$(function pj_center_radius_(aPoint1,aNumber){return this.pj_center_vertex_coVertex_(aPoint1,$asNil$($asNil$(aPoint1).pj_x()).pj_44_($asNil$($asNil$(aPoint1).pj_y()).pj_43_(aNumber)),$asNil$($asNil$($asNil$(aPoint1).pj_x()).pj_43_(aNumber)).pj_44_($asNil$(aPoint1).pj_y()))});
});
GPolygon.pj_subclass_("GRectangle");
GRectangle.$$def(function(i$,c$,cp$){
i$(function pj_area(){return $asNil$($asNil$(this.pj_width()).pj_42_(this.pj_height())).pj_max_(0)});
i$(function pj_center(){return $asNil$($asNil$(this.pj_diagonals()).pj_anyOne()).pj_midPoint()});
i$(function pj_diagonals(){return [$asNil$($asNil$(this.pj_vertices()).pj_at_(1)).pj_segment_($asNil$(this.pj_vertices()).pj_at_(3)),$asNil$($asNil$(this.pj_vertices()).pj_at_(2)).pj_segment_($asNil$(this.pj_vertices()).pj_at_(4))]});
i$(function pj_extent(){var verticesCoordinates,encompassingRectangleOrigin,encompassingRectangleCorner;verticesCoordinates=$asNil$(this.pj_vertices()).pj_collect_("coordinates");encompassingRectangleOrigin=$asNil$(verticesCoordinates).pj_fold_(function(coor1,coor2){return $asNil$(coor1).pj_upperLimitsWith_(coor2)});encompassingRectangleCorner=$asNil$(verticesCoordinates).pj_fold_(function(coor1,coor2){return $asNil$(coor1).pj_lowerLimitsWith_(coor2)});return $asNil$($asNil$(encompassingRectangleOrigin).pj_45_(encompassingRectangleCorner)).pj_asGVector()});
i$(function pj_height(){return $asNil$($asNil$(this.pj_vertices()).pj_at_(2)).pj_distanceTo_($asNil$(this.pj_vertices()).pj_at_(3))});
i$(function pj_width(){return $asNil$($asNil$(this.pj_vertices()).pj_at_(2)).pj_distanceTo_($asNil$(this.pj_vertices()).pj_at_(1))});
c$(function pj_left_right_top_bottom_(left,right,top,bottom){var origin,corner;origin=$asNil$($asNil$(left).pj_min_(right)).pj_64_($asNil$(top).pj_min_(bottom));corner=$asNil$($asNil$(left).pj_max_(right)).pj_64_($asNil$(top).pj_max_(bottom));return this.pj_origin_corner_(origin,corner)});
c$(function pj_origin_corner_(point1,point2){var or,cor;or=$asNil$($asNil$($asNil$(point1).pj_x()).pj_min_($asNil$(point2).pj_x())).pj_44_($asNil$($asNil$(point1).pj_y()).pj_min_($asNil$(point2).pj_y()));cor=$asNil$($asNil$($asNil$(point1).pj_x()).pj_max_($asNil$(point2).pj_x())).pj_44_($asNil$($asNil$(point1).pj_y()).pj_max_($asNil$(point2).pj_y()));if(true==$asNil$(or).pj_61_(cor)){this.pj_error_("This is not a rectangle but a point.")};return this.pj_vertices_([or,$asNil$($asNil$(cor).pj_x()).pj_44_($asNil$(or).pj_y()),cor,$asNil$($asNil$(or).pj_x()).pj_44_($asNil$(cor).pj_y())])});
c$(function pj_vertices_(aCollection){var rectangle,edges;if($asNil$(aCollection).pj_size()!=4){this.pj_error_("A Rectangle should have 4 vertices.")};rectangle=GPolygon.pj_vertices_.call(this,aCollection);edges=$asNil$(rectangle).pj_edges();if(false==(true==$asNil$($asNil$($asNil$(edges).pj_at_(1)).pj_length()).pj_61_($asNil$($asNil$(edges).pj_at_(3)).pj_length())&&$asNil$($asNil$($asNil$(edges).pj_at_(2)).pj_length()).pj_61_($asNil$($asNil$(edges).pj_at_(4)).pj_length()))){this.pj_error_("This is not a rectangle but a parallelogram")};return rectangle});
});
Array.pj_javascriptInitialize();
Error.pj_javascriptInitialize();
Number.pj_javascriptInitialize();
PjUndefinedObject.pj_javascriptInitialize();
ChronologyConstants.pj_initialize();
Object.pj_subclass_("Date");
Date.$$def(function(i$,c$,cp$,$ChronologyConstants){
i$(function pj_asDateAndTime(){return this});
i$(function pj_asDateAndTime(){return this});
i$(function pj_asSeconds(){return $asNil$($asNil$((this.pj_hour24()*3600)).pj_43_(this.pj_minute()*60)).pj_43_(this.pj_seconds())});
i$(function pj_dayOfMonth(){return this.pj_getDate()});
i$(function pj_dayOfMonth(){return this.pj_getDate()});
i$(function pj_dayOfWeek(){return this.pj_getDay()+1});
i$(function pj_dayOfWeek(){return this.pj_getDay()+1});
i$(function pj_duration(){return PjDuration.pj_zero()});
i$(function pj_hour(){return this.pj_hour24()});
i$(function pj_hour(){return this.pj_hour24()});
i$(function pj_hour12(){var hour24;hour24=this.pj_hour24();if(hour24==0){return 12};if(hour24>12){return hour24-12};return hour24});
i$(function pj_hour12(){var hour24;hour24=this.pj_hour24();if(hour24==0){return 12};if(hour24>12){return hour24-12};return hour24});
i$(function pj_hour24(){return this.pj_getHours()});
i$(function pj_hour24(){return this.pj_getHours()});
i$(function pj_hours(){return this.pj_hour()});
i$(function pj_meridianAbbreviation(){if(this.pj_hour()<12){return "AM"}else{return "PM"}});
i$(function pj_milliSecond(){return this.pj_getMilliseconds()});
i$(function pj_milliSecond(){return this.pj_getMilliseconds()});
i$(function pj_minute(){return this.pj_getMinutes()});
i$(function pj_minute(){return this.pj_getMinutes()});
i$(function pj_minutes(){return $asNil$(this.pj_asDuration()).pj_minutes()});
i$(function pj_monthIndex(){return this.pj_getMonth()+1});
i$(function pj_monthIndex(){return this.pj_getMonth()+1});
i$(function pj_monthIndex_(anInteger){return this.pj_month_(anInteger-1)});
i$(function pj_monthIndex_(anInteger){return this.pj_month_(anInteger-1)});
i$(function pj_nanoSecond(){return this.nanos});
i$(function pj_second(){return this.pj_getSeconds()});
i$(function pj_second(){return this.pj_getSeconds()});
i$(function pj_seconds(){return this.pj_second()});
i$(function pj_seconds_(secondCount){var minuteSecondsCount;this.pj_setHours_($asNil$(secondCount).pj_quo_($ChronologyConstants.SecondsInHour));minuteSecondsCount=$asNil$(secondCount).pj_rem_($ChronologyConstants.SecondsInHour);this.pj_setMinutes_($asNil$(minuteSecondsCount).pj_quo_($ChronologyConstants.SecondsInMinute));this.pj_setSeconds_($asNil$(minuteSecondsCount).pj_rem_($ChronologyConstants.SecondsInMinute));return this});
i$(function pj_seconds_nanoSeconds_(secondCount,nanoCount){this.pj_seconds_(secondCount);this.pj_setMilliseconds_($asNil$(nanoCount).pj_47_47_(1000000));return this});
i$(function pj_serializationContents(){return this});
i$(function pj_ticks(){return Array.pj_with_with_with_(0,this.seconds,this.nanos)});
i$(function pj_ticks_(anArray){this.pj_seconds_nanoSeconds_($asNil$(anArray).pj_at_(2),$asNil$(anArray).pj_last());return this});
i$(function pj_year(){return this.pj_getFullYear()});
i$(function pj_year(){return this.pj_getFullYear()});
c$(function pj_current(){return this.pj_now()});
c$(function pj_fromSeconds_(secondCount){var integerSeconds,nanos;integerSeconds=$asNil$(secondCount).pj_truncated();nanos=true==$asNil$(integerSeconds).pj_61_(secondCount)?0:$asNil$($asNil$($asNil$(secondCount).pj_45_(integerSeconds)).pj_42_($ChronologyConstants.NanosInSecond)).pj_asInteger();return this.pj_seconds_nanoSeconds_(integerSeconds,nanos)});
c$(function pj_hour_minute_(hour,minute){return this.pj_hour_minute_second_(hour,minute,0)});
c$(function pj_hour_minute_second_(hour,minute,second){return this.pj_hour_minute_second_nanoSecond_(hour,minute,second,0)});
c$(function pj_hour_minute_second_milliSecond_(hour,minute,second,milliseconds){var today = new Date();
return new Date(today.getFullYear(), today.getMonth(), today.getDate(), hour, minute, second, milliseconds);});
c$(function pj_hour_minute_second_nano_(hour,minute,second,nano){var nanoMultiplicative;nanoMultiplicative=(1000000000).pj_47_((10).pj_42_42_($asNil$(nano).pj_numberOfDigits()));return this.pj_hour_minute_second_nanoSecond_(hour,minute,second,$asNil$(nano).pj_42_(nanoMultiplicative))});
c$(function pj_hour_minute_second_nanoSecond_(hour,minute,second,nanoCount){return this.pj_hour_minute_second_milliSecond_(hour,minute,second,$asNil$(nanoCount).pj_47_47_(1000000))});
c$(function pj_midnight(){return this.pj_seconds_(0)});
c$(function pj_millisecondClockValue(){if(typeof performance=="object") return performance.now();
if(typeof process=="object"){var hr=process.hrtime();return hr[0]*1000+hr[1]/1000000}
return Date.now()});
c$(function pj_milliseconds_since_(currentTime,lastTime){var delta;delta=$asNil$(currentTime).pj_45_(lastTime);if(delta<0){return $asNil$(Number.pj_maxVal()).pj_43_(delta)}else{return delta}});
c$(function pj_millisecondsSince_(lastTime){return this.pj_milliseconds_since_(this.pj_millisecondClockValue(),lastTime)});
c$(function pj_millisecondsToRun_(timedBlock){return $asNil$(this.pj_microsecondsToRun_(timedBlock)).pj_47_47_(1000)});
c$(function pj_new(){return this.pj_midnight()});
c$(function pj_newFromMaterialized_(jsonString){return new Date(jsonString)});
c$(function pj_noon(){return this.pj_seconds_($asNil$($ChronologyConstants.SecondsInDay).pj_47_(2))});
c$(function pj_now(){return new this()});
c$(function pj_now(){return new this()});
c$(function pj_nowUTC(){var microSecondsToday;microSecondsToday=$asNil$(this.pj_primUTCMicrosecondsClock()).pj_92_92_($ChronologyConstants.MicrosecondsInDay);return this.pj_seconds_nanoSeconds_($asNil$(microSecondsToday).pj_47_47_(1000000),microSecondsToday%1000000*1000)});
c$(function pj_seconds_(seconds){return this.pj_seconds_nanoSeconds_(seconds,0)});
c$(function pj_seconds_nanoSeconds_(seconds,nanoCount){var $1;return ($1=$asNil$(this.pj_basicNew()),$1.pj_seconds_nanoSeconds_(seconds,nanoCount),$1.pj_yourself())});
c$(function pj_today(){return this.pj_now()});
},ChronologyConstants);
Object.pj_subclass_("PjRbObject");
PjRbObject.$$def(function(i$,c$,cp$){
i$(function pj_append_head_(packet,queueHead){var mouse,link;$asNil$(packet).pj_link_(null);if(true==$asNil$(queueHead).pj_isNil()){return packet};mouse=queueHead;while(false==$asNil$((link=$asNil$(mouse).pj_link())).pj_isNil()){mouse=link}$asNil$(mouse).pj_link_(packet);return queueHead});
i$(function pj_cr(){});
i$(function pj_show_(aString){console.log(aString.pj_asString())});
c$(function pj_initialize(){cp$.DeviceA=5;cp$.DeviceB=6;cp$.DevicePacketKind=1;cp$.HandlerA=3;cp$.HandlerB=4;cp$.Idler=1;cp$.Worker=2;cp$.WorkPacketKind=2;return this});
cp$.DeviceA=cp$.DeviceB=cp$.DevicePacketKind=cp$.HandlerA=cp$.HandlerB=cp$.Idler=cp$.WorkPacketKind=cp$.Worker=null;
});
Object.pj_subclass_("PjDbVariable");
PjDbVariable.$$def(function(i$,c$,cp$){
i$(function pj_addConstraint_(aConstraint){$asNil$(this.constraints).pj_add_(aConstraint);return this});
i$(function pj_constraints(){return this.constraints});
i$(function pj_determinedBy(){return this.determinedBy});
i$(function pj_determinedBy_(aConstraint){this.determinedBy=aConstraint;return this});
i$(function pj_initialize(){this.value=0;this.constraints=Array.pj_new_(2);this.determinedBy=null;this.walkStrength=PjDbStrength.pj_absoluteWeakest();this.stay=true;this.mark=0;return this});
i$(function pj_longPrintOn_(aStream){var $3,$4,$1;this.pj_shortPrintOn_(aStream);$asNil$(aStream).pj_nextPutAll_("   Constraints: ");if(true==$asNil$(this.constraints).pj_isEmpty()){$1=$asNil$(aStream);$1.pj_cr();$1.pj_tab();$1.pj_nextPutAll_("none")}else{$asNil$(this.constraints).pj_do_(function(c){var $2;$2=$asNil$(aStream);$2.pj_cr();$2.pj_tab();return $asNil$(c).pj_shortPrintOn_(aStream)})};if(false==$asNil$(this.determinedBy).pj_isNil()){$3=$asNil$(aStream);$3.pj_cr();$3.pj_nextPutAll_("   Determined by: ");$4=$asNil$(aStream);$4.pj_cr();$4.pj_tab();$asNil$(this.determinedBy).pj_shortPrintOn_(aStream)};$asNil$(aStream).pj_cr();return this});
i$(function pj_mark(){return this.mark});
i$(function pj_mark_(markValue){this.mark=markValue;return this});
i$(function pj_printOn_(aStream){this.pj_shortPrintOn_(aStream);return this});
i$(function pj_removeConstraint_(c){$asNil$(this.constraints).pj_remove_ifAbsent_(c,function(){return null});if(this.determinedBy===c){this.determinedBy=null};return this});
i$(function pj_setValue_(aValue){this.pj_setValue_strength_(aValue,"preferred");return this});
i$(function pj_setValue_strength_(aValue,strengthSymbol){var editConstraint;editConstraint=PjDbEditConstraint.pj_var_strength_(this,strengthSymbol);if(true==$asNil$(editConstraint).pj_isSatisfied()){this.pj_value_(aValue);PjDbPlanner.pj_propagateFrom_(this)};$asNil$(editConstraint).pj_destroyConstraint();return this});
i$(function pj_shortPrintOn_(aStream){$asNil$(aStream).pj_nextPutAll_("V("+$asNil$(this.pj_asOop()).pj_printString()+", ");$asNil$(aStream).pj_nextPutAll_($asNil$($asNil$(this.walkStrength).pj_printString()).pj_44_(", "));if(false==$asNil$(this.stay).pj_isNil()){$asNil$(aStream).pj_nextPutAll_(true==this.stay?"stay, ":"changing, ")};$asNil$(aStream).pj_nextPutAll_($asNil$(this.value).pj_printString());$asNil$(aStream).pj_nextPutAll_(")");$asNil$(aStream).pj_cr();return this});
i$(function pj_stay(){return this.stay});
i$(function pj_stay_(aBoolean){this.stay=aBoolean;return this});
i$(function pj_value(){return this.value});
i$(function pj_value_(anObject){this.value=anObject;return this});
i$(function pj_walkStrength(){return this.walkStrength});
i$(function pj_walkStrength_(aStrength){this.walkStrength=aStrength;return this});
c$(function pj_value_(aValue){return $asNil$(this.pj_new()).pj_value_(aValue)});
});
Object.pj_subclass_("PjDbPlanner");
PjDbPlanner.$$def(function(i$,c$,cp$){
i$(function pj_addConstraintsConsuming_to_(v,aCollection){var determiningC;determiningC=$asNil$(v).pj_determinedBy();$asNil$($asNil$(v).pj_constraints()).pj_do_(function(c){if(true==(c===determiningC||$asNil$($asNil$(c).pj_isSatisfied()).pj_not())){return null}else{return $asNil$(aCollection).pj_add_(c)}});return this});
i$(function pj_addPropagate_mark_(c,mark){var todo,d;todo=Array.pj_with_(c);while(false==$asNil$(todo).pj_isEmpty()){d=$asNil$(todo).pj_removeFirst();if(true==$asNil$($asNil$($asNil$(d).pj_output()).pj_mark()).pj_61_(mark)){this.pj_incrementalRemove_(c);return false};$asNil$(d).pj_recalculate();this.pj_addConstraintsConsuming_to_($asNil$(d).pj_output(),todo)}return true});
i$(function pj_changeVar_newValue_(aVariable,newValue){var editConstraint,plan,$1;editConstraint=PjDbEditConstraint.pj_var_strength_(aVariable,"preferred");plan=this.pj_extractPlanFromConstraints_(Array.pj_with_(editConstraint));for(var $1=1;$1<=10;++$1){$asNil$(aVariable).pj_value_(newValue);$asNil$(plan).pj_execute()}$asNil$(editConstraint).pj_destroyConstraint();return this});
i$(function pj_constraintsConsuming_do_(v,aBlock){var determiningC;determiningC=$asNil$(v).pj_determinedBy();$asNil$($asNil$(v).pj_constraints()).pj_do_(function(c){if(true==(c===determiningC||$asNil$($asNil$(c).pj_isSatisfied()).pj_not())){return null}else{return $asNil$(aBlock).pj_value_(c)}});return this});
i$(function pj_extractPlanFromConstraints_(constraints){var sources;sources=Array.pj_new();$asNil$(constraints).pj_do_(function(c){if(true==(true==$asNil$(c).pj_isInput()&&$asNil$(c).pj_isSatisfied())){return $asNil$(sources).pj_add_(c)}else{return null}});return this.pj_makePlan_(sources)});
i$(function pj_extractPlanFromVariables_(variables){var sources;sources=Array.pj_new();$asNil$(variables).pj_do_(function(v){return $asNil$($asNil$(v).pj_constraints()).pj_do_(function(c){if(true==(true==$asNil$(c).pj_isInput()&&$asNil$(c).pj_isSatisfied())){return $asNil$(sources).pj_add_(c)}else{return null}})});return this.pj_makePlan_(sources)});
i$(function pj_incrementalAdd_(c){var mark,overridden;mark=this.pj_newMark();overridden=$asNil$(c).pj_satisfy_(mark);while(overridden!==null){overridden=$asNil$(overridden).pj_satisfy_(mark)}return this});
i$(function pj_incrementalRemove_(c){var out,unsatisfied,$_self_$=this;out=$asNil$(c).pj_output();$asNil$(c).pj_markUnsatisfied();$asNil$(c).pj_removeFromGraph();unsatisfied=this.pj_removePropagateFrom_(out);$asNil$(unsatisfied).pj_do_(function(u){return $_self_$.pj_incrementalAdd_(u)});return this});
i$(function pj_initialize(){this.currentMark=1;return this});
i$(function pj_makePlan_(sources){var mark,plan,todo,c;mark=this.pj_newMark();plan=PjDbPlan.pj_new();todo=sources;while(false==$asNil$(todo).pj_isEmpty()){c=$asNil$(todo).pj_removeFirst();if(true==(true==$asNil$($asNil$($asNil$(c).pj_output()).pj_mark()).pj_126_61_(mark)&&$asNil$(c).pj_inputsKnown_(mark))){$asNil$(plan).pj_addLast_(c);$asNil$($asNil$(c).pj_output()).pj_mark_(mark);this.pj_addConstraintsConsuming_to_($asNil$(c).pj_output(),todo)}}return plan});
i$(function pj_newMark(){return this.currentMark=this.currentMark+1});
i$(function pj_propagateFrom_(v){var todo,c;todo=Array.pj_new();this.pj_addConstraintsConsuming_to_(v,todo);while(false==$asNil$(todo).pj_isEmpty()){c=$asNil$(todo).pj_removeFirst();$asNil$(c).pj_execute();this.pj_addConstraintsConsuming_to_($asNil$(c).pj_output(),todo)}return this});
i$(function pj_removePropagateFrom_(out){var unsatisfied,todo,v,nextC;unsatisfied=PjSortedCollection.pj_sortBlock_(function(c1,c2){return $asNil$($asNil$(c1).pj_strength()).pj_stronger_($asNil$(c2).pj_strength())});$asNil$(out).pj_determinedBy_(null);$asNil$(out).pj_walkStrength_(PjDbStrength.pj_absoluteWeakest());$asNil$(out).pj_stay_(true);todo=Array.pj_with_(out);while(false==$asNil$(todo).pj_isEmpty()){v=$asNil$(todo).pj_removeFirst();$asNil$($asNil$(v).pj_constraints()).pj_do_(function(c){if(true==$asNil$(c).pj_isSatisfied()){return null}else{return $asNil$(unsatisfied).pj_add_(c)}});this.pj_constraintsConsuming_do_(v,function(c){$asNil$(c).pj_recalculate();return $asNil$(todo).pj_add_($asNil$(c).pj_output())})}return unsatisfied});
c$(function pj_chainTest_(n){var vars,editConstraint,plan,planner,$_self_$=this;planner=PjDbPlanner.pj_new();vars=$asNil$((1).pj_to_(n+1)).pj_collect_(function(i){return PjDbVariable.pj_new()});(1).pj_to_do_(n,function(i){var v1,v2;v1=$asNil$(vars).pj_at_(i);v2=$asNil$(vars).pj_at_(i+1);return PjDbEqualityConstraint.pj_var_var_strength_(v1,v2,"required")});PjDbStayConstraint.pj_var_strength_($asNil$(vars).pj_last(),"strongDefault");editConstraint=PjDbEditConstraint.pj_var_strength_($asNil$(vars).pj_first(),"preferred");plan=$asNil$(planner).pj_extractPlanFromConstraints_(Array.pj_with_(editConstraint));(1).pj_to_do_(100,function(v){$asNil$($asNil$(vars).pj_first()).pj_value_(v);$asNil$(plan).pj_execute();if(true==$asNil$($asNil$($asNil$(vars).pj_last()).pj_value()).pj_126_61_(v)){return $_self_$.pj_error_("Chain test failed!")}else{return null}});$asNil$(editConstraint).pj_destroyConstraint();return this});
c$(function pj_current(){return this.currentPlanner});
c$(function pj_new(){return this.currentPlanner=$asNil$(Object.pj_new.call(this)).pj_initialize()});
c$(function pj_projectionTest_(n){var scale,offset,src,dst,planner,dests,$_self_$=this;planner=PjDbPlanner.pj_new();dests=Array.pj_new();scale=PjDbVariable.pj_value_(10);offset=PjDbVariable.pj_value_(1000);(1).pj_to_do_(n,function(i){src=PjDbVariable.pj_value_(i);dst=PjDbVariable.pj_value_(i);$asNil$(dests).pj_add_(dst);PjDbStayConstraint.pj_var_strength_(src,"default");return PjDbScaleConstraint.pj_var_var_var_var_strength_(src,scale,offset,dst,"required")});$asNil$(planner).pj_changeVar_newValue_(src,17);if($asNil$(dst).pj_value()!=1170){this.pj_error_("Projection test 1 failed!")};$asNil$(planner).pj_changeVar_newValue_(dst,1050);if($asNil$(src).pj_value()!=5){this.pj_error_("Projection test 2 failed!")};$asNil$(planner).pj_changeVar_newValue_(scale,5);(1).pj_to_do_(n-1,function(i){if(true==$asNil$($asNil$($asNil$(dests).pj_at_(i)).pj_value()).pj_126_61_(i*5+1000)){return $_self_$.pj_error_("Projection test 3 failed!")}else{return null}});$asNil$(planner).pj_changeVar_newValue_(offset,2000);(1).pj_to_do_(n-1,function(i){if(true==$asNil$($asNil$($asNil$(dests).pj_at_(i)).pj_value()).pj_126_61_(i*5+2000)){return $_self_$.pj_error_("Projection test 4 failed!")}else{return null}});return this});
});
Object.pj_subclass_("PjApplication");
PjApplication.$$def(function(i$,c$,cp$){
i$(function pj_start(){return this});
i$(function pj_stop(){return this});
c$(function pj_classSubclassResponsibilitySet(){var set;set=this===PjApplication?PjSet.pj_new():$asNil$(this.pj_superclass()).pj_classSubclassResponsibilitySet();$asNil$($asNil$(this.pj_class()).pj_methods()).pj_do_(function(cm){var selector;selector=$asNil$(cm).pj_selector();if(true==$asNil$(cm).pj_sendsSelector_("subclassResponsibility")){return $asNil$(set).pj_add_(selector)}else{return $asNil$(set).pj_remove_ifAbsent_(selector,function(){return null})}});return set});
c$(function pj_currentInstance(){return this.currentInstance});
c$(function pj_isAbstract(){if(true==$asNil$(this.pj_subclassResponsibilitySet()).pj_isNotEmpty()){return true}else{return $asNil$(this.pj_classSubclassResponsibilitySet()).pj_isNotEmpty()}});
c$(function pj_resetAppFolder(){this.pj_appFolder_(null);return this});
c$(function pj_resetCurrentInstance(){this.currentInstance=null;return this});
c$(function pj_setUpAppFolderPrompt(){return "PharoJS: Folder for app "+this.pj_name()+" please?"});
c$(function pj_start(){var $_self_$=this;this.pj_whenJsReady_(function(){return $_self_$.pj_startInstance()});return this});
c$(function pj_startInstance(){if(this.pj_currentInstance()==null){this.currentInstance=this.pj_new()};$asNil$(this.pj_currentInstance()).pj_start();return this});
c$(function pj_stop(){if(this.pj_currentInstance()==null){return this};$asNil$(this.pj_currentInstance()).pj_stop();return this});
c$(function pj_subclassResponsibilitySet(){var set;set=this===PjApplication?PjSet.pj_new():$asNil$(this.pj_superclass()).pj_subclassResponsibilitySet();$asNil$(this.pj_methods()).pj_do_(function(cm){var selector;selector=$asNil$(cm).pj_selector();if(true==$asNil$(cm).pj_sendsSelector_("subclassResponsibility")){return $asNil$(set).pj_add_(selector)}else{return $asNil$(set).pj_remove_ifAbsent_(selector,function(){return null})}});return set});
c$(function pj_whenJsReady_(aBlock){this.pj_subclassResponsibility();return this});
});
Array.pj_subclass_("PjDbPlan");
PjDbPlan.$$def(function(i$,c$,cp$){
i$(function pj_execute(){this.pj_do_(function(c){return $asNil$(c).pj_execute()});return this});
});
Array.pj_subclass_("PjByteArray");
PjByteArray.$$def(function(i$,c$,cp$){
});
Object.pj_subclass_("PjTimingApplication");
PjTimingApplication.$$def(function(i$,c$,cp$){
i$(function pj_conditionalReturn(){if(this.pj_ten()>5){return "yes"};return "no"});
i$(function pj_conditionalReturn2_(aBlock){$asNil$((this.pj_ten()>5)).pj_ifTrue_(aBlock);return "no"});
i$(function pj_conditionalReturn_(aBlock){if(this.pj_ten()>5){$asNil$(aBlock).pj_value()};return "no"});
i$(function pj_index(){return this.index});
i$(function pj_index_(anInteger){this.index=anInteger;return this});
i$(function pj_nonlocalReturn(){var $_err_$={};try{this.pj_conditionalReturn_(function(){throw $_err_$="yes"});return "no"}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_nonlocalReturn2(){var $_err_$={};try{this.pj_conditionalReturn2_(function(){throw $_err_$="yes"});return "no"}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_one(){return 1});
i$(function pj_repeatLoop(){var x,$1;x=0;for(var $1=1;$1<=10;++$1){x=x+1}return x});
i$(function pj_ten(){return 7500});
i$(function pj_toDoLoop(){var x;x=0;(1).pj_to_do_(10,function(y){return x=$asNil$(x).pj_43_(y)});return x});
i$(function pj_whileLoop(){var x,y;x=y=0;while(y<10){y=y+1;x=$asNil$(x).pj_43_(y)}return x});
i$(function pj_whileRemoteLoop(){var x,y,b1,b2;x=y=0;b1=function(){return y<10};b2=function(){y=y+1;return x=$asNil$(x).pj_43_(y)};$asNil$(b1).pj_whileTrue_(b2);return x});
c$(function pj_allTimingOn_(timer){var x,y,instance;x=0;y=1;instance=this.pj_new();this.pj_on_time_with_(timer,"empty",function(){return null});this.pj_on_time_with_(timer,"add-1",function(){return x=x+1});this.pj_on_time_with_(timer,"add-y",function(){return x=$asNil$(x).pj_43_(y)});this.pj_on_time_with_(timer,"add-expr",function(){return x=$asNil$(x).pj_43_($asNil$(instance).pj_one())});this.pj_on_time_with_(timer,"fieldSetI",function(){return y=$asNil$(instance).pj_index_(3)});this.pj_on_time_with_(timer,"fieldSetV",function(){return y=$asNil$(instance).pj_instVarNamed_put_("index",3)});this.pj_on_time_with_(timer,"fieldGetI",function(){return y=$asNil$(instance).pj_index()});this.pj_on_time_with_(timer,"fieldGetV",function(){return y=$asNil$(instance).pj_instVarNamed_("index")});this.pj_on_time_with_(timer,"message",function(){return $asNil$(instance).pj_ten()});this.pj_on_time_with_(timer,"cond-return",function(){return $asNil$(instance).pj_conditionalReturn()});this.pj_on_time_with_(timer,"nonlocal",function(){return $asNil$(instance).pj_nonlocalReturn()});this.pj_on_time_with_(timer,"nonlocal-block",function(){return $asNil$(instance).pj_nonlocalReturn2()});this.pj_on_time_with_(timer,"repeatLoop",function(){return $asNil$(instance).pj_repeatLoop()});this.pj_on_time_with_(timer,"toDoLoop",function(){return $asNil$(instance).pj_toDoLoop()});this.pj_on_time_with_(timer,"whileLoop",function(){return $asNil$(instance).pj_whileLoop()});this.pj_on_time_with_(timer,"unoptLoop",function(){return $asNil$(instance).pj_whileRemoteLoop()});this.pj_on_time_with_ratio_(timer,"DeltaBlue",function(){PjDbPlanner.pj_chainTest_(100);return PjDbPlanner.pj_projectionTest_(100)},0.0003);this.pj_on_time_with_ratio_(timer,"Richards",function(){return PjRbBenchmark.pj_start()},5.0e-5);return this});
c$(function pj_browserTimingOn_(timer){this.pj_on_time_with_(timer,"docBody",function(){return $asNil$(document).pj_body()});return this});
c$(function pj_jsTimingOn_top_(timer,top){var x,y;x=this.pj_makeObject();y=0;this.pj_on_time_with_(timer,"fieldSet",function(){return $asNil$(x).pj_index_(1)});this.pj_on_time_with_(timer,"fieldSetN",function(){return x.index=1});this.pj_on_time_with_(timer,"fieldSetX",function(){return $asNil$(x).pj_instVarNamed_put_("index",1)});this.pj_on_time_with_(timer,"fieldGet",function(){return y=$asNil$(x).pj_index()});this.pj_on_time_with_(timer,"fieldGetN",function(){return y=x.index});this.pj_on_time_with_(timer,"fieldGetX",function(){return y=$asNil$(x).pj_instVarNamed_("index")});return this});
c$(function pj_makeObject(){var x={};x.index=42;return x});
c$(function pj_nodeTimingOn_(timer){return this});
c$(function pj_on_time_with_(aTimingApp,desc,block){this.pj_on_time_with_ratio_(aTimingApp,desc,block,1);return this});
c$(function pj_on_time_with_ratio_(aTimingApp,desc,block,ratio){var $2,$1;$asNil$(aTimingApp).pj_prefix_("(warmup)");for(var $1=1,$2=$asNil$(aTimingApp).pj_warmups();$1<=$2;++$1){$asNil$(aTimingApp).pj_time_with_ratio_(desc,block,ratio)}$asNil$(aTimingApp).pj_prefix_("");for(var $1=1,$2=$asNil$(aTimingApp).pj_runs();$1<=$2;++$1){$asNil$(aTimingApp).pj_time_with_ratio_(desc,block,ratio)}return this});
c$(function pj_runTimings_(aTimingApp){$asNil$(aTimingApp).pj_log_("Running "+$asNil$($asNil$(aTimingApp).pj_iterations()).pj_asString()+" iterations");$asNil$(aTimingApp).pj_time();$asNil$(aTimingApp).pj_log_("Done");return this});
});
Object.pj_subclass_("PjDbStrength");
PjDbStrength.$$def(function(i$,c$,cp$){
i$(function pj_arithmeticValue(){return this.arithmeticValue});
i$(function pj_initializeWith_(symVal){this.symbolicValue=symVal;this.arithmeticValue=$asNil$(cp$.StrengthTable).pj_at_(this.symbolicValue);return this});
i$(function pj_printOn_(aStream){$asNil$(aStream).pj_nextPutAll_("%"+this.symbolicValue+"%");return this});
i$(function pj_sameAs_(aStrength){return $asNil$(this.arithmeticValue).pj_61_($asNil$(aStrength).pj_arithmeticValue())});
i$(function pj_stronger_(aStrength){return this.arithmeticValue<$asNil$(aStrength).pj_arithmeticValue()});
i$(function pj_strongest_(aStrength){if(true==$asNil$(aStrength).pj_stronger_(this)){return aStrength}else{return this}});
i$(function pj_weaker_(aStrength){return this.arithmeticValue>$asNil$(aStrength).pj_arithmeticValue()});
i$(function pj_weakest_(aStrength){if(true==$asNil$(aStrength).pj_weaker_(this)){return aStrength}else{return this}});
c$(function pj_absoluteStrongest(){return cp$.AbsoluteStrongest});
c$(function pj_absoluteWeakest(){return cp$.AbsoluteWeakest});
c$(function pj_initialize(){var $_self_$=this;cp$.StrengthTable=PjDictionary.pj_new();$asNil$(cp$.StrengthTable).pj_at_put_("absoluteStrongest",-10000);$asNil$(cp$.StrengthTable).pj_at_put_("required",-800);$asNil$(cp$.StrengthTable).pj_at_put_("strongPreferred",-600);$asNil$(cp$.StrengthTable).pj_at_put_("preferred",-400);$asNil$(cp$.StrengthTable).pj_at_put_("strongDefault",-200);$asNil$(cp$.StrengthTable).pj_at_put_("default",0);$asNil$(cp$.StrengthTable).pj_at_put_("weakDefault",500);$asNil$(cp$.StrengthTable).pj_at_put_("absoluteWeakest",10000);cp$.StrengthConstants=PjDictionary.pj_new();$asNil$($asNil$(cp$.StrengthTable).pj_keys()).pj_do_(function(strengthSymbol){return $asNil$(cp$.StrengthConstants).pj_at_put_(strengthSymbol,$asNil$(Object.pj_new.call($_self_$)).pj_initializeWith_(strengthSymbol))});cp$.AbsoluteStrongest=PjDbStrength.pj_of_("absoluteStrongest");cp$.AbsoluteWeakest=PjDbStrength.pj_of_("absoluteWeakest");cp$.Required=PjDbStrength.pj_of_("required");return this});
c$(function pj_of_(aSymbol){return $asNil$(cp$.StrengthConstants).pj_at_(aSymbol)});
c$(function pj_required(){return cp$.Required});
cp$.AbsoluteStrongest=cp$.AbsoluteWeakest=cp$.Required=cp$.StrengthConstants=cp$.StrengthTable=null;
});
Object.pj_subclass_("NodeList");
NodeList.$$def(function(i$,c$,cp$){
i$(function pj_44_(other){var $1;return ($1=$asNil$($asNil$(this.pj_class()).pj_new()),$1.pj_addAll_(this),$1.pj_addAll_(other),$1.pj_yourself())});
i$(function pj_61_(anArray){var $_err_$={};try{if(this===anArray){return true};if(false==$asNil$(anArray).pj_isKindOf_(Array)){return false};if(false==$asNil$(this.pj_size()).pj_61_($asNil$(anArray).pj_size())){return false};this.pj_with_do_(anArray,function(myElement,otherElement){if(true==$asNil$(myElement).pj_61_(otherElement)){return null}else{throw $_err_$=false}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_addAll_(aCollection){var $_self_$=this;$asNil$(aCollection).pj_do_(function(each){return $_self_$.pj_add_(each)});return aCollection});
i$(function pj_addAllLast_(aCollection){var $_self_$=this;$asNil$(aCollection).pj_do_(function(each){return $_self_$.pj_addLast_(each)});return aCollection});
i$(function pj_allButFirst(){return this.pj_allButFirst_(1)});
i$(function pj_allButFirst_(n){return this.pj_copyFrom_to_(n+1,this.pj_size())});
i$(function pj_allButLast(){return this.pj_allButLast_(1)});
i$(function pj_allButLast_(n){return this.pj_copyFrom_to_(1,$asNil$(this.pj_size()).pj_45_(n))});
i$(function pj_allSatisfy_(aBlock){var $_err_$={};try{this.pj_do_(function(each){if(true==$asNil$(aBlock).pj_value_(each)){return null}else{throw $_err_$=false}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_anySatisfy_(aBlock){var $_err_$={};try{this.pj_do_(function(each){if(true==$asNil$(aBlock).pj_value_(each)){throw $_err_$=true}else{return null}});return false}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_appendTo_(aCollection){return $asNil$(aCollection).pj_addAllLast_(this)});
i$(function pj_asArray(){return Array.pj_from_(this)});
i$(function pj_asDictionary(){return this.pj_as_(PjDictionary)});
i$(function pj_asJsObject(){var jsObject;if(true==this.pj_isEmpty()){return this};if(false==$asNil$(this.pj_first()).pj_isKindOf_(PjAssociation)){return this.pj_collect_(function(each){return $asNil$(each).pj_asJsObject()})};jsObject=Object.pj_new();this.pj_do_(function(association){return $asNil$(jsObject).pj_at_put_($asNil$(association).pj_key(),$asNil$($asNil$(association).pj_value()).pj_asJsObject())});return jsObject});
i$(function pj_asOrderedCollection(){return this.pj_as_(Array)});
i$(function pj_asSet(){return PjSet.pj_withAll_(this)});
i$(function pj_asSortedCollection(){var $1;return ($1=$asNil$(PjSortedCollection.pj_new()),$1.pj_addAll_(this),$1.pj_yourself())});
i$(function pj_asString(){return $asNil$(String.pj_new_(this.pj_size())).pj_replaceFrom_to_with_(1,this.pj_size(),this)});
i$(function pj_associationsDo_(aBlock){this.pj_do_(aBlock);return this});
i$(function pj_at_(i){return this[i-1]});
i$(function pj_at_ifAbsent_(index,aBlock){if(true==(index>0&&index>this.pj_size())){return $asNil$(aBlock).pj_value()};return this.pj_at_(index)});
i$(function pj_atRandom(){var randomIndex = Math.floor((Math.random() * this.pj_size()) + 1);
return this.pj_at_(randomIndex);});
i$(function pj_collect_(aBlock){var result=[];for(var i=0,max=this.length;i<max;++i)result.push(typeof aBlock=="string"?$asNil$(this[i]).pj_perform_(aBlock):aBlock(this[i]));return result});
i$(function pj_copyFrom_to_(start,stop){var newSize;newSize=$asNil$(stop).pj_45_(start)+1;return $asNil$($asNil$(this.pj_species()).pj_new_(newSize)).pj_replaceFrom_to_with_startingAt_(1,newSize,this,start)});
i$(function pj_copyReplaceFrom_to_with_(start,stop,replacementCollection){var newSequenceableCollection,newSize,endReplacement;newSize=$asNil$($asNil$(this.pj_size()).pj_45_($asNil$(stop).pj_45_(start)+1)).pj_43_($asNil$(replacementCollection).pj_size());endReplacement=$asNil$((start-1)).pj_43_($asNil$(replacementCollection).pj_size());newSequenceableCollection=$asNil$(this.pj_species()).pj_new_(newSize);if(start>1){$asNil$(newSequenceableCollection).pj_replaceFrom_to_with_startingAt_(1,start-1,this,1)};if(start<=endReplacement){$asNil$(newSequenceableCollection).pj_replaceFrom_to_with_startingAt_(start,endReplacement,replacementCollection,1)};if(endReplacement<newSize){$asNil$(newSequenceableCollection).pj_replaceFrom_to_with_startingAt_(endReplacement+1,newSize,this,stop+1)};return newSequenceableCollection});
i$(function pj_copyWith_(newElement){var newIC;newIC=$asNil$(this.pj_species()).pj_new_(this.pj_size()+1);$asNil$(newIC).pj_replaceFrom_to_with_startingAt_(1,this.pj_size(),this,1);$asNil$(newIC).pj_at_put_($asNil$(newIC).pj_size(),newElement);return newIC});
i$(function pj_copyWithFirst_(newElement){var newIC;newIC=$asNil$(this.pj_species()).pj_ofSize_(this.pj_size()+1);$asNil$(newIC).pj_replaceFrom_to_with_startingAt_(2,this.pj_size()+1,this,1);$asNil$(newIC).pj_at_put_(1,newElement);return newIC});
i$(function pj_copyWithoutIndex_(index){var copy;copy=$asNil$(this.pj_species()).pj_ofSize_(this.pj_size()-1);$asNil$(copy).pj_replaceFrom_to_with_startingAt_(1,index-1,this,1);$asNil$(copy).pj_replaceFrom_to_with_startingAt_(index,$asNil$(copy).pj_size(),this,index+1);return copy});
i$(function pj_detect_ifFound_(aBlock,foundBlock){this.pj_detect_ifFound_ifNone_(aBlock,foundBlock,function(){return null});return this});
i$(function pj_detect_ifFound_ifNone_(aBlock,foundBlock,exceptionBlock){var $_err_$={};try{this.pj_do_(function(each){if(true==$asNil$(aBlock).pj_value_(each)){throw $_err_$=$asNil$(foundBlock).pj_cull_(each)}else{return null}});return $asNil$(exceptionBlock).pj_value()}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_detect_ifNone_(aBlock,exceptionBlock){return this.pj_detect_ifFound_ifNone_(aBlock,function(element){return element},exceptionBlock)});
i$(function pj_do_(aBlock){for(var i=0,max=this.length;i<max;++i)aBlock(this[i]);return this});
i$(function pj_do_separatedBy_(elementBlock,separatorBlock){for(var i=0,max=this.length;i<max;++i){if(i)separatorBlock();elementBlock(this[i])};return this});
i$(function pj_doWithIndex_(elementAndIndexBlock){return this.pj_withIndexDo_(elementAndIndexBlock)});
i$(function pj_eighth(){return this[7]});
i$(function pj_fifth(){return this[4]});
i$(function pj_first(){return this[0]});
i$(function pj_first_(n){return this.slice(0,n)});
i$(function pj_fourth(){return this[3]});
i$(function pj_from_to_put_(startIndex,endIndex,anObject){var written,toWrite,thisWrite;if(startIndex>endIndex){return this};this.pj_at_put_(startIndex,anObject);written=1;toWrite=$asNil$(endIndex).pj_45_(startIndex)+1;while(written<toWrite){thisWrite=$asNil$(written).pj_min_($asNil$(toWrite).pj_45_(written));this.pj_replaceFrom_to_with_startingAt_($asNil$(startIndex).pj_43_(written),$asNil$($asNil$(startIndex).pj_43_(written)).pj_43_(thisWrite)-1,this,startIndex);written=$asNil$(written).pj_43_(thisWrite)}return anObject});
i$(function pj_grownBy_(length){var newCollection,size;size=this.pj_size();newCollection=$asNil$(this.pj_species()).pj_ofSize_($asNil$(size).pj_43_(length));$asNil$(newCollection).pj_replaceFrom_to_with_startingAt_(1,size,this,1);return newCollection});
i$(function pj_ifEmpty_(aBlock){if(true==this.pj_isEmpty()){return $asNil$(aBlock).pj_value()};return this});
i$(function pj_includes_(x){if (x.pj_isJSPrimitiveType()) {
if (this.includes(x)) return true;
for(var i=this.length-1;i>=0;--i) if (x==this[i]) return true;
return false}
for(var i=this.length-1;i>=0;--i) if (x.pj_61_(this[i])) return true;
return false});
i$(function pj_includesAll_(aCollection){var $_self_$=this;var $_err_$={};try{$asNil$(aCollection).pj_do_(function(elem){if(true==$_self_$.pj_includes_(elem)){return null}else{throw $_err_$=false}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_indexOf_(x){for(var i = 0; i < this.length; i++){
if(x == this[i]){return i + 1}
}
return 0;});
i$(function pj_indexOf_startingAt_(x,n){return this.indexOf(x,n-1)+1});
i$(function pj_inject_into_(thisValue,binaryBlock){var nextValue;nextValue=thisValue;this.pj_do_(function(each){return nextValue=$asNil$(binaryBlock).pj_value_value_(nextValue,each)});return nextValue});
i$(function pj_insert_before_(anObject,spot){this.splice(spot-1, 0, anObject);return anObject});
i$(function pj_isArray(){return true});
i$(function pj_isCollection(){return true});
i$(function pj_isEmpty(){return this.pj_size()==0});
i$(function pj_isEmptyOrNil(){return this.pj_isEmpty()});
i$(function pj_isLiteral(){if(this.pj_class()===Array){return this.pj_allSatisfy_(function(each){return $asNil$(each).pj_isLiteral()})}else{return false}});
i$(function pj_isSelfEvaluating(){if(true==this.pj_allSatisfy_(function(each){return $asNil$(each).pj_isSelfEvaluating()})){return this.pj_class()===Array}else{return false}});
i$(function pj_join_(aCollection){var result,$_self_$=this;result=$asNil$(this.pj_class()).pj_new();$asNil$(aCollection).pj_do_separatedBy_(function(each){return $asNil$(each).pj_appendTo_(result)},function(){return $_self_$.pj_appendTo_(result)});return result});
i$(function pj_last(){return this[this.length-1]});
i$(function pj_last_(n){return this.slice(this.length-n)});
i$(function pj_ninth(){return this[8]});
i$(function pj_noneSatisfy_(aBlock){var $_err_$={};try{this.pj_do_(function(item){if(true==$asNil$(aBlock).pj_value_(item)){throw $_err_$=false}else{return null}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_notEmpty(){return this.length!=0});
i$(function pj_printAsLiteralFormOn_(aStream){$asNil$(aStream).pj_nextPut_("#");this.pj_printElementsOn_(aStream);return this});
i$(function pj_printAsSelfEvaluatingFormOn_(aStream){$asNil$(aStream).pj_nextPut_("{");this.pj_do_separatedBy_(function(el){return $asNil$(el).pj_printOn_(aStream)},function(){return $asNil$(aStream).pj_nextPutAll_(". ")});$asNil$(aStream).pj_nextPut_("}");return this});
i$(function pj_printElementsOn_(aStream){$asNil$(aStream).pj_nextPut_("(");this.pj_do_separatedBy_(function(element){return $asNil$(aStream).pj_print_(element)},function(){return $asNil$(aStream).pj_space()});$asNil$(aStream).pj_nextPut_(")");return this});
i$(function pj_printNameOn_(aStream){Object.prototype.pj_printOn_.call(this,aStream);return this});
i$(function pj_putOn_(aStream){this.pj_do_(function(each){return $asNil$(each).pj_putOn_(aStream)});return this});
i$(function pj_reject_(aBlock){return this.pj_select_(function(element){return $asNil$(aBlock).pj_value_(element)===false})});
i$(function pj_remove_(oldObject){var $_self_$=this;return this.pj_remove_ifAbsent_(oldObject,function(){return $_self_$.pj_errorNotFound_(oldObject)})});
i$(function pj_removeAll_(aCollection){var $_self_$=this;if(aCollection===this){return this.pj_removeAll()};$asNil$(aCollection).pj_do_(function(each){return $_self_$.pj_remove_(each)});return aCollection});
i$(function pj_replaceFrom_to_with_(start,stop,replacement){if(false==$asNil$($asNil$(replacement).pj_size()).pj_61_($asNil$(stop).pj_45_(start)+1)){this.pj_error_("Size of replacement doesnt match")};return this.pj_replaceFrom_to_with_startingAt_(start,stop,replacement,1)});
i$(function pj_reverseDo_(aBlock){var $_self_$=this;$asNil$(this.pj_size()).pj_to_by_do_(1,-1,function(index){return $asNil$(aBlock).pj_value_($_self_$.pj_at_(index))});return this});
i$(function pj_reversed(){return $asNil$(this.pj_asArray()).pj_reverse()});
i$(function pj_second(){return this[1]});
i$(function pj_select_(aBlock){var result=[];for(var i=0,max=this.length;i<max;++i){if(true==(typeof aBlock=="string"?$asNil$(this[i]).pj_perform_(aBlock):aBlock(this[i])))result.push(this[i])}return result});
i$(function pj_serializationContents(){var serializableElements;serializableElements=Array.pj_new();this.pj_do_(function(each){return $asNil$(serializableElements).pj_add_($asNil$(each).pj_serializationArray())});return serializableElements});
i$(function pj_seventh(){return this[6]});
i$(function pj_shouldBePrintedAsLiteral(){if(this.pj_class()===Array){return this.pj_allSatisfy_(function(each){return $asNil$(each).pj_shouldBePrintedAsLiteral()})}else{return false}});
i$(function pj_sixth(){return this[5]});
i$(function pj_size(){return this.length});
i$(function pj_species(){return Array});
i$(function pj_third(){return this[2]});
i$(function pj_with_do_(otherCollection,aBlock){for(var i=0,max=this.length;i<max;++i)aBlock(this[i],otherCollection[i]);return this});
i$(function pj_withIndexDo_(aBlock){for(var i=0,max=this.length;i<max;++i)aBlock(this[i],i+1);return this});
c$(function pj_instantiateWithPhxJsonReader_instanceJsonObject_(reader,jsonObject){var resultCollection,elements,$1;resultCollection=this.pj_new_($asNil$(jsonObject).pj_size());$asNil$(reader).pj_addKnownObject_(resultCollection);elements=$asNil$(jsonObject).pj_collect_(function(each){return $asNil$(reader).pj_readFromJsObjectOrDictionary_(each)});return ($1=$asNil$(resultCollection),$1.pj_addAll_(elements),$1.pj_yourself())});
c$(function pj_newFrom_(aCollection){var newCollection;newCollection=this.pj_new_($asNil$(aCollection).pj_size());$asNil$(newCollection).pj_addAll_(aCollection);return newCollection});
c$(function pj_newFromMaterialized_(aJsonArray){var materializedArray;materializedArray=this.pj_new();$asNil$(aJsonArray).pj_do_(function(each){return $asNil$(materializedArray).pj_add_($asNil$(each).pj_materialize())});return materializedArray});
c$(function pj_with_(anObject){var newCollection;newCollection=this.pj_new_(1);$asNil$(newCollection).pj_at_put_(1,anObject);return newCollection});
c$(function pj_with_with_(firstObject,secondObject){var newCollection;newCollection=this.pj_new_(2);$asNil$(newCollection).pj_at_put_(1,firstObject);$asNil$(newCollection).pj_at_put_(2,secondObject);return newCollection});
c$(function pj_with_with_with_(firstObject,secondObject,thirdObject){var newCollection;newCollection=this.pj_new_(3);$asNil$(newCollection).pj_at_put_(1,firstObject);$asNil$(newCollection).pj_at_put_(2,secondObject);$asNil$(newCollection).pj_at_put_(3,thirdObject);return newCollection});
c$(function pj_with_with_with_with_(firstObject,secondObject,thirdObject,fourthObject){var newCollection;newCollection=this.pj_new_(4);$asNil$(newCollection).pj_at_put_(1,firstObject);$asNil$(newCollection).pj_at_put_(2,secondObject);$asNil$(newCollection).pj_at_put_(3,thirdObject);$asNil$(newCollection).pj_at_put_(4,fourthObject);return newCollection});
c$(function pj_withAll_(aCollection){var $1;return ($1=$asNil$(this.pj_new_($asNil$(aCollection).pj_size())),$1.pj_addAll_(aCollection),$1.pj_yourself())});
});
Object.pj_subclass_("PjDbAbstractConstraint");
PjDbAbstractConstraint.$$def(function(i$,c$,cp$){
i$(function pj_addConstraint(){this.pj_addToGraph();$asNil$(PjDbPlanner.pj_current()).pj_incrementalAdd_(this);return this});
i$(function pj_addToGraph(){this.pj_subclassResponsibility();return this});
i$(function pj_chooseMethod_(mark){this.pj_subclassResponsibility();return this});
i$(function pj_destroyConstraint(){if(true==this.pj_isSatisfied()){$asNil$(PjDbPlanner.pj_current()).pj_incrementalRemove_(this)};this.pj_removeFromGraph();this.pj_release();return this});
i$(function pj_execute(){this.pj_subclassResponsibility();return this});
i$(function pj_inputsDo_(aBlock){this.pj_subclassResponsibility();return this});
i$(function pj_inputsKnown_(mark){var $_err_$={};try{this.pj_inputsDo_(function(v){if(true==(true==$asNil$($asNil$(v).pj_mark()).pj_61_(mark)||true==$asNil$(v).pj_stay()||$asNil$(v).pj_determinedBy()===null)){return null}else{throw $_err_$=false}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_isInput(){return false});
i$(function pj_isSatisfied(){this.pj_subclassResponsibility();return this});
i$(function pj_longPrintOn_(aStream){var $2,$3,$4,$1;$asNil$(aStream).pj_nextPut_("(");this.pj_shortPrintOn_(aStream);$1=$asNil$(aStream);$1.pj_space();$1.pj_nextPutAll_($asNil$(this.pj_strength()).pj_printString());if(true==this.pj_isSatisfied()){$2=$asNil$(aStream);$2.pj_cr();$2.pj_space();$2.pj_space();$2.pj_space();this.pj_inputsDo_(function($in){return $asNil$(aStream).pj_nextPutAll_("v"+$asNil$($asNil$($in).pj_asOop()).pj_printString()+" ")});$asNil$(aStream).pj_nextPutAll_("-> ");$asNil$(aStream).pj_nextPutAll_("v"+$asNil$($asNil$(this.pj_output()).pj_asOop()).pj_printString())}else{$3=$asNil$(aStream);$3.pj_space();$3.pj_nextPutAll_("UNSATISFIED")};$4=$asNil$(aStream);$4.pj_nextPut_(")");$4.pj_cr();return this});
i$(function pj_markUnsatisfied(){this.pj_subclassResponsibility();return this});
i$(function pj_output(){this.pj_subclassResponsibility();return this});
i$(function pj_printOn_(aStream){this.pj_shortPrintOn_(aStream);return this});
i$(function pj_recalculate(){this.pj_subclassResponsibility();return this});
i$(function pj_removeFromGraph(){this.pj_subclassResponsibility();return this});
i$(function pj_satisfy_(mark){var overridden,out;this.pj_chooseMethod_(mark);if(true==this.pj_isSatisfied()){this.pj_inputsDo_(function($in){return $asNil$($in).pj_mark_(mark)});out=this.pj_output();overridden=$asNil$(out).pj_determinedBy();if(overridden!==null){$asNil$(overridden).pj_markUnsatisfied()};$asNil$(out).pj_determinedBy_(this);if(false==$asNil$(PjDbPlanner.pj_current()).pj_addPropagate_mark_(this,mark)){this.pj_notify_($asNil$(("Cycle encountered adding:\\   "+this.pj_printString()+"\\Constraint removed.")).pj_withCRs());return null};$asNil$(out).pj_mark_(mark)}else{overridden=null;if(true==$asNil$(this.strength).pj_sameAs_(PjDbStrength.pj_required())){this.pj_notify_("Failed to satisfy a required constraint")}};return overridden});
i$(function pj_shortPrintOn_(aStream){$asNil$(aStream).pj_nextPutAll_($asNil$($asNil$($asNil$($asNil$(this.pj_class()).pj_name()).pj_44_("(")).pj_44_($asNil$(this.pj_asOop()).pj_printString())).pj_44_(")"));return this});
i$(function pj_strength(){return this.strength});
i$(function pj_strength_(strengthSymbol){this.strength=PjDbStrength.pj_of_(strengthSymbol);return this});
c$(function pj_isAbstract(){return this==PjDbAbstractConstraint});
});
Object.pj_subclass_("HTMLCollection");
HTMLCollection.$$def(function(i$,c$,cp$){
i$(function pj_44_(other){var $1;return ($1=$asNil$($asNil$(this.pj_class()).pj_new()),$1.pj_addAll_(this),$1.pj_addAll_(other),$1.pj_yourself())});
i$(function pj_61_(anArray){var $_err_$={};try{if(this===anArray){return true};if(false==$asNil$(anArray).pj_isKindOf_(Array)){return false};if(false==$asNil$(this.pj_size()).pj_61_($asNil$(anArray).pj_size())){return false};this.pj_with_do_(anArray,function(myElement,otherElement){if(true==$asNil$(myElement).pj_61_(otherElement)){return null}else{throw $_err_$=false}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_addAll_(aCollection){var $_self_$=this;$asNil$(aCollection).pj_do_(function(each){return $_self_$.pj_add_(each)});return aCollection});
i$(function pj_addAllLast_(aCollection){var $_self_$=this;$asNil$(aCollection).pj_do_(function(each){return $_self_$.pj_addLast_(each)});return aCollection});
i$(function pj_allButFirst(){return this.pj_allButFirst_(1)});
i$(function pj_allButFirst_(n){return this.pj_copyFrom_to_(n+1,this.pj_size())});
i$(function pj_allButLast(){return this.pj_allButLast_(1)});
i$(function pj_allButLast_(n){return this.pj_copyFrom_to_(1,$asNil$(this.pj_size()).pj_45_(n))});
i$(function pj_allSatisfy_(aBlock){var $_err_$={};try{this.pj_do_(function(each){if(true==$asNil$(aBlock).pj_value_(each)){return null}else{throw $_err_$=false}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_anySatisfy_(aBlock){var $_err_$={};try{this.pj_do_(function(each){if(true==$asNil$(aBlock).pj_value_(each)){throw $_err_$=true}else{return null}});return false}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_appendTo_(aCollection){return $asNil$(aCollection).pj_addAllLast_(this)});
i$(function pj_asArray(){return Array.pj_from_(this)});
i$(function pj_asDictionary(){return this.pj_as_(PjDictionary)});
i$(function pj_asJsObject(){var jsObject;if(true==this.pj_isEmpty()){return this};if(false==$asNil$(this.pj_first()).pj_isKindOf_(PjAssociation)){return this.pj_collect_(function(each){return $asNil$(each).pj_asJsObject()})};jsObject=Object.pj_new();this.pj_do_(function(association){return $asNil$(jsObject).pj_at_put_($asNil$(association).pj_key(),$asNil$($asNil$(association).pj_value()).pj_asJsObject())});return jsObject});
i$(function pj_asOrderedCollection(){return this.pj_as_(Array)});
i$(function pj_asSet(){return PjSet.pj_withAll_(this)});
i$(function pj_asSortedCollection(){var $1;return ($1=$asNil$(PjSortedCollection.pj_new()),$1.pj_addAll_(this),$1.pj_yourself())});
i$(function pj_asString(){return $asNil$(String.pj_new_(this.pj_size())).pj_replaceFrom_to_with_(1,this.pj_size(),this)});
i$(function pj_associationsDo_(aBlock){this.pj_do_(aBlock);return this});
i$(function pj_at_(i){return this[i-1]});
i$(function pj_at_ifAbsent_(index,aBlock){if(true==(index>0&&index>this.pj_size())){return $asNil$(aBlock).pj_value()};return this.pj_at_(index)});
i$(function pj_atRandom(){var randomIndex = Math.floor((Math.random() * this.pj_size()) + 1);
return this.pj_at_(randomIndex);});
i$(function pj_collect_(aBlock){var result=[];for(var i=0,max=this.length;i<max;++i)result.push(typeof aBlock=="string"?$asNil$(this[i]).pj_perform_(aBlock):aBlock(this[i]));return result});
i$(function pj_copyFrom_to_(start,stop){var newSize;newSize=$asNil$(stop).pj_45_(start)+1;return $asNil$($asNil$(this.pj_species()).pj_new_(newSize)).pj_replaceFrom_to_with_startingAt_(1,newSize,this,start)});
i$(function pj_copyReplaceFrom_to_with_(start,stop,replacementCollection){var newSequenceableCollection,newSize,endReplacement;newSize=$asNil$($asNil$(this.pj_size()).pj_45_($asNil$(stop).pj_45_(start)+1)).pj_43_($asNil$(replacementCollection).pj_size());endReplacement=$asNil$((start-1)).pj_43_($asNil$(replacementCollection).pj_size());newSequenceableCollection=$asNil$(this.pj_species()).pj_new_(newSize);if(start>1){$asNil$(newSequenceableCollection).pj_replaceFrom_to_with_startingAt_(1,start-1,this,1)};if(start<=endReplacement){$asNil$(newSequenceableCollection).pj_replaceFrom_to_with_startingAt_(start,endReplacement,replacementCollection,1)};if(endReplacement<newSize){$asNil$(newSequenceableCollection).pj_replaceFrom_to_with_startingAt_(endReplacement+1,newSize,this,stop+1)};return newSequenceableCollection});
i$(function pj_copyWith_(newElement){var newIC;newIC=$asNil$(this.pj_species()).pj_new_(this.pj_size()+1);$asNil$(newIC).pj_replaceFrom_to_with_startingAt_(1,this.pj_size(),this,1);$asNil$(newIC).pj_at_put_($asNil$(newIC).pj_size(),newElement);return newIC});
i$(function pj_copyWithFirst_(newElement){var newIC;newIC=$asNil$(this.pj_species()).pj_ofSize_(this.pj_size()+1);$asNil$(newIC).pj_replaceFrom_to_with_startingAt_(2,this.pj_size()+1,this,1);$asNil$(newIC).pj_at_put_(1,newElement);return newIC});
i$(function pj_copyWithoutIndex_(index){var copy;copy=$asNil$(this.pj_species()).pj_ofSize_(this.pj_size()-1);$asNil$(copy).pj_replaceFrom_to_with_startingAt_(1,index-1,this,1);$asNil$(copy).pj_replaceFrom_to_with_startingAt_(index,$asNil$(copy).pj_size(),this,index+1);return copy});
i$(function pj_detect_ifFound_(aBlock,foundBlock){this.pj_detect_ifFound_ifNone_(aBlock,foundBlock,function(){return null});return this});
i$(function pj_detect_ifFound_ifNone_(aBlock,foundBlock,exceptionBlock){var $_err_$={};try{this.pj_do_(function(each){if(true==$asNil$(aBlock).pj_value_(each)){throw $_err_$=$asNil$(foundBlock).pj_cull_(each)}else{return null}});return $asNil$(exceptionBlock).pj_value()}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_detect_ifNone_(aBlock,exceptionBlock){return this.pj_detect_ifFound_ifNone_(aBlock,function(element){return element},exceptionBlock)});
i$(function pj_do_(aBlock){for(var i=0,max=this.length;i<max;++i)aBlock(this[i]);return this});
i$(function pj_do_separatedBy_(elementBlock,separatorBlock){for(var i=0,max=this.length;i<max;++i){if(i)separatorBlock();elementBlock(this[i])};return this});
i$(function pj_doWithIndex_(elementAndIndexBlock){return this.pj_withIndexDo_(elementAndIndexBlock)});
i$(function pj_eighth(){return this[7]});
i$(function pj_fifth(){return this[4]});
i$(function pj_first(){return this[0]});
i$(function pj_first_(n){return this.slice(0,n)});
i$(function pj_fourth(){return this[3]});
i$(function pj_from_to_put_(startIndex,endIndex,anObject){var written,toWrite,thisWrite;if(startIndex>endIndex){return this};this.pj_at_put_(startIndex,anObject);written=1;toWrite=$asNil$(endIndex).pj_45_(startIndex)+1;while(written<toWrite){thisWrite=$asNil$(written).pj_min_($asNil$(toWrite).pj_45_(written));this.pj_replaceFrom_to_with_startingAt_($asNil$(startIndex).pj_43_(written),$asNil$($asNil$(startIndex).pj_43_(written)).pj_43_(thisWrite)-1,this,startIndex);written=$asNil$(written).pj_43_(thisWrite)}return anObject});
i$(function pj_grownBy_(length){var newCollection,size;size=this.pj_size();newCollection=$asNil$(this.pj_species()).pj_ofSize_($asNil$(size).pj_43_(length));$asNil$(newCollection).pj_replaceFrom_to_with_startingAt_(1,size,this,1);return newCollection});
i$(function pj_ifEmpty_(aBlock){if(true==this.pj_isEmpty()){return $asNil$(aBlock).pj_value()};return this});
i$(function pj_includes_(x){if (x.pj_isJSPrimitiveType()) {
if (this.includes(x)) return true;
for(var i=this.length-1;i>=0;--i) if (x==this[i]) return true;
return false}
for(var i=this.length-1;i>=0;--i) if (x.pj_61_(this[i])) return true;
return false});
i$(function pj_includesAll_(aCollection){var $_self_$=this;var $_err_$={};try{$asNil$(aCollection).pj_do_(function(elem){if(true==$_self_$.pj_includes_(elem)){return null}else{throw $_err_$=false}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_indexOf_(x){for(var i = 0; i < this.length; i++){
if(x == this[i]){return i + 1}
}
return 0;});
i$(function pj_indexOf_startingAt_(x,n){return this.indexOf(x,n-1)+1});
i$(function pj_inject_into_(thisValue,binaryBlock){var nextValue;nextValue=thisValue;this.pj_do_(function(each){return nextValue=$asNil$(binaryBlock).pj_value_value_(nextValue,each)});return nextValue});
i$(function pj_insert_before_(anObject,spot){this.splice(spot-1, 0, anObject);return anObject});
i$(function pj_isArray(){return true});
i$(function pj_isCollection(){return true});
i$(function pj_isEmpty(){return this.pj_size()==0});
i$(function pj_isEmptyOrNil(){return this.pj_isEmpty()});
i$(function pj_isLiteral(){if(this.pj_class()===Array){return this.pj_allSatisfy_(function(each){return $asNil$(each).pj_isLiteral()})}else{return false}});
i$(function pj_isSelfEvaluating(){if(true==this.pj_allSatisfy_(function(each){return $asNil$(each).pj_isSelfEvaluating()})){return this.pj_class()===Array}else{return false}});
i$(function pj_join_(aCollection){var result,$_self_$=this;result=$asNil$(this.pj_class()).pj_new();$asNil$(aCollection).pj_do_separatedBy_(function(each){return $asNil$(each).pj_appendTo_(result)},function(){return $_self_$.pj_appendTo_(result)});return result});
i$(function pj_last(){return this[this.length-1]});
i$(function pj_last_(n){return this.slice(this.length-n)});
i$(function pj_ninth(){return this[8]});
i$(function pj_noneSatisfy_(aBlock){var $_err_$={};try{this.pj_do_(function(item){if(true==$asNil$(aBlock).pj_value_(item)){throw $_err_$=false}else{return null}});return true}catch(e){if(e===$_err_$)return e;throw e}});
i$(function pj_notEmpty(){return this.length!=0});
i$(function pj_printAsLiteralFormOn_(aStream){$asNil$(aStream).pj_nextPut_("#");this.pj_printElementsOn_(aStream);return this});
i$(function pj_printAsSelfEvaluatingFormOn_(aStream){$asNil$(aStream).pj_nextPut_("{");this.pj_do_separatedBy_(function(el){return $asNil$(el).pj_printOn_(aStream)},function(){return $asNil$(aStream).pj_nextPutAll_(". ")});$asNil$(aStream).pj_nextPut_("}");return this});
i$(function pj_printElementsOn_(aStream){$asNil$(aStream).pj_nextPut_("(");this.pj_do_separatedBy_(function(element){return $asNil$(aStream).pj_print_(element)},function(){return $asNil$(aStream).pj_space()});$asNil$(aStream).pj_nextPut_(")");return this});
i$(function pj_printNameOn_(aStream){Object.prototype.pj_printOn_.call(this,aStream);return this});
i$(function pj_putOn_(aStream){this.pj_do_(function(each){return $asNil$(each).pj_putOn_(aStream)});return this});
i$(function pj_reject_(aBlock){return this.pj_select_(function(element){return $asNil$(aBlock).pj_value_(element)===false})});
i$(function pj_remove_(oldObject){var $_self_$=this;return this.pj_remove_ifAbsent_(oldObject,function(){return $_self_$.pj_errorNotFound_(oldObject)})});
i$(function pj_removeAll_(aCollection){var $_self_$=this;if(aCollection===this){return this.pj_removeAll()};$asNil$(aCollection).pj_do_(function(each){return $_self_$.pj_remove_(each)});return aCollection});
i$(function pj_replaceFrom_to_with_(start,stop,replacement){if(false==$asNil$($asNil$(replacement).pj_size()).pj_61_($asNil$(stop).pj_45_(start)+1)){this.pj_error_("Size of replacement doesnt match")};return this.pj_replaceFrom_to_with_startingAt_(start,stop,replacement,1)});
i$(function pj_reverseDo_(aBlock){var $_self_$=this;$asNil$(this.pj_size()).pj_to_by_do_(1,-1,function(index){return $asNil$(aBlock).pj_value_($_self_$.pj_at_(index))});return this});
i$(function pj_reversed(){return $asNil$(this.pj_asArray()).pj_reverse()});
i$(function pj_second(){return this[1]});
i$(function pj_select_(aBlock){var result=[];for(var i=0,max=this.length;i<max;++i){if(true==(typeof aBlock=="string"?$asNil$(this[i]).pj_perform_(aBlock):aBlock(this[i])))result.push(this[i])}return result});
i$(function pj_serializationContents(){var serializableElements;serializableElements=Array.pj_new();this.pj_do_(function(each){return $asNil$(serializableElements).pj_add_($asNil$(each).pj_serializationArray())});return serializableElements});
i$(function pj_seventh(){return this[6]});
i$(function pj_shouldBePrintedAsLiteral(){if(this.pj_class()===Array){return this.pj_allSatisfy_(function(each){return $asNil$(each).pj_shouldBePrintedAsLiteral()})}else{return false}});
i$(function pj_sixth(){return this[5]});
i$(function pj_size(){return this.length});
i$(function pj_species(){return Array});
i$(function pj_third(){return this[2]});
i$(function pj_with_do_(otherCollection,aBlock){for(var i=0,max=this.length;i<max;++i)aBlock(this[i],otherCollection[i]);return this});
i$(function pj_withIndexDo_(aBlock){for(var i=0,max=this.length;i<max;++i)aBlock(this[i],i+1);return this});
c$(function pj_instantiateWithPhxJsonReader_instanceJsonObject_(reader,jsonObject){var resultCollection,elements,$1;resultCollection=this.pj_new_($asNil$(jsonObject).pj_size());$asNil$(reader).pj_addKnownObject_(resultCollection);elements=$asNil$(jsonObject).pj_collect_(function(each){return $asNil$(reader).pj_readFromJsObjectOrDictionary_(each)});return ($1=$asNil$(resultCollection),$1.pj_addAll_(elements),$1.pj_yourself())});
c$(function pj_newFrom_(aCollection){var newCollection;newCollection=this.pj_new_($asNil$(aCollection).pj_size());$asNil$(newCollection).pj_addAll_(aCollection);return newCollection});
c$(function pj_newFromMaterialized_(aJsonArray){var materializedArray;materializedArray=this.pj_new();$asNil$(aJsonArray).pj_do_(function(each){return $asNil$(materializedArray).pj_add_($asNil$(each).pj_materialize())});return materializedArray});
c$(function pj_with_(anObject){var newCollection;newCollection=this.pj_new_(1);$asNil$(newCollection).pj_at_put_(1,anObject);return newCollection});
c$(function pj_with_with_(firstObject,secondObject){var newCollection;newCollection=this.pj_new_(2);$asNil$(newCollection).pj_at_put_(1,firstObject);$asNil$(newCollection).pj_at_put_(2,secondObject);return newCollection});
c$(function pj_with_with_with_(firstObject,secondObject,thirdObject){var newCollection;newCollection=this.pj_new_(3);$asNil$(newCollection).pj_at_put_(1,firstObject);$asNil$(newCollection).pj_at_put_(2,secondObject);$asNil$(newCollection).pj_at_put_(3,thirdObject);return newCollection});
c$(function pj_with_with_with_with_(firstObject,secondObject,thirdObject,fourthObject){var newCollection;newCollection=this.pj_new_(4);$asNil$(newCollection).pj_at_put_(1,firstObject);$asNil$(newCollection).pj_at_put_(2,secondObject);$asNil$(newCollection).pj_at_put_(3,thirdObject);$asNil$(newCollection).pj_at_put_(4,fourthObject);return newCollection});
c$(function pj_withAll_(aCollection){var $1;return ($1=$asNil$(this.pj_new_($asNil$(aCollection).pj_size())),$1.pj_addAll_(aCollection),$1.pj_yourself())});
});
PjRbObject.pj_subclass_("PjRbWorkerTaskDataRecord");
PjRbWorkerTaskDataRecord.$$def(function(i$,c$,cp$,$PjRbObject){
i$(function pj_count(){return this.count});
i$(function pj_count_(aCount){this.count=aCount;return this});
i$(function pj_create(){this.destination=$PjRbObject.HandlerA;this.count=0;return this});
i$(function pj_destination(){return this.destination});
i$(function pj_destination_(aHandler){this.destination=aHandler;return this});
c$(function pj_create(){return $asNil$(PjRbObject.pj_new.call(this)).pj_create()});
},PjRbObject);
PjRbObject.pj_subclass_("PjRbTaskState");
PjRbTaskState.$$def(function(i$,c$,cp$){
i$(function pj_isPacketPending(){return this.packetPendingIV});
i$(function pj_isRunning(){if(true==$asNil$(this.packetPendingIV).pj_not()){if(true==$asNil$(this.taskWaiting).pj_not()){return $asNil$(this.taskHolding).pj_not()}else{return false}}else{return false}});
i$(function pj_isTaskHolding(){return this.taskHolding});
i$(function pj_isTaskHoldingOrWaiting(){if(true==this.taskHolding){return true}else{if(true==$asNil$(this.packetPendingIV).pj_not()){return this.taskWaiting}else{return false}}});
i$(function pj_isTaskWaiting(){return this.taskWaiting});
i$(function pj_isWaiting(){if(true==$asNil$(this.packetPendingIV).pj_not()){if(true==this.taskWaiting){return $asNil$(this.taskHolding).pj_not()}else{return false}}else{return false}});
i$(function pj_isWaitingWithPacket(){if(true==this.packetPendingIV){if(true==this.taskWaiting){return $asNil$(this.taskHolding).pj_not()}else{return false}}else{return false}});
i$(function pj_packetPending(){this.packetPendingIV=true;this.taskWaiting=false;this.taskHolding=false;return this});
i$(function pj_running(){this.packetPendingIV=this.taskWaiting=this.taskHolding=false;return this});
i$(function pj_taskHolding_(aBoolean){this.taskHolding=aBoolean;return this});
i$(function pj_taskWaiting_(aBoolean){this.taskWaiting=aBoolean;return this});
i$(function pj_waiting(){this.packetPendingIV=this.taskHolding=false;this.taskWaiting=true;return this});
i$(function pj_waitingWithPacket(){this.taskHolding=false;this.taskWaiting=this.packetPendingIV=true;return this});
c$(function pj_packetPending(){return $asNil$(PjRbObject.pj_new.call(this)).pj_packetPending()});
c$(function pj_running(){return $asNil$(PjRbObject.pj_new.call(this)).pj_running()});
c$(function pj_waiting(){return $asNil$(PjRbObject.pj_new.call(this)).pj_waiting()});
c$(function pj_waitingWithPacket(){return $asNil$(PjRbObject.pj_new.call(this)).pj_waitingWithPacket()});
});
PjRbObject.pj_subclass_("PjRbIdleTaskDataRecord");
PjRbIdleTaskDataRecord.$$def(function(i$,c$,cp$){
i$(function pj_control(){return this.control});
i$(function pj_control_(aNumber){this.control=aNumber;return this});
i$(function pj_count(){return this.count});
i$(function pj_count_(aCount){this.count=aCount;return this});
i$(function pj_create(){this.control=1;this.count=10000;return this});
c$(function pj_create(){return $asNil$(PjRbObject.pj_new.call(this)).pj_create()});
});
PjRbObject.pj_subclass_("PjRbDeviceTaskDataRecord");
PjRbDeviceTaskDataRecord.$$def(function(i$,c$,cp$){
i$(function pj_create(){this.pending=null;return this});
i$(function pj_pending(){return this.pending});
i$(function pj_pending_(packet){this.pending=packet;return this});
c$(function pj_create(){return $asNil$(PjRbObject.pj_new.call(this)).pj_create()});
});
PjDbAbstractConstraint.pj_subclass_("PjDbBinaryConstraint");
PjDbBinaryConstraint.$$def(function(i$,c$,cp$){
i$(function pj_addToGraph(){$asNil$(this.v1).pj_addConstraint_(this);$asNil$(this.v2).pj_addConstraint_(this);this.direction=null;return this});
i$(function pj_chooseMethod_(mark){if($asNil$(this.v1).pj_mark()===mark){if(true==(true==$asNil$($asNil$(this.v2).pj_mark()).pj_126_61_(mark)&&$asNil$(this.strength).pj_stronger_($asNil$(this.v2).pj_walkStrength()))){return this.direction="forward"}else{return this.direction=null}};if($asNil$(this.v2).pj_mark()===mark){if(true==(true==$asNil$($asNil$(this.v1).pj_mark()).pj_126_61_(mark)&&$asNil$(this.strength).pj_stronger_($asNil$(this.v1).pj_walkStrength()))){return this.direction="backward"}else{return this.direction=null}};if(true==$asNil$($asNil$(this.v1).pj_walkStrength()).pj_weaker_($asNil$(this.v2).pj_walkStrength())){if(true==$asNil$(this.strength).pj_stronger_($asNil$(this.v1).pj_walkStrength())){return this.direction="backward"}else{return this.direction=null}}else{if(true==$asNil$(this.strength).pj_stronger_($asNil$(this.v2).pj_walkStrength())){return this.direction="forward"}else{return this.direction=null}}});
i$(function pj_execute(){this.pj_subclassResponsibility();return this});
i$(function pj_inputsDo_(aBlock){if(this.direction==="forward"){$asNil$(aBlock).pj_value_(this.v1)}else{$asNil$(aBlock).pj_value_(this.v2)};return this});
i$(function pj_isSatisfied(){return $asNil$(this.direction).pj_notNil()});
i$(function pj_markUnsatisfied(){this.direction=null;return this});
i$(function pj_output(){if(this.direction==="forward"){return this.v2}else{return this.v1}});
i$(function pj_recalculate(){var $in,out;if(this.direction==="forward"){$in=this.v1;out=this.v2}else{$in=this.v2;out=this.v1};$asNil$(out).pj_walkStrength_($asNil$(this.strength).pj_weakest_($asNil$($in).pj_walkStrength()));$asNil$(out).pj_stay_($asNil$($in).pj_stay());if(true==$asNil$(out).pj_stay()){this.pj_execute()};return this});
i$(function pj_removeFromGraph(){if(this.v1!==null){$asNil$(this.v1).pj_removeConstraint_(this)};if(this.v2!==null){$asNil$(this.v2).pj_removeConstraint_(this)};this.direction=null;return this});
i$(function pj_var_var_strength_(variable1,variable2,strengthSymbol){this.strength=PjDbStrength.pj_of_(strengthSymbol);this.v1=variable1;this.v2=variable2;this.direction=null;this.pj_addConstraint();return this});
c$(function pj_isAbstract(){return this==PjDbBinaryConstraint});
});
PjRbObject.pj_subclass_("PjRbPacket");
PjRbPacket.$$def(function(i$,c$,cp$){
i$(function pj_data(){return this.data});
i$(function pj_datum(){return this.datum});
i$(function pj_datum_(someData){this.datum=someData;return this});
i$(function pj_identity(){return this.identity});
i$(function pj_identity_(anIdentity){this.identity=anIdentity;return this});
i$(function pj_kind(){return this.kind});
i$(function pj_link(){return this.link});
i$(function pj_link_(aWorkQueue){this.link=aWorkQueue;return this});
i$(function pj_link_identity_kind_(aLink,anIdentity,aKind){this.link=aLink;this.identity=anIdentity;this.kind=aKind;this.datum=1;this.data=PjByteArray.pj_new_(4);return this});
c$(function pj_create_identity_kind_(link,identity,kind){return $asNil$(PjRbObject.pj_new.call(this)).pj_link_identity_kind_(link,identity,kind)});
});
PjRbObject.pj_subclass_("PjRbHandlerTaskDataRecord");
PjRbHandlerTaskDataRecord.$$def(function(i$,c$,cp$){
i$(function pj_create(){this.workIn=this.deviceIn=null;return this});
i$(function pj_deviceIn(){return this.deviceIn});
i$(function pj_deviceIn_(aPacket){this.deviceIn=aPacket;return this});
i$(function pj_deviceInAdd_(packet){this.deviceIn=this.pj_append_head_(packet,this.deviceIn);return this});
i$(function pj_workIn(){return this.workIn});
i$(function pj_workIn_(aWorkQueue){this.workIn=aWorkQueue;return this});
i$(function pj_workInAdd_(packet){this.workIn=this.pj_append_head_(packet,this.workIn);return this});
c$(function pj_create(){return $asNil$(PjRbObject.pj_new.call(this)).pj_create()});
});
PjRbObject.pj_subclass_("PjRbBenchmark");
PjRbBenchmark.$$def(function(i$,c$,cp$,$PjRbObject){
i$(function pj_createDevice_priority_work_state_(identity,priority,workX,state){var dataX,$_self_$=this;dataX=PjRbDeviceTaskDataRecord.pj_create();this.pj_createTask_priority_work_state_function_data_(identity,priority,workX,state,function(work,word){var data,functionWork;data=word;functionWork=work;if(true==$asNil$(functionWork).pj_isNil()){if(true==$asNil$((functionWork=$asNil$(data).pj_pending())).pj_isNil()){return $_self_$.pj_wait()}else{$asNil$(data).pj_pending_(null);return $_self_$.pj_queuePacket_(functionWork)}}else{$asNil$(data).pj_pending_(functionWork);if(true==$_self_$.tracing){$_self_$.pj_trace_($asNil$(functionWork).pj_datum())};return $_self_$.pj_holdSelf()}},dataX);return this});
i$(function pj_createHandler_priority_work_state_(identity,priority,workX,state){var dataX,$_self_$=this;dataX=PjRbHandlerTaskDataRecord.pj_create();this.pj_createTask_priority_work_state_function_data_(identity,priority,workX,state,function(work,word){var data,workPacket,count,devicePacket;data=word;if(false==$asNil$(work).pj_isNil()){if($PjRbObject.WorkPacketKind===$asNil$(work).pj_kind()){$asNil$(data).pj_workInAdd_(work)}else{$asNil$(data).pj_deviceInAdd_(work)}};if(true==$asNil$((workPacket=$asNil$(data).pj_workIn())).pj_isNil()){return $_self_$.pj_wait()}else{count=$asNil$(workPacket).pj_datum();if(count>4){$asNil$(data).pj_workIn_($asNil$(workPacket).pj_link());return $_self_$.pj_queuePacket_(workPacket)}else{if(true==$asNil$((devicePacket=$asNil$(data).pj_deviceIn())).pj_isNil()){return $_self_$.pj_wait()}else{$asNil$(data).pj_deviceIn_($asNil$(devicePacket).pj_link());$asNil$(devicePacket).pj_datum_($asNil$($asNil$(workPacket).pj_data()).pj_at_(count));$asNil$(workPacket).pj_datum_(count+1);return $_self_$.pj_queuePacket_(devicePacket)}}}},dataX);return this});
i$(function pj_createIdler_priority_work_state_(identity,priority,workX,state){var dataX,$_self_$=this;dataX=PjRbIdleTaskDataRecord.pj_create();this.pj_createTask_priority_work_state_function_data_(identity,priority,workX,state,function(work,word){var data;data=word;$asNil$(data).pj_count_($asNil$(data).pj_count()-1);if(0==$asNil$(data).pj_count()){return $_self_$.pj_holdSelf()}else{if(0==$asNil$($asNil$(data).pj_control()).pj_bitAnd_(1)){$asNil$(data).pj_control_($asNil$($asNil$(data).pj_control()).pj_47_47_(2));return $_self_$.pj_release_($PjRbObject.DeviceA)}else{$asNil$(data).pj_control_($asNil$($asNil$($asNil$(data).pj_control()).pj_47_47_(2)).pj_bitXor_(53256));return $_self_$.pj_release_($PjRbObject.DeviceB)}}},dataX);return this});
i$(function pj_createPacket_identity_kind_(link,identity,kind){return PjRbPacket.pj_create_identity_kind_(link,identity,kind)});
i$(function pj_createTask_priority_work_state_function_data_(identity,priority,work,state,aBlock,data){var t;t=PjRbTaskControlBlock.pj_link_create_priority_initialWorkQueue_initialState_function_privateData_(this.taskList,identity,priority,work,state,aBlock,data);this.taskList=t;$asNil$(this.taskTable).pj_at_put_(identity,t);return this});
i$(function pj_createWorker_priority_work_state_(identity,priority,workX,state){var dataX,$_self_$=this;dataX=PjRbWorkerTaskDataRecord.pj_create();this.pj_createTask_priority_work_state_function_data_(identity,priority,workX,state,function(work,word){var data;data=word;if(true==$asNil$(work).pj_isNil()){return $_self_$.pj_wait()}else{$asNil$(data).pj_destination_(true==$asNil$($PjRbObject.HandlerA).pj_61_($asNil$(data).pj_destination())?$PjRbObject.HandlerB:$PjRbObject.HandlerA);$asNil$(work).pj_identity_($asNil$(data).pj_destination());$asNil$(work).pj_datum_(1);(1).pj_to_do_(4,function(i){$asNil$(data).pj_count_($asNil$(data).pj_count()+1);if($asNil$(data).pj_count()>26){$asNil$(data).pj_count_(1)};return $asNil$($asNil$(work).pj_data()).pj_at_put_(i,$asNil$("A".pj_asInteger()).pj_43_($asNil$(data).pj_count())-1)});return $_self_$.pj_queuePacket_(work)}},dataX);return this});
i$(function pj_findTask_(identity){var t;t=$asNil$(this.taskTable).pj_at_(identity);if(true==$asNil$(t).pj_isNil()){this.pj_error_("findTask failed")};return t});
i$(function pj_holdSelf(){this.holdCount=this.holdCount+1;$asNil$(this.currentTask).pj_taskHolding_(true);return $asNil$(this.currentTask).pj_link()});
i$(function pj_initScheduler(){this.queuePacketCount=this.holdCount=0;this.taskTable=Array.pj_new_(6);this.taskList=null;return this});
i$(function pj_initTrace_(trace){this.tracing=trace;this.layout=0;return this});
i$(function pj_queuePacket_(packet){var t;t=this.pj_findTask_($asNil$(packet).pj_identity());if(true==$asNil$(t).pj_isNil()){return null};this.queuePacketCount=this.queuePacketCount+1;$asNil$(packet).pj_link_(null);$asNil$(packet).pj_identity_(this.currentTaskIdentity);return $asNil$(t).pj_addInput_checkPriority_(packet,this.currentTask)});
i$(function pj_release_(identity){var t;t=this.pj_findTask_(identity);if(true==$asNil$(t).pj_isNil()){return null};$asNil$(t).pj_taskHolding_(false);if($asNil$(t).pj_priority()>$asNil$(this.currentTask).pj_priority()){return t}else{return this.currentTask}});
i$(function pj_schedule(){this.currentTask=this.taskList;while(false==$asNil$(this.currentTask).pj_isNil()){if(true==$asNil$(this.currentTask).pj_isTaskHoldingOrWaiting()){this.currentTask=$asNil$(this.currentTask).pj_link()}else{this.currentTaskIdentity=$asNil$(this.currentTask).pj_identity();if(true==this.tracing){this.pj_trace_(this.currentTaskIdentity)};this.currentTask=$asNil$(this.currentTask).pj_runTask()}}return this});
i$(function pj_start(){return this.pj_start_(false)});
i$(function pj_start_(trace){var workQ,mark1,mark2,mark3,mark4;this.pj_initTrace_(trace);this.pj_initScheduler();mark1=Date.pj_millisecondClockValue();if(true==this.tracing){this.pj_show_("Bench mark starting");this.pj_cr()};this.pj_createIdler_priority_work_state_($PjRbObject.Idler,0,null,PjRbTaskState.pj_running());workQ=this.pj_createPacket_identity_kind_(null,$PjRbObject.Worker,$PjRbObject.WorkPacketKind);workQ=this.pj_createPacket_identity_kind_(workQ,$PjRbObject.Worker,$PjRbObject.WorkPacketKind);this.pj_createWorker_priority_work_state_($PjRbObject.Worker,1000,workQ,PjRbTaskState.pj_waitingWithPacket());workQ=this.pj_createPacket_identity_kind_(null,$PjRbObject.DeviceA,$PjRbObject.DevicePacketKind);workQ=this.pj_createPacket_identity_kind_(workQ,$PjRbObject.DeviceA,$PjRbObject.DevicePacketKind);workQ=this.pj_createPacket_identity_kind_(workQ,$PjRbObject.DeviceA,$PjRbObject.DevicePacketKind);this.pj_createHandler_priority_work_state_($PjRbObject.HandlerA,2000,workQ,PjRbTaskState.pj_waitingWithPacket());workQ=this.pj_createPacket_identity_kind_(null,$PjRbObject.DeviceB,$PjRbObject.DevicePacketKind);workQ=this.pj_createPacket_identity_kind_(workQ,$PjRbObject.DeviceB,$PjRbObject.DevicePacketKind);workQ=this.pj_createPacket_identity_kind_(workQ,$PjRbObject.DeviceB,$PjRbObject.DevicePacketKind);this.pj_createHandler_priority_work_state_($PjRbObject.HandlerB,3000,workQ,PjRbTaskState.pj_waitingWithPacket());this.pj_createDevice_priority_work_state_($PjRbObject.DeviceA,4000,null,PjRbTaskState.pj_waiting());this.pj_createDevice_priority_work_state_($PjRbObject.DeviceB,5000,null,PjRbTaskState.pj_waiting());if(true==this.tracing){this.pj_show_("Starting");this.pj_cr()};mark2=Date.pj_millisecondClockValue();this.pj_schedule();mark3=Date.pj_millisecondClockValue();if(true==this.tracing){this.pj_show_("Finished");this.pj_cr();this.pj_show_("QueuePacket count = "+$asNil$(this.queuePacketCount).pj_printString());this.pj_show_(" HoldCount = "+$asNil$(this.holdCount).pj_printString());this.pj_cr();this.pj_cr();this.pj_show_("End of run");this.pj_cr()};if(false==$asNil$((this.queuePacketCount==23246)).pj_38_(this.holdCount==9297)){this.pj_error_("wrong result")};mark4=Date.pj_millisecondClockValue();if(true==this.tracing){this.pj_show_("***Scheduler time = "+$asNil$($asNil$(mark3).pj_45_(mark2)).pj_printString());this.pj_show_(" Total time = "+$asNil$($asNil$(mark4).pj_45_(mark1)).pj_printString());this.pj_cr()};return $asNil$(mark4).pj_45_(mark1)});
i$(function pj_trace_(id){this.layout=this.layout-1;if(0>=this.layout){this.pj_cr();this.layout=50};this.pj_show_($asNil$(id).pj_printString());return this});
i$(function pj_wait(){$asNil$(this.currentTask).pj_taskWaiting_(true);return this.currentTask});
c$(function pj_start(){return $asNil$(this.pj_new()).pj_start()});
c$(function pj_start_(trace){return $asNil$(this.pj_new()).pj_start_(trace)});
},PjRbObject);
PjDbAbstractConstraint.pj_subclass_("PjDbUnaryConstraint");
PjDbUnaryConstraint.$$def(function(i$,c$,cp$){
i$(function pj_addToGraph(){$asNil$(this.output).pj_addConstraint_(this);this.satisfied=false;return this});
i$(function pj_chooseMethod_(mark){this.satisfied=true==$asNil$($asNil$(this.output).pj_mark()).pj_126_61_(mark)&&$asNil$(this.strength).pj_stronger_($asNil$(this.output).pj_walkStrength());return this});
i$(function pj_execute(){this.pj_subclassResponsibility();return this});
i$(function pj_inputsDo_(aBlock){return this});
i$(function pj_isSatisfied(){return this.satisfied});
i$(function pj_markUnsatisfied(){this.satisfied=false;return this});
i$(function pj_output(){return this.output});
i$(function pj_recalculate(){$asNil$(this.output).pj_walkStrength_(this.strength);$asNil$(this.output).pj_stay_($asNil$(this.pj_isInput()).pj_not());if(true==$asNil$(this.output).pj_stay()){this.pj_execute()};return this});
i$(function pj_removeFromGraph(){if(this.output!==null){$asNil$(this.output).pj_removeConstraint_(this)};this.satisfied=false;return this});
i$(function pj_var_strength_(aVariable,strengthSymbol){this.strength=PjDbStrength.pj_of_(strengthSymbol);this.output=aVariable;this.satisfied=false;this.pj_addConstraint();return this});
c$(function pj_isAbstract(){return this==PjDbUnaryConstraint});
});
PjApplication.pj_subclass_("PjDOMApplication");
PjDOMApplication.$$def(function(i$,c$,cp$){
i$(function pj_addElement_(tagString){return this.pj_addElement_to_(tagString,this.pj_body())});
i$(function pj_addElement_style_(tagString,cssStyleAssociations){return this.pj_addElement_to_style_(tagString,this.pj_body(),cssStyleAssociations)});
i$(function pj_addElement_to_(tagString,parentNode){var newElement;newElement=this.pj_createElement_(tagString);$asNil$(parentNode).pj_appendChild_(newElement);return newElement});
i$(function pj_addElement_to_style_(tagString,parentNode,cssStyleAssociations){var newElement;newElement=this.pj_createElement_style_(tagString,cssStyleAssociations);$asNil$(parentNode).pj_appendChild_(newElement);return newElement});
i$(function pj_attribute_at_(attributeName,elementId){return this.pj_attribute_ofElement_(attributeName,this.pj_elementAt_(elementId))});
i$(function pj_attribute_at_set_(attributeName,elementId,attributeValue){this.pj_attribute_ofElement_set_(attributeName,this.pj_elementAt_(elementId),attributeValue);return this});
i$(function pj_attribute_ofElement_(attributeName,domElement){return $asNil$(domElement).pj_getAttribute_(attributeName)});
i$(function pj_attribute_ofElement_set_(attributeName,domElement,attributeValue){$asNil$(domElement).pj_setAttribute_to_(attributeName,attributeValue);return this});
i$(function pj_body(){return $asNil$(this.pj_document()).pj_body()});
i$(function pj_createElement_(tagString){return $asNil$(this.pj_document()).pj_createElement_(tagString)});
i$(function pj_createElement_style_(tagString,cssStyleAssociations){var newElement;newElement=$asNil$(this.pj_document()).pj_createElement_(tagString);this.pj_setElement_style_(newElement,cssStyleAssociations);return newElement});
i$(function pj_cssClassesAddAll_element_(newClasses,domElement){this.pj_cssClassesReplaceAll_byAll_element_([],newClasses,domElement);return this});
i$(function pj_cssClassesElement_(domElement){return " ".pj_split_(this.pj_cssClassesStringElement_(domElement))});
i$(function pj_cssClassesElement_set_(domElement,cssClasses){var classString;classString="";$asNil$(cssClasses).pj_do_(function(each){return classString=$asNil$($asNil$(classString).pj_44_(" ")).pj_44_(each)});this.pj_cssClassesStringElement_set_(domElement,classString);return this});
i$(function pj_cssClassesRemoveAll_element_(oldCssClasses,domElement){this.pj_cssClassesReplaceAll_byAll_element_(oldCssClasses,[],domElement);return this});
i$(function pj_cssClassesReplaceAll_byAll_element_(oldCssClasses,newClasses,domElement){var cssClasses;cssClasses=this.pj_cssClassesElement_(domElement);$asNil$(oldCssClasses).pj_do_(function(each){return $asNil$(cssClasses).pj_remove_ifAbsent_(each,null)});$asNil$(cssClasses).pj_addAll_(newClasses);this.pj_cssClassesElement_set_(domElement,cssClasses);return this});
i$(function pj_cssClassesString_(elementId){return this.pj_cssClassesStringElement_(this.pj_elementAt_(elementId))});
i$(function pj_cssClassesString_set_(elementId,attributeValue){return this.pj_attribute_at_set_("class",elementId,attributeValue)});
i$(function pj_cssClassesStringElement_(domElement){var $1;if(($1=this.pj_attribute_ofElement_("class",domElement))==null){return "";}else{return $1}});
i$(function pj_cssClassesStringElement_set_(domElement,newClassesString){this.pj_attribute_ofElement_set_("class",domElement,newClassesString);return this});
i$(function pj_document(){return document});
i$(function pj_document(){return document});
i$(function pj_elementAt_(elementId){return $asNil$(this.pj_document()).pj_getElementById_(elementId)});
i$(function pj_elementAt_in_(childId,container){return $asNil$(container).pj_querySelector_("#"+childId)});
i$(function pj_hide_(domElement){$asNil$($asNil$(domElement).pj_style()).pj_display_("none");return this});
i$(function pj_hideElementAt_in_(domElementId,container){this.pj_show_elementAt_in_(false,domElementId,container);return this});
i$(function pj_innerHtmlAt_(elementId){return $asNil$(this.pj_elementAt_(elementId)).pj_innerHTML()});
i$(function pj_innerHtmlAt_set_(elementId,aString){$asNil$(this.pj_elementAt_(elementId)).pj_innerHTML_(aString);return this});
i$(function pj_onChange_do_(elementId,aBlock){this.pj_onChange_in_do_(elementId,this.pj_body(),aBlock);return this});
i$(function pj_onChange_in_do_(elementId,container,aBlock){var element;element=this.pj_elementAt_in_(elementId,container);this.pj_onChangeElement_do_(element,aBlock);return this});
i$(function pj_onChangeElement_do_(element,aBlock){$asNil$(element).pj_addEventListener_block_("change",function(){return $asNil$(aBlock).pj_cull_cull_($asNil$(element).pj_value(),element)});return this});
i$(function pj_onClick_do_(elementId,aBlock){this.pj_onClick_in_do_(elementId,this.pj_body(),aBlock);return this});
i$(function pj_onClick_in_do_(elementId,container,aBlock){var element;element=this.pj_elementAt_in_(elementId,container);this.pj_onClickElement_do_(element,aBlock);return this});
i$(function pj_onClickElement_do_(element,aBlock){$asNil$(element).pj_addEventListener_block_("click",function(){return $asNil$(aBlock).pj_cull_(element)});return this});
i$(function pj_onEvent_for_in_do_(eventId,elementId,container,aBlock){var element;element=this.pj_elementAt_in_(elementId,container);$asNil$(element).pj_addEventListener_block_(eventId,aBlock);return this});
i$(function pj_onKeyUp_do_(elementId,aBlock){this.pj_onKeyUp_in_do_(elementId,this.pj_body(),aBlock);return this});
i$(function pj_onKeyUp_in_do_(elementId,container,aBlock){var element;element=this.pj_elementAt_in_(elementId,container);this.pj_onKeyUpElement_do_(element,aBlock);return this});
i$(function pj_onKeyUpElement_do_(element,aBlock){$asNil$(element).pj_addEventListener_block_("keyup",function(){return $asNil$(aBlock).pj_cull_cull_($asNil$(element).pj_value(),element)});return this});
i$(function pj_setElement_style_(domElement,cssStyleAssociations){var style;style=$asNil$(domElement).pj_style();$asNil$($asNil$(cssStyleAssociations).pj_asDictionary()).pj_keysAndValuesDo_(function(key,value){return $asNil$(style).pj_at_put_(key,value)});return this});
i$(function pj_show_(domElement){$asNil$($asNil$(domElement).pj_style()).pj_display_("");return this});
i$(function pj_show_element_(aBoolean,domElement){if(true==aBoolean){return this.pj_show_(domElement)};this.pj_hide_(domElement);return this});
i$(function pj_show_elementAt_in_(aBoolean,domElementId,container){var element;element=this.pj_elementAt_in_(domElementId,container);this.pj_show_element_(aBoolean,element);return this});
i$(function pj_showElementAt_in_(domElementId,container){this.pj_show_elementAt_in_(true,domElementId,container);return this});
i$(function pj_start(){PjApplication.prototype.pj_start.call(this);this.pj_subscribeToDeviceEvents();return this});
i$(function pj_subscribeToDeviceEvents(){return this});
c$(function pj_isAbstract(){if(this==PjDOMApplication){return true}else{return PjApplication.pj_isAbstract.call(this)}});
});
PjDbUnaryConstraint.pj_subclass_("PjDbEditConstraint");
PjDbEditConstraint.$$def(function(i$,c$,cp$){
i$(function pj_execute(){return this});
i$(function pj_isInput(){return true});
c$(function pj_var_strength_(aVariable,strengthSymbol){return $asNil$(this.pj_new()).pj_var_strength_(aVariable,strengthSymbol)});
});
PjDbBinaryConstraint.pj_subclass_("PjDbScaleConstraint");
PjDbScaleConstraint.$$def(function(i$,c$,cp$){
i$(function pj_addToGraph(){$asNil$(this.v1).pj_addConstraint_(this);$asNil$(this.v2).pj_addConstraint_(this);$asNil$(this.scale).pj_addConstraint_(this);$asNil$(this.offset).pj_addConstraint_(this);this.direction=null;return this});
i$(function pj_execute(){if(this.direction==="forward"){$asNil$(this.v2).pj_value_($asNil$($asNil$($asNil$(this.v1).pj_value()).pj_42_($asNil$(this.scale).pj_value())).pj_43_($asNil$(this.offset).pj_value()))}else{$asNil$(this.v1).pj_value_($asNil$($asNil$($asNil$(this.v2).pj_value()).pj_45_($asNil$(this.offset).pj_value())).pj_47_47_($asNil$(this.scale).pj_value()))};return this});
i$(function pj_inputsDo_(aBlock){var $2,$1;if(this.direction==="forward"){$1=$asNil$(aBlock);$1.pj_value_(this.v1);$1.pj_value_(this.scale);$1.pj_value_(this.offset)}else{$2=$asNil$(aBlock);$2.pj_value_(this.v2);$2.pj_value_(this.scale);$2.pj_value_(this.offset)};return this});
i$(function pj_recalculate(){var $in,out;if(this.direction==="forward"){$in=this.v1;out=this.v2}else{out=this.v1;$in=this.v2};$asNil$(out).pj_walkStrength_($asNil$(this.strength).pj_weakest_($asNil$($in).pj_walkStrength()));$asNil$(out).pj_stay_(true==$asNil$($in).pj_stay()&&true==$asNil$(this.scale).pj_stay()&&$asNil$(this.offset).pj_stay());if(true==$asNil$(out).pj_stay()){this.pj_execute()};return this});
i$(function pj_removeFromGraph(){if(this.v1!==null){$asNil$(this.v1).pj_removeConstraint_(this)};if(this.v2!==null){$asNil$(this.v2).pj_removeConstraint_(this)};if(this.scale!==null){$asNil$(this.scale).pj_removeConstraint_(this)};if(this.offset!==null){$asNil$(this.offset).pj_removeConstraint_(this)};this.direction=null;return this});
i$(function pj_src_scale_offset_dst_strength_(srcVar,scaleVar,offsetVar,dstVar,strengthSymbol){this.strength=PjDbStrength.pj_of_(strengthSymbol);this.v1=srcVar;this.v2=dstVar;this.scale=scaleVar;this.offset=offsetVar;this.direction=null;this.pj_addConstraint();return this});
c$(function pj_var_var_var_var_strength_(src,scale,offset,dst,strengthSymbol){return $asNil$(this.pj_new()).pj_src_scale_offset_dst_strength_(src,scale,offset,dst,strengthSymbol)});
});
PjDOMApplication.pj_subclass_("PjWebApplication");
PjWebApplication.$$def(function(i$,c$,cp$){
c$(function pj_isAbstract(){if(this==PjWebApplication){return true}else{return PjDOMApplication.pj_isAbstract.call(this)}});
c$(function pj_whenJsReady_(aBlock){window.addEventListener("load", aBlock)});
});
PjRbTaskState.pj_subclass_("PjRbTaskControlBlock");
PjRbTaskControlBlock.$$def(function(i$,c$,cp$){
i$(function pj_addInput_checkPriority_(packet,oldTask){if(true==$asNil$(this.input).pj_isNil()){this.input=packet;this.packetPendingIV=true;if(this.priority>$asNil$(oldTask).pj_priority()){return this}}else{this.input=this.pj_append_head_(packet,this.input)};return oldTask});
i$(function pj_identity(){return this.identity});
i$(function pj_link(){return this.link});
i$(function pj_link_identity_priority_initialWorkQueue_initialState_function_privateData_(aLink,anIdentity,aPriority,anInitialWorkQueue,anInitialState,aBlock,aPrivateData){this.link=aLink;this.identity=anIdentity;this.priority=aPriority;this.input=anInitialWorkQueue;this.packetPendingIV=$asNil$(anInitialState).pj_isPacketPending();this.taskWaiting=$asNil$(anInitialState).pj_isTaskWaiting();this.taskHolding=$asNil$(anInitialState).pj_isTaskHolding();this.function=aBlock;this.handle=aPrivateData;return this});
i$(function pj_priority(){return this.priority});
i$(function pj_runTask(){var message;if(true==this.pj_isWaitingWithPacket()){message=this.input;this.input=$asNil$(message).pj_link();if(true==$asNil$(this.input).pj_isNil()){this.pj_running()}else{this.pj_packetPending()}}else{message=null};return $asNil$(this.function).pj_value_value_(message,this.handle)});
c$(function pj_link_create_priority_initialWorkQueue_initialState_function_privateData_(link,identity,priority,initialWorkQueue,initialState,aBlock,privateData){return $asNil$(PjRbTaskState.pj_new.call(this)).pj_link_identity_priority_initialWorkQueue_initialState_function_privateData_(link,identity,priority,initialWorkQueue,initialState,aBlock,privateData)});
});
PjDbUnaryConstraint.pj_subclass_("PjDbStayConstraint");
PjDbStayConstraint.$$def(function(i$,c$,cp$){
i$(function pj_execute(){return this});
c$(function pj_var_strength_(aVariable,strengthSymbol){return $asNil$(this.pj_new()).pj_var_strength_(aVariable,strengthSymbol)});
});
PjDbBinaryConstraint.pj_subclass_("PjDbEqualityConstraint");
PjDbEqualityConstraint.$$def(function(i$,c$,cp$){
i$(function pj_execute(){if(this.direction==="forward"){$asNil$(this.v2).pj_value_($asNil$(this.v1).pj_value())}else{$asNil$(this.v1).pj_value_($asNil$(this.v2).pj_value())};return this});
c$(function pj_var_var_strength_(variable1,variable2,strengthSymbol){return $asNil$(this.pj_new()).pj_var_var_strength_(variable1,variable2,strengthSymbol)});
});
PjWebApplication.pj_subclass_("PjBrowserTimingApplication");
PjBrowserTimingApplication.$$def(function(i$,c$,cp$){
i$(function pj_cr(){return this});
i$(function pj_initialize(){PjWebApplication.prototype.pj_initialize.call(this);this.printedIterations=this.iterations=1000000;return this});
i$(function pj_iterations(){return this.iterations});
i$(function pj_log_(aString){var log;$asNil$(console).pj_log_(aString);if((log=$asNil$(document).pj_getElementById_("log"))!=null){$asNil$(log).pj_innerHTML_($asNil$($asNil$(log).pj_innerHTML()).pj_44_(aString))};return this});
i$(function pj_prefix_(aString){this.prefix=aString;return this});
i$(function pj_runs(){return 10});
i$(function pj_show_(aString){var log;$asNil$(console).pj_log_(aString);if((log=$asNil$(document).pj_getElementById_("log"))!=null){$asNil$(log).pj_innerHTML_($asNil$($asNil$(log).pj_innerHTML()).pj_44_(aString))};return this});
i$(function pj_time(){PjTimingApplication.pj_allTimingOn_(this);PjTimingApplication.pj_jsTimingOn_top_(this,document);PjTimingApplication.pj_browserTimingOn_(this);return this});
i$(function pj_time_with_ratio_(aString,aBlock,ratio){var iters;iters=$asNil$($asNil$(this.iterations).pj_42_(ratio)).pj_asInteger();if(true==$asNil$(iters).pj_isZero()){iters=1};if(false==$asNil$(this.printedIterations).pj_61_(iters)){this.pj_show_("Running ");this.pj_show_(iters);this.pj_show_(" iterations");this.pj_cr();this.printedIterations=iters};$asNil$(console).pj_time_($asNil$(this.prefix).pj_44_(aString));$asNil$(iters).pj_timesRepeat_(aBlock);$asNil$(console).pj_timeEnd_($asNil$(this.prefix).pj_44_(aString));return this});
i$(function pj_warmups(){return 5});
c$(function pj_start(){PjTimingApplication.pj_runTimings_(this.pj_new());return this});
});
Smalltalk.pj_registerDnuForAll_(["%","&","*","**","+",",","-","->","/","//","<<","=","=~","@","\\\\","a","a:b:c:","abs","absoluteWeakest","adaptToPoint:andSend:","add:","addAll:","addAllLast:","addConstraint","addConstraint:","addConstraintsConsuming:to:","addDateAndTime:","addElement:to:","addElement:to:style:","addEventListener:block:","addFirst:","addInput:checkPriority:","addKnownObject:","addLast:","addPropagate:mark:","addToGraph","additionWithVector:","adhereTo:","adoptInstance:","allButFirst:","allButLast:","allEnumeratableKeysDo:","allPhxJsonInstvarNames","allSatisfy:","allSubclasses","allSubclassesDo:","allTimingOn:","angle","angleWith:","anyOne","anySatisfy:","appFolder:","append:head:","appendChild:","appendTo:","apply:with:","arcCos","arcTan","arcTan:","arguments","arithmeticValue","as:","asArray","asCharacter","asDictionary","asDuration","asFloat","asGLine","asGPoint","asGVector","asHours","asInteger","asJSON","asJsObject","asMinutes","asNanoSeconds","asOop","asOrderedCollection","asPoint","asSet","asSortedCollection","asString","asUppercase","asYear","asciiValue","associationsDo:","at:","at:at:","at:ifAbsent:","at:ifAbsentPut:","at:ifPresent:","at:ifPresent:ifAbsent:","at:put:","atEnd","atGlobalVarName:put:","attribute:at:set:","attribute:ofElement:","attribute:ofElement:set:","b","back","basicAt:","basicNew","basicNew:","basicNew:with:","basicNew:with:with:","basicNew:with:with:with:","basicNew:with:with:with:with:","basicSubtractFromDateAndTime:","between:and:","bitAnd:","bitShift:","bitXor:","body","bottom","boundaryContains:","browserTimingOn:","c","call:","call:with:","call:with:with:","call:with:with:with:","canUnderstand:","capitalized","ceiling","center","center:","center:radius:","center:vertex:coVertex:","chainTest:","changeVar:newValue:","chooseMethod:","class","className","classPool","classSubclassResponsibilitySet","closeTo:","closeTo:precision:","coVertex","coVertex:","collect:","comma","conditionalReturn","conditionalReturn2:","conditionalReturn:","constraints","constraintsConsuming:do:","containsPoint:","contents","contents:","control","control:","coordinates","coordinates:","coordinatesCollect:","coordinatesWith:collect:","coordinatesWith:do:","copy","copyFrom:to:","copyWithout:","cos","count","count:","cr","create","create:identity:kind:","createDevice:priority:work:state:","createElement:","createElement:style:","createHandler:priority:work:state:","createIdler:priority:work:state:","createPacket:identity:kind:","createTask:priority:work:state:function:data:","createWorker:priority:work:state:","crossProduct:","cssClassesElement:","cssClassesElement:set:","cssClassesReplaceAll:byAll:element:","cssClassesStringElement:","cssClassesStringElement:set:","cull:","cull:cull:","current","currentInstance","currentWorld","data","datum","datum:","day","dayOfMonth","days","days:","days:hours:minutes:seconds:nanoSeconds:","days:seconds:","daysInYear","daysSecondsCount","deepCopy","defaultDescription","defaultSort:to:","degreesToRadians","denormalized","deprecated:on:in:transformWith:","deprecated:transformWith:","destination","destination:","destroyConstraint","detect:","detect:ifFound:ifNone:","detectMin:","determinant","determinantWith:","determinedBy","determinedBy:","deviceIn","deviceIn:","deviceInAdd:","diagonals","display:","displayScaleFactor","distanceTo:","dividend:","do:","do:separatedBy:","doBetweenCurlyBraces:","doBetweenSquareBrackets:","doWhileTrue:","doWithIndex:","document","dotProduct:","edges","elementAt:","elementAt:in:","emptyCollection","emptyJavascriptObject","encompassingRectangle","ensure:","ensureObjectRegistered:","ensureOidOnObject:","eqv:","error","error:","errorNotFound:","even","eventProxyInfo","eventProxyInfo:","eventTargetProxyInfo:","execute","exp","explementary","extent","extractPlanFromConstraints:","findDelimiters:startingAt:","findIndex:","findTask:","first","fitInExtent:","flag:","flatCollect:","flatCollect:as:","floor","floor:","fminDenormalized","fminNormalized","fociLocation","fold:","format:","fractionPart","from:","fromPoint:","getAttribute:","getDate","getDay","getElementById:","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getOidFrom:","getSeconds","globalName","globalName:","handleDNU:for:","hash","hashMultiply","height","hide:","highBit","highBitOfPositiveReceiver","holdSelf","hour","hour24","hour:minute:second:","hour:minute:second:milliSecond:","hour:minute:second:nanoSecond:","hours","hours:","hoursCount","hoursSecondsCount","id","id:","identity","identity:","identityHash","identityIndexOf:","ifEmpty:","ifTrue:","ifTrue:ifFalse:","includes:","includesKey:","incrementalAdd:","incrementalRemove:","index","index:","indexForInserting:","indexOf:startingAt:","infinity","inheritsFrom:","initNilInJs","initObject","initScheduler","initThrowInJs","initTrace:","initialize","initializeWith:","inject:into:","innerHTML","innerHTML:","inputWidgetForPoint","inputsDo:","inputsKnown:","insert:before:","instVarNamed:","instVarNamed:put:","instVarNamed:putHidden:","installDnuArgs:selector:js:for:else:","integerPart","intersection:","intersectionsWith:","intersectionsWithEllipse:","intersectionsWithLine:","intersectionsWithPoint:","intersectionsWithPolygon:","intersectionsWithSegment:","intersectionsWithVerticalLine:","isAbstract","isBlock","isCharacter","isDigit","isEmpty","isEmptyOrNil","isFinite","isFloat","isFloatPoint","isFraction","isFunction:","isInfinite","isInput","isInteger","isIntegerPoint","isKindOf:","isLetter","isLiteral","isNaN","isNil","isNotEmpty","isNotNil","isNumber","isPacketPending","isParallelTo:","isPharoJsSelector:","isPoint","isSatisfied","isSelfEvaluating","isTaskHolding","isTaskHoldingOrWaiting","isTaskWaiting","isVowel","isWaitingWithPacket","isZero","isZeroVector","iterations","join","join:","jsTimingOn:top:","js_apply:args:","js_charAt:","js_charCodeAt:","js_defineProperty:field:properties:","js_forEach:","js_freeze:","js_fromCharCode:","js_hasOwnProperty:","js_join:","js_log:","js_parse:","js_pop","js_push:","js_shift","js_split:","js_substring:","js_substring:to:","js_toLowerCase","js_toString","js_toUpperCase","key","key:","key:value:","keyFrom:","keys","keysAndValuesDo:","keysDo:","kind","last","left","leftRotated","length","letterCharCodes","lf","lineIndicesDo:","linearEquation","link","link:","link:create:priority:initialWorkQueue:initialState:function:privateData:","link:identity:kind:","link:identity:priority:initialWorkQueue:initialState:function:privateData:","ln","load:","log:","logDescription","lowerLimitsWith:","majorAxis","makeDNU:","makeGetter:","makeObject","makePharoJsSelector:","makePlan:","makeSetter:","makeSubclass","mark","mark:","markUnsatisfied","materialize","materializeFromArray:","materializeFromString:","max:","maxVal","messageClass:","messageText","messageText:","metaclassClass:","metaclassOf:","methods","microsecondsToRun:","midPoint","midnight","milliSeconds","milliSeconds:","millisecondClockValue","milliseconds:since:","millisecondsCount","min:","minorAxis","minute","minutes","minutes:","minutesCount","month:","monthIndex","monthSecondsCount","months","months:","multiplyWithVector:","name","nanoSeconds:","nearestPointAlongLineFrom:to:","negated","negative","new","new:","newFrom:","newFromMaterialized:","newMark","newPhxJsonWriter","newVertices:","newWithCoordinates:","newWithId","next","nextGlobalVarName","nextIdNumber","nextIdentityHash","nextMessageId","nextOid","nextPut:","nextPutAll:","nilIfUndefined","nilTestFunctionName","nonOrientedAngleWith:","nonlocalReturn","nonlocalReturn2","not","notNil","notify:","now","numberOfDigits","numberOfDimensions","of:","ofSize:","oid","oid:","oidInstVarName","on:","on:do:","on:time:with:","on:time:with:ratio:","onChange:in:do:","onChangeElement:do:","onClick:in:do:","onClickElement:do:","onKeyUp:in:do:","onKeyUpElement:do:","onLineFrom:to:within:","one","origin:corner:","origin:extent:","output","overlappingPairsCollect:","packetPending","parse:","parseListDo:","parseNamedInstVarsFor:","peek","pending","pending:","perform:","perform:with:","perimeter","pharoJsSelectorPrefix","phxJsonClassName","pi","point:point:","position","positionError","positive","postCopy","precision","prefix:","primUTCMicrosecondsClock","print:","printAsLiteralFormOn:","printAsSelfEvaluatingFormOn:","printCoordinatesOn:","printDetailsOn:","printElementsOn:","printNameOn:","printOn:","printString","priority","privateLinearEquationComputation","projectionTest:","propagateFrom:","propertySet:","prototype","proxyResponse","putOn:","quadrantOf:","querySelector:","queuePacket:","quo:","r","radians","radiansToDegrees","radius","raisedTo:","raisedToFraction:","raisedToInteger:","reSort","readFromJsObjectOrDictionary:","readStream","recalculate","receiverProxyInfo","receiverProxyInfo:","reciprocal","rectangle:","registerDnu:","release","release:","rem:","remove","remove:","remove:ifAbsent:","removeAll","removeAt:","removeConstraint:","removeFirst","removeFromGraph","removeKey:","removePropagateFrom:","repeatLoop","replaceFrom:to:with:","replaceFrom:to:with:startingAt:","required","reset","resetEquationCache","respondsTo:","reverse","right","rightRotated","rotateBy:about:","rotatedBy:about:","roundDownTo:","roundTo:","roundUpTo:","rounded","rows","rows:","runTask","runTimings:","running","runs","sameAs:","satisfy:","schedule","second","seconds","seconds:","seconds:nanoSeconds:","secondsCount","secondsInDay","secondsInMonth","secondsInWeek","secondsInYear","segment:","select:","selector","selectors","semiMajorAxisLength","semiMinorAxisLength","sendsSelector:","serializationArray","serializationContents","setAttribute:to:","setElement:style:","setHours:","setMilliseconds:","setMinutes:","setOid:on:","setPoint:point:","setR:degrees:","setSeconds:","setToStart","setValue:strength:","setX:setY:","shallowCopy","shortPrintOn:","shouldBeImplemented","shouldBePrintedAsLiteral","shouldNotImplement","show:","show:element:","show:elementAt:in:","sideOf:","sign","signal","signal:","signal:from:to:","signalFrom:to:","sin","size","skip:","skipDelimiters:startingAt:","skipTo:","sort","sort:","sortBlock","sortBlock:","sortUsing:","sourceElement","space","species","splice:remove:element:","split:","sqrt","squared","src:scale:offset:dst:strength:","start","start:","startInstance","stay","stay:","stop","stopPropagation","storeOn:","streamContents:","strength","string","stringHash:initialHash:","stringify:","stronger:","style","subclassResponsibility","subclassResponsibilitySet","subclassSelector","subclasses","subclassesDo:","subscribeToDeviceEvents","subtractFromDateAndTime:","sum","sum:","superclass","swap:with:","tab","target","taskHolding:","taskWaiting:","ten","theta","through:and:","throwFunction","throwFunctionName","time","time:","time:with:ratio:","timeEnd:","timesRepeat:","timesTwoPower:","to:","to:by:do:","to:do:","to:sideOf:","toDoLoop","toISOString","todayHour:minute:second:","tomorrowHour:minute:second:","top","topLeft","totalSeconds","trace:","transform:","translateBy:","triangleArea:with:","truncateTo:","truncated","tryToSendMessage:","typeof","upperLimitsWith:","v1","v1:","v2","v2:","value","value:","value:value:","value:value:value:","value:value:value:value:","valuesDo:","var:strength:","var:var:strength:","var:var:var:var:strength:","vertex","vertex:","vertices","vertices:","visitPoint:","wait","waiting","waitingWithPacket","walkStrength","walkStrength:","warmups","weaker:","weakest:","weeks","weeks:","weeksSecondsCount","whenJsReady:","whileFalse:","whileLoop","whileRemoteLoop","whileTrue","whileTrue:","wholeMilliseconds","width","with:","with:collect:","with:do:","with:with:","with:with:with:","with:with:with:with:","withAll:","withCRs","withCollection:","withIndexDo:","workIn","workIn:","workInAdd:","writeKeyName:andValue:","writeObject:","writeObject:streamShortList:","writePhxJsonObjectOn:","writePhxJsonOn:","writePhxJsonRepresentationOn:","writeQuoted:","writeReferenceFor:or:","writeStream","x","x:","x:y:","xFor:","y","y:","yFor:","year","year:month:day:hour:minute:second:","years","years:","yourself","zero","~=","\u03C0"]);
PjRbObject.pj_initialize();
PjDbStrength.pj_initialize();
console.timeEnd("ES5");
if(!localStorage.iterationsCount){
  localStorage.iterationsCount = 100;
  localStorage.nextIteration = 1;
}else{
  localStorage.nextIteration = 1 + Number(localStorage.nextIteration);
}
if(Number(localStorage.nextIteration) < Number(localStorage.iterationsCount)){ 
  window.setTimeout(()=>{window.location.reload();});
}else{
  console.log(">>> PharoJS load benchmark finished");
  localStorage.clear();
}